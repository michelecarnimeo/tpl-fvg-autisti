<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport"/>
<title>Benvenuto - TPL FVG Autisti</title>
<!-- Font locali per PWA offline -->
<!-- CSS personalizzato -->
<link rel="stylesheet" href="style1.css">
<!-- Animazioni e transizioni globali -->
<link rel="stylesheet" href="css/animations.css">
<link rel="stylesheet" href="css/components/footer.css">
<link rel="stylesheet" href="css/components/modals.css">
<!-- Settings (struttura modale) -->
<link rel="stylesheet" href="css/components/settings/impostazioni.css">
<link rel="stylesheet" href="css/components/settings/accessibilita.css">
<link rel="stylesheet" href="css/components/settings/aspetto.css">
<link rel="stylesheet" href="css/components/settings/info.css">
<link rel="manifest" href="manifest.json"/>
<link rel="icon" href="src/tpl.jpg" type="image/jpeg"/>
<style>
  body {
    font-family: 'Roboto', Arial, sans-serif;
  }

  /* Stili per l'immagine di benvenuto */
  .welcome-image-container {
    text-align: center;
    margin-bottom: 1.5rem;
  }
  
  .welcome-image {
    max-width: 100%;
    height: auto;
    max-height: 420px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    object-fit: cover;
  }
  
  /* Responsive per mobile */
  @media (max-width: 768px) {
    .welcome-image {
      max-height: 320px;
    }
    
    /* Nascondi card su mobile e aggiungi padding */
    .main-card {
      background: transparent !important;
      border: none !important;
      box-shadow: none !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      padding: 1rem !important;
      margin: 0 !important;
      border-radius: 0 !important;
    }
  }
  
  /* Spaziatura pulsanti benvenuto */
  .calculate-section {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 2rem;
  }
  
  /* Titoli benvenuto con testo opaco */
  .card-title h1 {
    color: var(--testo-principale);
    font-weight: 700;
  }
  
  .card-title p {
    color: var(--testo-principale);
  }
  
  /* Dark mode per titoli */
  .dark .card-title h1,
  .dark .card-title p {
    color: rgba(255, 255, 255, 1) !important;
  }
  
  /* Pulsante Impostazioni in alto a destra */
  .settings-btn-corner {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 1000;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    color: var(--testo-principale);
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    font-size: 1.5rem;
  }
  
  .settings-btn-corner:hover {
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  }
  
  .dark .settings-btn-corner {
    background: var(--glass-bg-dark);
    border-color: var(--glass-border-dark);
    color: rgba(255, 255, 255, 1);
  }
  
  @media (max-width: 768px) {
    .settings-btn-corner {
      width: 45px;
      height: 45px;
      font-size: 1.3rem;
      top: 0.75rem;
      right: 0.75rem;
    }
  }
  
  /* Mostra il modal quando √® attivo */
  .settings-modal.active {
    display: flex !important;
    align-items: center;
    justify-content: center;
  }
</style>
</head>
<body>

<!-- Pulsante Impostazioni fisso in alto a destra -->
<button id="open-settings" class="settings-btn-corner" aria-label="Apri Impostazioni" title="Impostazioni">
  ‚öôÔ∏è
</button>

<div class="main-content">
  <div class="container">
    <div class="main-card fade-in">
      <div class="card-title">
        <div class="mb-4 welcome-image-container">
          <img src="./src/benvenuto.jpg" alt="Benvenuto TPL FVG" class="welcome-image" loading="lazy" />
        </div>
        <h1>Benvenuto in TPL FVG Autisti</h1>
        <p style="font-size: 1.05rem; line-height: 1.6; margin-top: 16px;">
          Guida tariffe pensata per gli autisti TPL FVG.<br>
          Calcola rapidamente il costo e il codice del biglietto in base alla tratta selezionata.
        </p>
      </div>
      
      <div class="calculate-section">
        <button id="start-btn" class="calculate-btn">
          Inizia
        </button>
      </div>
    </div>
  </div>
</div>

  <!-- Modal Impostazioni -->
  <div id="settings-modal" class="settings-modal">
    <div class="settings-modal-content">
      <!-- Header -->
      <div class="settings-modal-header">
        <h3>‚öôÔ∏è Impostazioni</h3>
        <button id="settings-modal-close" class="settings-modal-close" aria-label="Chiudi">√ó</button>
      </div>
      
      <!-- Tabs -->
      <div class="settings-tabs">
        <button class="settings-tab active" data-tab="appearance">
          <span class="tab-icon">üëÅÔ∏è</span>
          <span>Aspetto</span>
        </button>
        <button class="settings-tab" data-tab="accessibility">
          <span class="tab-icon">‚ôø</span>
          <span>Accessibilit√†</span>
        </button>
        <button class="settings-tab" data-tab="info">
          <span class="tab-icon">‚ÑπÔ∏è</span>
          <span>Info</span>
        </button>
      </div>
      
      <!-- Tab Content -->
      <div class="settings-content">
        
                <!-- Tab Aspetto -->
                <div class="settings-tab-content active" data-content="appearance">
                    <div class="settings-section">
                        
                        <!-- Theme Mode -->
            <div class="settings-item settings-item-vertical">
              <div class="settings-item-info">
                <span class="settings-item-icon">üåì</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Tema</div>
                  <div class="settings-item-description">Scegli l'aspetto dell'app</div>
                </div>
              </div>
              <div class="settings-theme-options">
                <label class="settings-theme-option">
                  <input type="radio" name="theme-mode" value="system" id="theme-system" checked>
                  <span class="theme-option-card">
                    <span class="theme-option-icon">‚öôÔ∏è</span>
                    <span class="theme-option-label">Sistema</span>
                    <span class="theme-option-description">Segue il dispositivo</span>
                  </span>
                </label>
                <label class="settings-theme-option">
                  <input type="radio" name="theme-mode" value="light" id="theme-light">
                  <span class="theme-option-card">
                    <span class="theme-option-icon">‚òÄÔ∏è</span>
                    <span class="theme-option-label">Chiara</span>
                    <span class="theme-option-description">Sempre chiara</span>
                  </span>
                </label>
                <label class="settings-theme-option">
                  <input type="radio" name="theme-mode" value="dark" id="theme-dark">
                  <span class="theme-option-card">
                    <span class="theme-option-icon">üåô</span>
                    <span class="theme-option-label">Scura</span>
                    <span class="theme-option-description">Sempre scura</span>
                  </span>
                </label>
              </div>
            </div>
            
            <!-- Animazione Sfondo -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">üé¨</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Animazione sfondo</div>
                  <div class="settings-item-description">Gradiente animato nello sfondo</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-animation">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
            
            <!-- Contrasto Alto -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">üëÅÔ∏è</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Contrasto elevato</div>
                  <div class="settings-item-description">Migliora leggibilit√† in pieno sole</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-high-contrast">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
            
            <!-- Riduci Animazioni -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">‚ö°</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Riduci animazioni</div>
                  <div class="settings-item-description">Disabilita transizioni ed effetti visivi</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-reduce-motion" aria-label="Attiva/disattiva riduzione animazioni">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- Tab Accessibilit√† -->
                <div class="settings-tab-content" data-content="accessibility">
                    <div class="settings-section">
                        
                        <!-- Dimensione Testo -->
            <div class="settings-item settings-item-vertical">
              <div class="settings-item-info">
                <span class="settings-item-icon">A</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Dimensione testo</div>
                  <div class="settings-item-description">Scegli la dimensione pi√π comoda</div>
                </div>
              </div>
              <div class="settings-font-buttons">
                <button class="settings-font-btn active" data-size="normal">
                  <span class="font-sample">A</span>
                  <span class="font-label">Normale</span>
                </button>
                <button class="settings-font-btn" data-size="large">
                  <span class="font-sample">A</span>
                  <span class="font-label">Grande</span>
                </button>
                <button class="settings-font-btn" data-size="xlarge">
                  <span class="font-sample">A</span>
                  <span class="font-label">Molto Grande</span>
                </button>
              </div>
            </div>
            
            <!-- Pulsanti Grandi -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">üëÜ</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Modalit√† touch</div>
                  <div class="settings-item-description">Pulsanti pi√π grandi e spaziati</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-touch-friendly">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
            
            <!-- Feedback Aptico -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">üì≥</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Feedback aptico</div>
                  <div class="settings-item-description">Vibrazione su azioni e conferme</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-haptic-feedback" aria-label="Attiva/disattiva feedback aptico">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
            
            <!-- Keep Screen On -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">‚òÄÔ∏è</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Schermo sempre attivo</div>
                  <div class="settings-item-description">Impedisce lo spegnimento automatico</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-keep-screen-on" aria-label="Attiva/disattiva schermo sempre attivo">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
            
            <!-- Spaziatura Extra -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">üìè</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Spaziatura extra</div>
                  <div class="settings-item-description">Pulsanti pi√π grandi e spaziati</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-extra-spacing" aria-label="Attiva/disattiva spaziatura extra">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
            
            <!-- Layout Compatto -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">üìê</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Layout compatto</div>
                  <div class="settings-item-description">Riduce spazi per mostrare pi√π contenuto</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-compact-layout" aria-label="Attiva/disattiva layout compatto">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
            
            <!-- Filtro Luce Blu -->
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-icon">üîµ</span>
                <div class="settings-item-text">
                  <div class="settings-item-label">Filtro luce blu</div>
                  <div class="settings-item-description">Riduce affaticamento occhi (uso notturno)</div>
                </div>
              </div>
              <label class="settings-toggle">
                <input type="checkbox" id="settings-blue-light-filter" aria-label="Attiva/disattiva filtro luce blu">
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
          </div>
          
          <!-- Sezione Dimensione Interfaccia -->
          <div class="settings-section">
            <h4 class="settings-section-title">üîç Dimensione Interfaccia</h4>
            
            <div class="scale-preset-selector">
              <div class="scale-preset-description">
                Scala l'intera interfaccia della web app
              </div>
              
              <div class="scale-preset-options">
                <label class="scale-preset-option">
                  <input type="radio" name="interface-scale" value="75" id="scale-75">
                  <div class="scale-preset-card">
                    <div class="scale-preset-info">
                      <div class="scale-preset-name">Molto Compatta</div>
                      <div class="scale-preset-percent">75%</div>
                    </div>
                  </div>
                </label>
                
                <label class="scale-preset-option">
                  <input type="radio" name="interface-scale" value="85" id="scale-85">
                  <div class="scale-preset-card">
                    <div class="scale-preset-info">
                      <div class="scale-preset-name">Compatta</div>
                      <div class="scale-preset-percent">85%</div>
                    </div>
                  </div>
                </label>
                
                <label class="scale-preset-option">
                  <input type="radio" name="interface-scale" value="100" id="scale-100" checked>
                  <div class="scale-preset-card">
                    <div class="scale-preset-info">
                      <div class="scale-preset-name">Normale</div>
                      <div class="scale-preset-percent">100%</div>
                    </div>
                  </div>
                </label>
                
                <label class="scale-preset-option">
                  <input type="radio" name="interface-scale" value="115" id="scale-115">
                  <div class="scale-preset-card">
                    <div class="scale-preset-info">
                      <div class="scale-preset-name">Grande</div>
                      <div class="scale-preset-percent">115%</div>
                    </div>
                  </div>
                </label>
                
                <label class="scale-preset-option">
                  <input type="radio" name="interface-scale" value="125" id="scale-125">
                  <div class="scale-preset-card">
                    <div class="scale-preset-info">
                      <div class="scale-preset-name">Molto Grande</div>
                      <div class="scale-preset-percent">125%</div>
                    </div>
                  </div>
                </label>
              </div>
            </div>
          </div>
          
        </div>
        
        <!-- Tab Info e Aggiornamenti -->
                <div class="settings-tab-content" data-content="info">
                    <div class="settings-section">
                        
                        <!-- Informazioni App -->
            <div class="info-card">
              <div class="info-header">
                <img src="src/logo.png" alt="TPL FVG" class="info-logo">
                <div class="info-title">
                  <h3>TPL FVG Autisti</h3>
                  <p class="info-version">Versione ...</p>
                  <p class="info-date">30 Ottobre 2025 - 15:45</p>
                </div>
              </div>
              
              <div class="info-description">
                <p>App per calcolare i prezzi dei biglietti e visualizzare le fermate del trasporto pubblico locale del Friuli Venezia Giulia.</p>
              </div>
              
              <div class="info-features">
                <div class="info-feature">
                  <span class="info-feature-icon">üí∞</span>
                  <span>Calcolo prezzi biglietti</span>
                </div>
                <div class="info-feature">
                  <span class="info-feature-icon">üöå</span>
                  <span>Elenco fermate per linea</span>
                </div>
                <div class="info-feature">
                  <span class="info-feature-icon">üì±</span>
                  <span>Installabile come PWA</span>
                </div>
                <div class="info-feature">
                  <span class="info-feature-icon">üåô</span>
                  <span>Modalit√† scura</span>
                </div>
              </div>
            </div>
            
            <!-- Verifica Aggiornamenti -->
            <div class="info-card update-check-card">
              <div class="update-check-header">
                <div class="update-check-icon">üîÑ</div>
                <div class="update-check-text">
                  <h4 class="update-check-title">Verifica Aggiornamenti</h4>
                  <p class="update-check-description">Controlla se √® disponibile una nuova versione dell'app</p>
                </div>
              </div>
              <button id="pwa-cache-reset" class="update-check-btn">
                Verifica Aggiornamenti
              </button>
            </div>
            
            <!-- Riavvia App -->
            <div class="info-card update-check-card">
              <div class="update-check-header">
                <div class="update-check-icon">üì≤</div>
                <div class="update-check-text">
                  <h4 class="update-check-title">Riavvia App</h4>
                  <p class="update-check-description">Riavvia l'applicazione per applicare le modifiche</p>
                </div>
              </div>
              <button id="restart-app-btn" class="update-check-btn restart-app-btn">
                Riavvia Ora
              </button>
            </div>
            
            <!-- Aggiornamenti Recenti -->
            <div class="info-card">
              <h4 class="info-card-title">üìã Aggiornamenti Recenti</h4>
              
              <!-- Contenitore dinamico per il changelog -->
              <div id="changelog-container">
                <!-- Il changelog verr√† inserito qui da changelog.js -->
              </div>
            </div>
            
            <!-- Link Utili -->
            <div class="info-card">
              <h4 class="info-card-title">üîó Link Utili</h4>
              
              <a href="https://t.me/+eoJ9nYFFrjphMzVk" target="_blank" class="info-link external-link">
                <span class="info-link-icon">üì¢</span>
                <span>Canale Telegram - Avvisi & Aggiornamenti</span>
                <span>‚Üó</span>
              </a>
              
              <a href="test.html" class="info-link">
                <span class="info-link-icon">üß™</span>
                <span>Pagina Test</span>
                <span>‚Üí</span>
              </a>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <!-- Footer generato dinamicamente da footer.js -->
  </footer>

<!-- Script principale -->
<script src="footer.js"></script>
<script src="changelog.js"></script>
<script src="js/features/updates.js"></script>
<script src="js/features/settings.js"></script>
<script src="js/features/prezzi.js"></script>
<script src="js/components/modals.js"></script>
<script src="script.js"></script>
<script>
  // Aspetta che il DOM sia completamente caricato
  document.addEventListener('DOMContentLoaded', function() {
    // Pulsante Inizia
    const startBtn = document.getElementById('start-btn');
    if (startBtn) {
      startBtn.addEventListener('click', function(e) {
        e.preventDefault();
        console.log('Pulsante Inizia cliccato!');
        window.location.href = 'index.html';
      });
    } else {
      console.error('Pulsante start-btn non trovato!');
    }
    
    // Il pulsante Impostazioni √® gestito da script.js
    // che cerca automaticamente #open-settings
    
    // Aggiorna l'anno nel footer
    const footerYear = document.getElementById('footer-year');
    if (footerYear) footerYear.textContent = new Date().getFullYear();
  });
  
  // Service Worker
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js').catch(err => console.error('SW registration failed', err));
    });
  }
</script>

<!-- Render del Changelog -->
<script>
  // Aspetta che il DOM sia pronto
  document.addEventListener('DOMContentLoaded', () => {
    renderChangelog('changelog-container');
  });
</script>

</body>
</html>
