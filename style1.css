/* ========================================
   BASE: RESET, VARIABILI, DARK MODE, BODY, CONTAINER
   Estratto da style.css per riorganizzazione sicura
   ======================================== */

/* ========================================
   SEZIONE 1: RESET CSS
   ======================================== */
/* Reset globale per rimuovere margini e padding di default */
* {
    margin: 0;        /* Rimuove margini di default di tutti gli elementi */
    padding: 0;       /* Rimuove padding di default di tutti gli elementi */
    box-sizing: border-box;  /* Include padding e border nel calcolo delle dimensioni */
  }
  
  /* ========================================
     SEZIONE 2: FONT DI SISTEMA
     ======================================== */
  /* Imposta font di sistema per funzionamento offline (non dipende da font esterni) */
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    /* Fallback: usa font di sistema nativi per compatibilità offline */
  }
  
  /* ========================================
     SEZIONE 3: VARIABILI CSS - PALETTE COLORI
     ======================================== */
  :root {
    /* SOTTOSEZIONE 3.1: Colori principali dell'applicazione */
    --turchese: #007b8a;           /* Colore principale ciano - navbar e elementi accent */
    --turchese-scuro: #005f6b;     /* Versione più scura del ciano - hover e stati attivi */
    --turchese-light: #0099aa;     /* Versione più chiara del ciano - elementi secondari */
    --bianco: #ffffff;             /* Bianco puro per testi su sfondi scuri */
    --grigio-chiaro: #f0f4f8;      /* Grigio molto chiaro per sfondi neutri */
    --grigio-medio: #e9ecef;       /* Grigio medio per separatori e bordi */
    --grigio-scuro: #6c757d;       /* Grigio scuro per testo secondario */
    --testo-principale: #0f172a;   /* Colore principale del testo (blu scuro) */
    --testo-secondario: #4a5568;   /* Colore secondario del testo (grigio scuro) */
    --bordo: rgba(255, 255, 255, 0.18);  /* Bordo bianco semi-trasparente per glassmorphism */
  
    /* SOTTOSEZIONE 3.2: Variabili ottimizzate per performance */
    --glass-bg: rgba(255, 255, 255, 0.95);  /* Sfondo semi-opaco per card */
    --glass-border: rgba(255, 255, 255, 0.5);  /* Bordo bianco più visibile per card */
    --glass-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);  /* Ombra semplificata per card */
    --backdrop-blur: none;  /* Rimosso per migliorare performance */
  
  /* SOTTOSEZIONE 3.3: Colori per modalità scura */
  --bg-scuro: #0f172a;                    /* Sfondo scuro principale per dark mode */
  --card-scuro: rgba(30, 41, 59, 0.4);    /* Sfondo scuro per card in dark mode */
  --testo-scuro: #ffffff;                 /* Testo bianco puro per dark mode (miglior contrasto) */

  /* SOTTOSEZIONE 3.4: Variabili per dimensioni testo accessibilità */
  --font-size-multiplier: 1;              /* Moltiplicatore per dimensione testo (1 = normale, 1.15 = grande, 1.3 = molto grande) */
    --bordo-scuro: rgba(148, 163, 184, 0.1); /* Bordo chiaro per dark mode */
  
    /* SOTTOSEZIONE 3.4: Ottimizzazioni per modalità scura */
    --glass-bg-dark: rgba(30, 41, 59, 0.95);        /* Sfondo scuro semi-opaco */
    --glass-border-dark: rgba(148, 163, 184, 0.5);  /* Bordo glassmorphism scuro più visibile */
    --glass-shadow-dark: 0 4px 12px 0 rgba(0, 0, 0, 0.3);  /* Ombra scura semplificata */
  }
  
  /* ========================================
     SEZIONE 4: MODALITÀ SCURA (DARK MODE)
     ======================================== */
  /* Ridefinisce le variabili CSS quando la classe .dark è applicata al body */
  .dark {
    --grigio-chiaro: var(--bg-scuro);        /* Grigio chiaro diventa sfondo scuro */
    --bianco: var(--card-scuro);             /* Bianco diventa card scura */
    --testo-principale: var(--testo-scuro);  /* Testo principale diventa chiaro */
    --testo-secondario: #cbd5e1;             /* Testo secondario più chiaro per miglior contrasto */
    --bordo: var(--bordo-scuro);             /* Bordi diventano chiari */
    --glass-bg: var(--glass-bg-dark);        /* Glassmorphism diventa scuro */
  --glass-border: var(--glass-border-dark); /* Bordi glassmorphism diventano chiari */
  --glass-shadow: var(--glass-shadow-dark); /* Ombre glassmorphism diventano scure */
}

/* ========================================
   SEZIONE 4.5: ACCESSIBILITÀ - DIMENSIONI TESTO
   ======================================== */
/* Classi per regolare la dimensione del testo per accessibilità */

/* SOTTOSEZIONE 4.5.1: Dimensione normale (default) */
body.font-size-normal {
  --font-size-multiplier: 1;
}

/* SOTTOSEZIONE 4.5.2: Dimensione grande (+15%) */
body.font-size-large {
  --font-size-multiplier: 1.15;
}

/* SOTTOSEZIONE 4.5.3: Dimensione molto grande (+30%) */
body.font-size-xlarge {
  --font-size-multiplier: 1.3;
}

/* SOTTOSEZIONE 4.5.4: Applicazione del moltiplicatore a tutti gli elementi di testo */
body {
  font-size: calc(16px * var(--font-size-multiplier));
}

/* Riduzione font-size base per dispositivi mobile */
@media (max-width: 768px) {
  body {
    font-size: calc(15px * var(--font-size-multiplier));
  }
}

/* Ulteriore riduzione per schermi molto piccoli (es. iPhone 12 Mini, iPhone SE) */
@media (max-width: 390px) {
  body {
    font-size: calc(14px * var(--font-size-multiplier));
  }
}

h1 {
  font-size: calc(2rem * var(--font-size-multiplier));
}

h2 {
  font-size: calc(1.5rem * var(--font-size-multiplier));
}

h3 {
  font-size: calc(1.25rem * var(--font-size-multiplier));
}

h4, h5, h6 {
  font-size: calc(1rem * var(--font-size-multiplier));
}

p, span, div, a, button, input, select, textarea, label, li {
  font-size: calc(1em * var(--font-size-multiplier));
}

/* Ottimizzazione titoli per mobile */
@media (max-width: 768px) {
  h1 {
    font-size: calc(1.75rem * var(--font-size-multiplier));
  }
  
  h2 {
    font-size: calc(1.35rem * var(--font-size-multiplier));
  }
  
  h3 {
    font-size: calc(1.15rem * var(--font-size-multiplier));
  }
}

/* ========================================
   SEZIONE 5: BACKGROUND DEL BODY - GRADIENTE ANIMATO
   ======================================== */
  /* Configurazione principale del body con sfondo glassmorphism animato */
  body {
    /* SOTTOSEZIONE 5.1: Font principale */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;  /* Font di sistema per compatibilità offline */
    
    /* SOTTOSEZIONE 5.2: Gradiente di sfondo bianco sfumato */
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 25%, #cbd5e1 50%, #94a3b8 75%, #64748b 100%);
    background-size: 400% 400%;        /* Dimensione del gradiente per animazione */
    /* Animazione rimossa - controllata da JavaScript */
    
    /* SOTTOSEZIONE 5.3: Testo e layout base */
    color: var(--testo-principale);    /* Colore del testo principale */
    line-height: 1.6;                 /* Altezza della riga per leggibilità */
    min-height: 100vh;                /* Altezza minima viewport */
    
    /* SOTTOSEZIONE 5.4: Transizioni e posizionamento */
    transition: all 0.3s ease;        /* Transizioni smooth per tutti gli elementi */
    position: relative;               /* Posizionamento relativo per elementi assoluti */
    overflow-x: hidden;              /* Nasconde scroll orizzontale */
    
    /* SOTTOSEZIONE 5.5: Layout flexbox */
    margin: 0;                       /* Rimuove margini default */
    padding: 0;                      /* Rimuove padding default */
    display: flex;                   /* Layout flexbox per struttura verticale */
    flex-direction: column;          /* Direzione verticale (header, main, footer) */
  }
  
  /* SOTTOSEZIONE 5.6: Animazione del gradiente di sfondo */
  /* Definisce l'animazione per far muovere il gradiente di sfondo */
  @keyframes gradientShift {
    0% {
      background-position: 0% 50%;    /* Posizione iniziale del gradiente */
    }
    50% {
      background-position: 100% 50%;  /* Posizione centrale - gradiente si sposta */
    }
    100% {
      background-position: 0% 50%;    /* Ritorna alla posizione iniziale */
    }
  }
  
  /* SOTTOSEZIONE 5.6.1: Animazione controllata da JavaScript */
  /* L'animazione è disabilitata di default per migliorare le performance */
  
  /* SOTTOSEZIONE 5.6.2: Abilita animazione quando richiesta */
  body.animation-enabled {
    animation: gradientShift 20s ease infinite !important;
  }
  
  .dark body.animation-enabled {
    animation: gradientShift 20s ease infinite !important;
  }
  
  /* SOTTOSEZIONE 5.7: Background per modalità scura */
  /* Override del gradiente quando la classe .dark è attiva */
  .dark body {
    background: linear-gradient(135deg, #1a202c 0%, #2d3748 25%, #4a5568 50%, #718096 75%, #a0aec0 100%);
    /* Gradiente scuro: grigio scuro → grigio → grigio chiaro */
    background-size: 400% 400%;        /* Stessa dimensione per animazione */
    /* Animazione rimossa - controllata da JavaScript */
  }
  
  /* ========================================
     SEZIONE 6: CONTAINER PRINCIPALE
     ======================================== */
  /* Container wrapper per tutto il contenuto dell'applicazione */
  .container {
    max-width: none;        /* Nessuna larghezza massima - usa tutto lo spazio */
    margin: 0 auto;         /* Centra il container orizzontalmente */
    padding: 0 0.25rem;     /* Padding laterale minimo per evitare attaccarsi ai bordi */
    width: 100%;            /* Usa tutta la larghezza disponibile */
    box-sizing: border-box; /* Include padding nel calcolo delle dimensioni */
  }
  
  /* SOTTOSEZIONE 6.1: Responsive mobile - padding maggiore */
  @media (max-width: 768px) {
    .container {
      padding: 0 1rem;      /* Padding laterale maggiore su tablet/mobile */
    }
  }
  
  @media (max-width: 480px) {
    .container {
      padding: 0 0.75rem;   /* Padding ottimale per smartphone */
    }
  }
  
  /* SOTTOSEZIONE 6.2: Media query per schermi grandi (1200px+) */
  @media (min-width: 1200px) {
    /* Container del main content con layout grid */
    .main-content>.container {
      display: grid;              /* Layout a griglia */
      grid-template-columns: 1fr; /* Una colonna (layout verticale) */
      gap: 2rem;                  /* Spazio tra gli elementi */
    }
  }
  
/* ========================================
   COMPONENTI: NAVBAR, BOTTONI, MODALI, FORM, CARD, FOOTER
   Estratto da style.css per riorganizzazione sicura
   ======================================== */

/* ========================================
   SEZIONE 7: NAVBAR - GLASSMORPHISM
   ======================================== */
/* Barra di navigazione superiore con effetto vetro */
.navbar {
    /* SOTTOSEZIONE 7.1: Sfondo gradiente ciano */
    background: linear-gradient(135deg, rgba(0, 123, 138, 0.9) 0%, rgba(0, 123, 138, 0.7) 50%, rgba(0, 123, 138, 0.5) 100%);
    /* Gradiente ciano: da 90% opacità a 50% opacità */
    
    /* SOTTOSEZIONE 7.2: Effetti ottimizzati */
    /* backdrop-filter rimosso per migliorare performance */
    /* -webkit-backdrop-filter rimosso per migliorare performance */
    
    /* SOTTOSEZIONE 7.3: Spaziatura e bordi */
    padding: 9px 0;                               /* Padding verticale ridotto a 9px */
    box-shadow: 0 4px 12px 0 rgba(0, 123, 138, 0.4); /* Ombra ciano semplificata */
    border-bottom: 1px solid rgba(0, 123, 138, 0.3);   /* Bordo inferiore ciano */
    
    /* SOTTOSEZIONE 7.4: Posizionamento sticky */
    position: sticky;  /* Rimanere in cima durante lo scroll */
    top: 0;           /* Posizione in cima */
    z-index: 1000;    /* Sopra tutti gli altri elementi */
  }
  
  /* Ottimizzazione navbar per schermi piccoli */
  @media (max-width: 768px) {
    .navbar {
      padding: 0.6rem 0;                            /* Padding ridotto per mobile */
    }
  }
  
  @media (max-width: 390px) {
    .navbar {
      padding: 0.5rem 0;                            /* Padding ulteriormente ridotto */
    }
  }
  
  /* Effetto rifrazione della luce per navbar */
  .navbar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 60%;
    background: transparent; /* Gradiente rimosso per performance */
    pointer-events: none;
    z-index: 1;
  }
  
  /* SOTTOSEZIONE 7.5: Layout del contenuto navbar */
  .navbar-content {
    display: flex;                    /* Layout flexbox orizzontale */
    justify-content: space-between;   /* Logo a sinistra, menu a destra */
    align-items: center;              /* Allineamento verticale centrale */
    flex-wrap: nowrap;               /* Non andare a capo su schermi piccoli */
  }
  
  /* SOTTOSEZIONE 7.6: Brand/Logo della navbar */
  /* Link wrapper per logo cliccabile */
  .navbar-brand-link {
    text-decoration: none;
    color: inherit;
    cursor: pointer;
    display: inline-block;
  }
  
  /* Wrapper per effetto flip 3D */
  .navbar-logo-wrapper {
    position: relative;
    width: 50px;
    height: 50px;
    display: block;
    perspective: 1000px;
    transform-style: preserve-3d;
  }
  
  /* Logo default: stato iniziale frontale */
  .navbar-logo-default {
    transform: rotateY(0deg);
    backface-visibility: hidden;
  }
  
  /* Logo hover: inizia girato dietro */
  .navbar-logo-hover {
    transform: rotateY(180deg);
    backface-visibility: hidden;
  }
  
  /* Al hover: logo default ruota via */
  .navbar-brand-link:hover .navbar-logo-default {
    transform: rotateY(-180deg);
    opacity: 0;
  }
  
  /* Al hover: logo hover ruota e appare */
  .navbar-brand-link:hover .navbar-logo-hover {
    transform: rotateY(0deg);
    opacity: 1;
  }
  
  .navbar-brand {
    display: flex;        /* Layout flexbox per logo + titolo */
    align-items: center;  /* Allineamento verticale centrale */
    gap: 12px;           /* Spazio tra logo e titolo */
  }
  
  /* Logo TPL nella navbar */
  .navbar-logo {
    position: absolute;
    top: 0;
    left: 0;
    width: 50px;         /* Logo quadrato ridotto per navbar sottile */
    height: 50px;        /* Logo quadrato ridotto per navbar sottile */
    transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out, box-shadow 0.3s ease;
    border-radius: 12px; /* Angoli molto smussati per contorno arrotondato */
    border: 2px solid rgba(0, 123, 138, 0.7); /* Contorno ciano che avvolge l'immagine */
    object-fit: contain; /* Adatta l'immagine mantenendo proporzioni e contenuto visibile */
    box-shadow: 0 2px 8px rgba(0, 123, 138, 0.4); /* Ombra semplificata per profondità */
  }
  
  /* Logo default visibile di default */
  .navbar-logo-default {
    opacity: 1;
    z-index: 1;
  }
  
  /* Logo hover nascosto di default */
  .navbar-logo-hover {
    opacity: 0;
    z-index: 2;
  }
  
  /* Effetto rifrazione della luce per logo navbar */
  .navbar-logo::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.15) 0%,
      rgba(255, 255, 255, 0.08) 40%,
      transparent 70%,
      transparent 100%
    );
    border-radius: 12px 12px 6px 6px;
    pointer-events: none;
    z-index: 1;
  }
  
  /* Titolo TPL FVG nella navbar */
  .navbar-title {
    color: rgba(255, 255, 255, 1);                 /* Testo bianco pieno */
    font-size: 1.5rem;                              /* Dimensione font grande */
    font-weight: 700;                               /* Peso font bold */
    text-decoration: none;                          /* Nessuna sottolineatura */
    text-shadow: 0 2px 15px rgba(0, 0, 0, 0.6);    /* Ombra testo più forte per leggibilità */
    display: flex;                                 /* Layout flexbox orizzontale */
    align-items: center;                           /* Allineamento verticale centrale */
    gap: 0.5rem;                                   /* Spazio ridotto tra acronimo e testo */
  }
  
  .navbar-title .logo-acronym,
  .navbar-title .navbar-title-main {
    display: flex;                                 /* Layout flexbox per tpl/fvg */
    flex-direction: column;                        /* Disposizione verticale */
    font-family: 'Arial', sans-serif;             /* Font sans-serif spesso */
    font-weight: 700;                             /* Font molto audace */
    font-size: 1.4rem;                            /* Dimensione media aumentata di un altro punto */
    color: rgba(255, 255, 255, 1);                /* Testo bianco pieno */
    letter-spacing: 0.5px;                        /* Spaziatura tra lettere */
    line-height: 1;                               /* Altezza riga compatta */
    text-shadow: 0 2px 15px rgba(0, 0, 0, 0.6);   /* Ombra testo più forte */
  }
  
  .navbar-title .logo-text,
  .navbar-title .navbar-title-sub {
    display: flex;                                 /* Layout flexbox per trasporto/pubblico/locale */
    flex-direction: column;                        /* Disposizione verticale */
    font-family: 'Arial', sans-serif;             /* Font sans-serif leggero */
    font-weight: 300;                             /* Font leggero */
    font-size: 0.8rem;                            /* Dimensione piccola aumentata */
    color: rgba(255, 255, 255, 0.9);              /* Testo bianco più visibile */
    letter-spacing: 0.3px;                        /* Spaziatura tra lettere */
    line-height: 1;                               /* Altezza riga compatta */
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);   /* Ombra testo per leggibilità */
  }
  
  
  /* SOTTOSEZIONE 7.8: Navigazione navbar */
  .navbar-nav {
    display: flex;           /* Layout flexbox orizzontale */
    align-items: center;     /* Allineamento verticale centrale */
    gap: 1rem;              /* Spazio tra i link */
  }
  
  .nav-link {
    /* SOTTOSEZIONE 7.9.1: Stile base */
    color: rgba(255, 255, 255, 0.95);        /* Testo bianco con 95% opacità */
    text-decoration: none;                   /* Nessuna sottolineatura */
    font-weight: 500;                        /* Peso font medium */
    font-size: 1rem;                         /* Dimensione font standard */
    padding: 0.5rem 1rem;                    /* Padding interno */
    border-radius: 8px;                      /* Bordi arrotondati */
    transition: all 0.3s ease;               /* Transizione fluida */
    position: relative;                      /* Per posizionamento assoluto del ::before */
    white-space: nowrap;                     /* Testo su una riga */
    
    /* SOTTOSEZIONE 7.9.2: Stile minimale per stato normale */
    background: transparent;                 /* Nessun sfondo di default */
    border: none;                            /* Nessun bordo di default */
    box-shadow: none;                        /* Nessuna ombra di default */
  }
  
  /* Effetto rifrazione della luce per nav-link */
  .nav-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: transparent; /* Gradiente rimosso per performance */
    border-radius: 8px 8px 4px 4px;
    pointer-events: none;
    z-index: 1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .nav-link:hover {
    /* SOTTOSEZIONE 7.10.1: Sfondo ottimizzato */
    background: rgba(255, 255, 255, 0.1);      /* Sfondo bianco trasparente */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Bordo bianco trasparente */
    
    /* SOTTOSEZIONE 7.10.2: Testo e bordi */
    color: rgba(255, 255, 255, 1);             /* Testo bianco pieno */
    
    /* SOTTOSEZIONE 7.10.3: Ombra e trasformazioni */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Ombra leggera */
    transform: translateY(-1px);                /* Solleva leggermente */
  }
  
  /* Rifrazione visibile al hover */
  .nav-link:hover::before {
    opacity: 1;
  }
  
  .nav-link.active {
    /* SOTTOSEZIONE 7.11.1: Sfondo ottimizzato attivo */
    background: rgba(255, 255, 255, 0.4);      /* Sfondo bianco più opaco */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    
    /* SOTTOSEZIONE 7.11.2: Testo e bordi attivi */
    color: rgba(255, 255, 255, 1);             /* Testo bianco pieno */
    border-color: rgba(255, 255, 255, 0.6);    /* Bordo bianco più opaco */
    font-weight: 600;                          /* Peso font semi-bold */
    
    /* SOTTOSEZIONE 7.11.3: Ombra e trasformazioni attive */
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25); /* Ombra più profonda */
    transform: translateY(-2px);                /* Solleva di più */
  }
  
  /* SOTTOSEZIONE 7.11.4: Pulsante Impostazioni Desktop */
  .nav-settings-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1.2rem;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15));
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 10px;
    color: rgba(255, 255, 255, 0.95);
    font-weight: 500;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    margin-left: 0.5rem;
  }
  
  .nav-settings-btn:hover {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.35), rgba(255, 255, 255, 0.25));
    border-color: rgba(255, 255, 255, 0.6);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    transform: translateY(-2px);
  }
  
  .nav-settings-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  }
  
  .nav-settings-btn .settings-icon {
    font-size: 1.1rem;
    display: flex;
    align-items: center;
  }
  
  .nav-settings-btn .settings-text {
    font-size: 0.95rem;
  }
  
  /* Nascondi testo su schermi piccoli, mostra solo icona */
  @media (max-width: 1024px) {
    .nav-settings-btn .settings-text {
      display: none;
    }
    .nav-settings-btn {
      padding: 0.6rem;
    }
  }
  
  /* Nascondi completamente su mobile (dove c'è il menu hamburger) */
  @media (max-width: 768px) {
    .nav-settings-btn {
      display: none !important;
    }
  }
  
  /* Rifrazione visibile per stato attivo */
  .nav-link.active::before {
    opacity: 1;
  }
  
  /* SOTTOSEZIONE 7.12: Toggle dark mode */
  .dark-mode-toggle {
    background: transparent;                   /* Nessun sfondo di default */
    border: none;                             /* Nessun bordo di default */
    color: rgba(255, 255, 255, 0.95);        /* Testo bianco con 95% opacità */
    border-radius: 8px;                       /* Bordi arrotondati */
    padding: 0.5rem;                          /* Padding interno */
    cursor: pointer;                          /* Cursore pointer */
    transition: all 0.3s ease;               /* Transizione fluida */
    font-size: 1.2rem;                       /* Dimensione font grande */
    display: flex;                            /* Layout flexbox */
    align-items: center;                      /* Allineamento verticale centrale */
    justify-content: center;                  /* Allineamento orizzontale centrale */
    min-width: 40px;                         /* Larghezza minima */
    height: 40px;                            /* Altezza fissa */
    box-shadow: none;                        /* Nessuna ombra di default */
  }
  
  .dark-mode-toggle:hover {
    background: rgba(255, 255, 255, 0.1);      /* Sfondo bianco trasparente */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);             /* Testo bianco pieno */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Ombra leggera */
    transform: translateY(-1px);                /* Solleva leggermente */
  }
  
  /* SOTTOSEZIONE 7.13: Stili dark mode per navbar */
  .dark .dark-mode-toggle {
    background: transparent;                   /* Nessun sfondo di default */
    color: rgba(255, 255, 255, 1);            /* Testo bianco pieno (100% opaco) */
    border: none;                             /* Nessun bordo di default */
    box-shadow: none;                         /* Nessuna ombra di default */
  }
  
  .dark .dark-mode-toggle:hover {
    background: rgba(255, 255, 255, 0.1);     /* Sfondo bianco trasparente al hover */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);            /* Testo bianco pieno */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* Ombra leggera */
  }
  
  .dark .nav-link {
    background: transparent;                   /* Nessun sfondo di default */
    color: rgba(255, 255, 255, 1);            /* Testo bianco pieno (100% opaco) */
    border: none;                             /* Nessun bordo di default */
    box-shadow: none;                         /* Nessuna ombra di default */
  }
  
  .dark .nav-link:hover {
    background: rgba(255, 255, 255, 0.1);     /* Sfondo bianco trasparente al hover */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);            /* Testo bianco pieno */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* Ombra leggera */
  }
  
  /* SOTTOSEZIONE 7.14: Pulsante controllo animazione */
  .animation-toggle {
    background: transparent;                   /* Nessun sfondo di default */
    border: none;                             /* Nessun bordo di default */
    color: rgba(255, 255, 255, 0.95);        /* Testo bianco con 95% opacità */
    border-radius: 8px;                       /* Bordi arrotondati */
    padding: 0.5rem;                          /* Padding interno */
    cursor: pointer;                          /* Cursore pointer */
    transition: all 0.3s ease;               /* Transizione fluida */
    font-size: 1.1rem;                       /* Dimensione font */
    display: flex;                            /* Layout flexbox */
    align-items: center;                      /* Allineamento verticale centrale */
    justify-content: center;                  /* Allineamento orizzontale centrale */
    min-width: 40px;                         /* Larghezza minima */
    height: 40px;                            /* Altezza fissa */
    box-shadow: none;                        /* Nessuna ombra di default */
    margin-left: 0.5rem;                     /* Margine sinistro per separare dal dark mode */
  }
  
  .animation-toggle:hover {
    background: rgba(255, 255, 255, 0.1);      /* Sfondo bianco trasparente */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);             /* Testo bianco pieno */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Ombra leggera */
    transform: translateY(-1px);                /* Solleva leggermente */
  }
  
  /* Stato attivo - animazione abilitata */
  .animation-toggle.active {
    background: rgba(34, 197, 94, 0.3);        /* Sfondo verde più visibile */
    border: 2px solid #22c55e;                 /* Bordo verde più spesso e visibile */
    color: #ffffff;                            /* Testo bianco per contrasto */
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4); /* Ombra verde più marcata */
    font-weight: 600;                          /* Testo in grassetto */
  }
  
  .animation-toggle.active:hover {
    background: rgba(34, 197, 94, 0.4);        /* Sfondo verde più intenso */
    border: 2px solid #16a34a;                 /* Bordo verde più scuro */
    color: #ffffff;                            /* Testo bianco */
    box-shadow: 0 6px 16px rgba(34, 197, 94, 0.5); /* Ombra verde più intensa */
    transform: translateY(-2px);               /* Solleva di più */
  }
  
  /* Stili per modalità scura */
  .dark .animation-toggle {
    background: transparent;                   /* Nessun sfondo di default */
    color: rgba(255, 255, 255, 1);            /* Testo bianco pieno (100% opaco) */
    border: none;                             /* Nessun bordo di default */
    box-shadow: none;                         /* Nessuna ombra di default */
  }
  
  .dark .animation-toggle:hover {
    background: rgba(255, 255, 255, 0.1);     /* Sfondo bianco trasparente al hover */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);            /* Testo bianco pieno */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* Ombra leggera */
  }
  
  .dark .animation-toggle.active {
    background: rgba(34, 197, 94, 0.3);        /* Sfondo verde più visibile */
    border: 2px solid #22c55e;                 /* Bordo verde più spesso e visibile */
    color: #ffffff;                            /* Testo bianco per contrasto */
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4); /* Ombra verde più marcata */
    font-weight: 600;                          /* Testo in grassetto */
  }
  
  .dark .animation-toggle.active:hover {
    background: rgba(34, 197, 94, 0.4);        /* Sfondo verde più intenso */
    border: 2px solid #16a34a;                 /* Bordo verde più scuro */
    color: #ffffff;                            /* Testo bianco */
    box-shadow: 0 6px 16px rgba(34, 197, 94, 0.5); /* Ombra verde più intensa */
    transform: translateY(-2px);               /* Solleva di più */
  }
  
  .dark .nav-link.active {
    background: rgba(255, 255, 255, 0.2);     /* Sfondo bianco più opaco per stato attivo */
    border-color: rgba(255, 255, 255, 0.5);   /* Bordo bianco più opaco */
    color: rgba(255, 255, 255, 1);            /* Testo bianco pieno */
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5); /* Ombra scura più profonda */
  }
  
  .dark .nav-settings-btn {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }
  
  .dark .nav-settings-btn:hover {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15));
    border-color: rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  }

  /* SOTTOSEZIONE 7.15: Gruppo pulsanti dimensione testo */
  .font-size-group {
    display: flex;                            /* Layout flexbox */
    align-items: center;                      /* Allineamento verticale centrale */
    gap: 0.25rem;                            /* Spazio tra i pulsanti */
    margin-left: 0.5rem;                     /* Margine sinistro per separare */
    padding: 0.25rem;                        /* Padding interno */
    background: rgba(255, 255, 255, 0.05);   /* Sfondo leggermente trasparente */
    border-radius: 8px;                      /* Bordi arrotondati */
  }
  
  .font-size-btn {
    background: transparent;                   /* Nessun sfondo di default */
    border: 1px solid transparent;            /* Bordo trasparente di default */
    color: rgba(255, 255, 255, 0.8);         /* Testo bianco con 80% opacità */
    border-radius: 6px;                       /* Bordi arrotondati */
    padding: 0.4rem;                          /* Padding interno */
    cursor: pointer;                          /* Cursore pointer */
    transition: all 0.3s ease;               /* Transizione fluida */
    font-weight: 700;                        /* Peso font bold per la lettera A */
    display: flex;                            /* Layout flexbox */
    align-items: center;                      /* Allineamento verticale centrale */
    justify-content: center;                  /* Allineamento orizzontale centrale */
    min-width: 32px;                         /* Larghezza minima */
    height: 32px;                            /* Altezza fissa */
    box-shadow: none;                        /* Nessuna ombra di default */
  }
  
  /* Dimensioni diverse per ogni pulsante */
  #font-size-small span {
    font-size: 0.85rem;                      /* Piccolo */
  }
  
  #font-size-medium span {
    font-size: 1.05rem;                      /* Medio */
  }
  
  #font-size-large span {
    font-size: 1.25rem;                      /* Grande */
  }
  
  .font-size-btn:hover {
    background: rgba(255, 255, 255, 0.15);    /* Sfondo bianco trasparente */
    border-color: rgba(255, 255, 255, 0.3);  /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);           /* Testo bianco pieno */
    transform: translateY(-1px);              /* Solleva leggermente */
  }
  
  /* Stato attivo - pulsante selezionato */
  .font-size-btn.active {
    background: rgba(255, 255, 255, 0.25);    /* Sfondo bianco più opaco */
    border-color: rgba(255, 255, 255, 0.5);  /* Bordo bianco più opaco */
    color: rgba(255, 255, 255, 1);           /* Testo bianco pieno */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); /* Ombra leggera */
  }
  
  /* Stili per modalità scura */
  .dark .font-size-group {
    background: rgba(255, 255, 255, 0.03);   /* Sfondo leggermente trasparente */
  }
  
  .dark .font-size-btn {
    color: rgba(248, 250, 252, 0.8);        /* Testo chiaro */
  }
  
  .dark .font-size-btn:hover {
    background: rgba(255, 255, 255, 0.15);   /* Sfondo bianco trasparente al hover */
    border-color: rgba(255, 255, 255, 0.3); /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);          /* Testo bianco pieno */
  }
  
  .dark .font-size-btn.active {
    background: rgba(255, 255, 255, 0.25);   /* Sfondo bianco più opaco */
    border-color: rgba(255, 255, 255, 0.5); /* Bordo bianco più opaco */
    color: rgba(255, 255, 255, 1);          /* Testo bianco pieno */
  }
  
  /* ========================================
     SEZIONE 8: MAIN CONTENT - LAYOUT E CARD
     ======================================== */
  /* Contenitore principale dell'applicazione */
  .main-content {
    flex: 1;                                /* Occupa lo spazio rimanente */
    display: flex;                          /* Layout flexbox */
    flex-direction: column;                 /* Direzione verticale */
    align-items: center;                    /* Centra orizzontalmente */
    padding: 2rem 0;                        /* Padding verticale */
    position: relative;                     /* Per posizionamento assoluto */
    overflow: hidden;                       /* Nasconde overflow */
  }
  
  /* Card principale con glassmorphism */
  .main-card {
    /* SOTTOSEZIONE 8.1: Sfondo glassmorphism */
    background: var(--glass-bg);                     /* Sfondo trasparente */
    backdrop-filter: var(--backdrop-blur);          /* Sfocatura del background */
    -webkit-backdrop-filter: var(--backdrop-blur);  /* Supporto WebKit */
    
    /* SOTTOSEZIONE 8.2: Bordi e ombre */
    border: 1px solid var(--glass-border);           /* Bordo trasparente */
    border-radius: 16px;                             /* Bordi arrotondati */
    box-shadow: var(--glass-shadow);                 /* Ombra leggera */
    
    /* SOTTOSEZIONE 8.3: Spaziatura e dimensioni */
    padding: 2rem;                                   /* Padding interno */
    margin: 1.5rem auto;                             /* Margine verticale e centratura */
    max-width: 500px;                                /* Larghezza massima */
    width: 90%;                                      /* Larghezza responsiva */
    
    /* SOTTOSEZIONE 8.4: Layout e animazioni */
    display: flex;                                   /* Layout flexbox */
    flex-direction: column;                          /* Direzione verticale */
    gap: 0rem;                                       /* Spazio ridotto tra gli elementi */
    transition: all 0.3s ease;                       /* Transizione fluida */
    position: relative;                              /* Per posizionamento assoluto */
    z-index: 1;                                      /* Sopra il background */
  }
  
  /* Dark mode per card principale */
  .dark .main-card {
    background: var(--glass-bg-dark);                /* Sfondo scuro */
    border-color: var(--glass-border-dark);          /* Bordo scuro */
    box-shadow: var(--glass-shadow-dark);            /* Ombra scura */
  }
  
  /* SOTTOSEZIONE 8.5: Titolo della card */
  .card-title {
    text-align: center;              /* Testo centrato */
    margin-bottom: 1.5rem;           /* Margine inferiore */
  }
  
  .card-title h1 {
    font-size: 2rem;                 /* Dimensione font grande */
    font-weight: 800;                /* Peso font extra bold */
    color: var(--testo-principale);  /* Colore testo principale */
    text-shadow: 0 2px 10px rgba(255, 255, 255, 0.3);  /* Ombra testo leggera */
  }
  
  .card-title p {
    font-size: 1.05rem;              /* Dimensione font media */
    color: rgba(51, 65, 85, 0.8);    /* Colore grigio con 80% opacità */
    max-width: 90%;                  /* Larghezza massima 90% */
    margin: -1rem auto 0 auto;     /* Margine superiore negativo per spostare su */
    text-shadow: 0 1px 5px rgba(255, 255, 255, 0.2);  /* Ombra testo leggera */
  }
  
  /* ========================================
     SEZIONE 9: FORM ELEMENTI
     ======================================== */
  
  /* SOTTOSEZIONE 9.1: Elementi del form */
  .form-group {
    margin-bottom: 1.2rem;           /* Margine inferiore tra i gruppi */
  }

  /* SOTTOSEZIONE 9.1.1: Divisore tra select e route */
  .route-divider {
    width: 100%;                      /* Larghezza completa */
    height: 1px;                      /* Altezza sottile */
    background: rgba(15, 23, 42, 0.2); /* Colore uniforme e sottile */
    margin: 1.5rem 0;                 /* Margine verticale */
    border: none;                     /* Nessun bordo */
  }

  /* SOTTOSEZIONE 9.1.1.1: Divisore tra reset e price card */
  .reset-divider {
    width: 100%;                      /* Larghezza completa */
    height: 1px;                      /* Altezza sottile */
    background: rgba(15, 23, 42, 0.2); /* Colore uniforme e sottile */
    margin: -0.5rem 0 1rem 0;        /* Margine ridotto sopra, normale sotto */
    border: none;                     /* Nessun bordo */
  }

  /* SOTTOSEZIONE 9.1.2: Sezione route */
  .route-section {
    margin-top: 0;                    /* Rimosso margine superiore (ora gestito dal divisore) */
    display: flex;                    /* Layout flexbox */
    flex-direction: column;           /* Direzione verticale */
    gap: 1rem;                       /* Spazio tra i pulsanti route */
  }

  /* SOTTOSEZIONE 9.1.2: Etichetta route */
  .route-label {
    display: flex;                    /* Layout flexbox */
    flex-direction: column;           /* Direzione verticale */
    gap: 0.5rem;                     /* Spazio tra icona e pulsante */
  }

  /* SOTTOSEZIONE 9.1.3: Icona route */
  .route-icon {
    font-size: 0.9rem;                /* Dimensione font piccola */
    font-weight: 600;                 /* Peso font semi-bold */
    color: var(--testo-secondario);   /* Colore testo secondario */
    text-transform: uppercase;        /* Testo maiuscolo */
    letter-spacing: 0.5px;            /* Spaziatura lettere */
  }
  
  /* SOTTOSEZIONE 9.2: Selettori del form con glassmorphism */
  .form-select {
    width: 100%;                      /* Larghezza completa */
    padding: 0.6rem 0.8rem;           /* Padding interno */
    border: 1px solid var(--glass-border);  /* Bordo trasparente */
    border-radius: 12px;              /* Bordi arrotondati */
    background: var(--glass-bg);      /* Sfondo semi-opaco */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    color: rgba(15, 23, 42, 0.95);   /* Colore testo scuro */
    font-size: 1rem;                  /* Dimensione font standard */
    transition: all 0.3s ease;        /* Transizione fluida */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);  /* Ombra leggera per visibilità */
    font-weight: 500;                  /* Peso font medium */
    position: relative;               /* Per posizionamento assoluto del ::before */
    -webkit-appearance: none;         /* Supporto WebKit */
    -moz-appearance: none;            /* Supporto Firefox */
    appearance: none;                 /* Rimuove lo stile di default del browser (Standard) */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");  /* Freccia custom */
    background-repeat: no-repeat;     /* Non ripete l'immagine */
    background-position: right 0.75rem center;  /* Posizione freccia */
    background-size: 1rem;            /* Dimensione freccia */
    padding-right: 2.5rem;            /* Spazio per la freccia */
  }
  
  /* Effetto rifrazione della luce per form-select */
  .form-select::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: transparent; /* Gradiente rimosso per performance */
    border-radius: 12px 12px 6px 6px;
    pointer-events: none;
    z-index: 1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  /* Stile per le opzioni della select */
  .form-select option {
    background: rgba(30, 41, 59, 0.95);  /* Sfondo scuro per le opzioni */
    color: #ffffff;                    /* Testo bianco */
    padding: 0.5rem 0.8rem;            /* Padding per le opzioni */
  }
  
  /* Focus del selettore */
  .form-select:focus {
    outline: none;                     /* Rimuove il bordo di default */
    border-color: var(--turchese);     /* Bordo turchese al focus */
    box-shadow: 0 0 0 3px rgba(23, 183, 177, 0.1);  /* Ombra turchese */
  }
  
  /* Rifrazione visibile al focus */
  .form-select:focus::before {
    opacity: 1;
  }
  
  /* Selettore disabilitato */
  .form-select:disabled {
    background: rgba(233, 236, 239, 0.3);  /* Sfondo grigio trasparente */
    color: var(--grigio-scuro);          /* Testo grigio scuro */
    cursor: not-allowed;                   /* Cursore non consentito */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    background-image: none;              /* Rimuove la freccia dropdown */
  }
  
  /* Dark mode per form-select */
  .dark .form-select {
    background: var(--glass-bg-dark);      /* Sfondo glassmorphism scuro */
    color: rgba(248, 250, 252, 0.95);     /* Testo chiaro */
    border-color: var(--glass-border-dark);  /* Bordo glassmorphism scuro */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);  /* Ombra scura */
  }
  
  .dark .form-select:focus {
    border-color: var(--turchese);        /* Bordo turchese al focus */
    box-shadow: 0 0 0 3px rgba(23, 183, 177, 0.2);  /* Ombra turchese più forte */
  }
  
  .dark .form-select:disabled {
    background: rgba(30, 41, 59, 0.3);   /* Sfondo scuro trasparente */
    color: rgba(148, 163, 184, 0.7);    /* Testo grigio */
    background-image: none;              /* Rimuove la freccia dropdown */
  }

  /* Dark mode per divisore route */
  .dark .route-divider {
    background: rgba(255, 255, 255, 0.15); /* Colore uniforme bianco sottile per dark mode */
  }

  /* Dark mode per divisore reset */
  .dark .reset-divider {
    background: rgba(255, 255, 255, 0.15); /* Colore uniforme bianco sottile per dark mode */
  }

  /* Dark mode per sezione route */
  .dark .route-icon {
    color: rgba(248, 250, 252, 0.7);    /* Colore testo chiaro in dark mode */
  }
  
  /* ========================================
     SEZIONE 10: BOTTONI E PULSANTI
     ======================================== */
  /* SEZIONE 10.1: Container pulsante swap rimosso - ora posizionato assoluto */
  
  /* SEZIONE 10.2: Pulsante swap (inverti percorso) */
  .swap-btn {
    /* SEZIONE 10.2.1: Stile glassmorphism */
    background: var(--glass-bg);                    /* Sfondo trasparente */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border: 1px solid var(--glass-border);         /* Bordo trasparente */
    border-radius: 50px;                           /* Bordi completamente arrotondati */
    position: relative;                            /* Per posizionamento assoluto del ::before */
    
    /* SEZIONE 10.2.2: Dimensioni e layout */
    padding: 0.7rem 1rem;                          /* Padding interno */
    display: flex;                                 /* Layout flexbox */
    align-items: center;                          /* Allineamento verticale centrale */
    justify-content: center;                      /* Allineamento orizzontale centrale */
    min-width: 50px;                              /* Larghezza minima */
    
    /* SEZIONE 10.2.3: Interattività */
    cursor: pointer;                               /* Cursore pointer */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);  /* Transizione fluida */
    
    /* SEZIONE 10.2.4: Tipografia */
    font-size: 1.1rem;                            /* Dimensione font grande */
    color: var(--testo-principale);               /* Colore testo principale */
    font-weight: 600;                             /* Peso font semi-bold */
    
    /* SEZIONE 10.2.5: Ombra e profondità */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(255, 255, 255, 0.1);  /* Ombra glassmorphism */
    
    /* SEZIONE 10.2.6: Effetti hover */
    transform: translateY(0);                      /* Posizione iniziale */
  }
  
  /* Effetto hover per swap-btn */
  .swap-btn:hover {
    /* SEZIONE 10.2.7: Trasformazioni hover */
    transform: translateY(-2px);                   /* Solleva leggermente */
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(255, 255, 255, 0.2);  /* Ombra più profonda */
    
    /* SEZIONE 10.2.8: Sfondo hover */
    background: rgba(255, 255, 255, 0.4);         /* Sfondo bianco più opaco */
    border-color: rgba(255, 255, 255, 0.6);       /* Bordo bianco più opaco */
  }
  
  /* Effetto attivo per swap-btn */
  .swap-btn:active {
    transform: translateY(0);                      /* Ritorna alla posizione originale */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(255, 255, 255, 0.1);  /* Ombra ridotta */
  }
  
  /* SEZIONE 10.3: Pulsante calcola */
  .calculate-btn {
    background: var(--turchese);                   /* Sfondo turchese */
    color: white;                                 /* Testo bianco */
    border: none;                                 /* Nessun bordo */
    border-radius: 12px;                          /* Bordi arrotondati */
    padding: 0.8rem 2rem;                         /* Padding interno */
    font-size: 1.1rem;                            /* Dimensione font grande */
    font-weight: 600;                             /* Peso font semi-bold */
    cursor: pointer;                              /* Cursore pointer */
    transition: all 0.3s ease;                    /* Transizione fluida */
    box-shadow: 0 4px 12px rgba(0, 123, 138, 0.3);  /* Ombra turchese */
    width: 100%;                                  /* Larghezza completa */
    margin-top: 1rem;                             /* Margine superiore */
  }
  
  .calculate-btn:hover {
    background: var(--turchese-scuro);            /* Sfondo turchese scuro */
    transform: translateY(-2px);                  /* Solleva leggermente */
    box-shadow: 0 6px 20px rgba(0, 123, 138, 0.4);  /* Ombra più profonda */
  }
  
  .calculate-btn:active {
    transform: translateY(0);                     /* Ritorna alla posizione originale */
    box-shadow: 0 2px 8px rgba(0, 123, 138, 0.2);  /* Ombra ridotta */
  }
  
  .calculate-btn:disabled {
    background: var(--grigio-scuro);              /* Sfondo grigio scuro */
    cursor: not-allowed;                         /* Cursore non consentito */
    transform: none;                             /* Nessuna trasformazione */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);   /* Ombra leggera */
  }
  
  /* Ottimizzazione pulsanti calculate per schermi piccoli */
  @media (max-width: 768px) {
    .calculate-btn {
      padding: 0.7rem 1.5rem;                     /* Padding ridotto per mobile */
      font-size: 1rem;                            /* Font-size ridotto per mobile */
    }
  }
  
  @media (max-width: 390px) {
    .calculate-btn {
      padding: 0.65rem 1.25rem;                   /* Padding ulteriormente ridotto */
      font-size: 0.95rem;                         /* Font-size ridotto per schermi molto piccoli */
    }
  }
  
  /* SEZIONE 10.4: Pulsante dark mode (versione standalone) */
  .dark-mode-btn {
    background: var(--glass-bg);                  /* Sfondo glassmorphism */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border: 1px solid var(--glass-border);       /* Bordo glassmorphism */
    color: var(--testo-principale);              /* Colore testo principale */
    border-radius: 12px;                         /* Bordi arrotondati */
    padding: 0.6rem 1rem;                        /* Padding interno */
    font-size: 1rem;                             /* Dimensione font standard */
    font-weight: 500;                            /* Peso font medium */
    cursor: pointer;                             /* Cursore pointer */
    transition: all 0.3s ease;                   /* Transizione fluida */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);   /* Ombra leggera */
    display: flex;                               /* Layout flexbox */
    align-items: center;                         /* Allineamento verticale centrale */
    gap: 0.5rem;                                 /* Spazio tra icona e testo */
  }
  
  .dark-mode-btn:hover {
    background: rgba(255, 255, 255, 0.4);        /* Sfondo bianco più opaco */
    border-color: rgba(255, 255, 255, 0.6);      /* Bordo bianco più opaco */
    transform: translateY(-1px);                  /* Solleva leggermente */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  /* Ombra più profonda */
  }
  
  .dark-mode-btn.dark-mode-active {
    background: var(--turchese);                  /* Sfondo turchese quando attivo */
    color: white;                                /* Testo bianco quando attivo */
    border-color: var(--turchese-scuro);         /* Bordo turchese scuro */
    box-shadow: 0 4px 12px rgba(0, 123, 138, 0.3);  /* Ombra turchese */
  }
  
  /* SEZIONE 10.5: Stili dark mode per bottoni */
  .dark .dark-mode-btn {
    background: var(--glass-bg-dark);             /* Sfondo glassmorphism scuro */
    color: rgba(255, 255, 255, 1);               /* Testo bianco pieno (100% opaco) */
    border-color: var(--glass-border-dark);       /* Bordo glassmorphism scuro */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);    /* Ombra scura */
  }
  
  .dark .dark-mode-btn:hover {
    background: rgba(255, 255, 255, 0.1);        /* Sfondo bianco trasparente al hover */
    border-color: rgba(255, 255, 255, 0.3);      /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);               /* Testo bianco pieno */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);   /* Ombra scura più profonda */
  }
  
  .dark .dark-mode-btn.dark-mode-active {
    background: var(--turchese);                  /* Sfondo turchese quando attivo */
    color: white;                                /* Testo bianco quando attivo */
    border-color: var(--turchese-scuro);         /* Bordo turchese scuro */
    box-shadow: 0 4px 12px rgba(0, 123, 138, 0.4);  /* Ombra turchese più forte */
  }
  
  /* Ottimizzazione pulsanti dark-mode per schermi piccoli */
  @media (max-width: 768px) {
    .dark-mode-btn {
      padding: 0.55rem 0.85rem;                   /* Padding ridotto per mobile */
      font-size: 0.95rem;                         /* Font-size ridotto per mobile */
    }
  }
  
  @media (max-width: 390px) {
    .dark-mode-btn {
      padding: 0.5rem 0.75rem;                    /* Padding ulteriormente ridotto */
      font-size: 0.9rem;                          /* Font-size ridotto per schermi molto piccoli */
    }
  }
  
  /* SEZIONE 10.6: Stili dark mode per altri bottoni */
  .dark .swap-btn {
    background: var(--glass-bg-dark);             /* Sfondo glassmorphism scuro */
    color: rgba(248, 250, 252, 0.95);            /* Testo chiaro */
    border-color: var(--glass-border-dark);       /* Bordo glassmorphism scuro */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(255, 255, 255, 0.05);  /* Ombra scura */
  }
  
  .dark .swap-btn:hover {
    background: rgba(255, 255, 255, 0.1);        /* Sfondo bianco trasparente al hover */
    border-color: rgba(255, 255, 255, 0.3);      /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);               /* Testo bianco pieno */
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4), 0 4px 8px rgba(255, 255, 255, 0.1);  /* Ombra scura più profonda */
  }
  
  /* ========================================
     SEZIONE 11: FOOTER
     ======================================== */
  .footer {
    background: var(--glass-bg);                  /* Sfondo glassmorphism */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border-top: 1px solid var(--glass-border);   /* Bordo superiore glassmorphism */
    padding: 2rem 0;                             /* Padding verticale */
    text-align: center;                          /* Testo centrato */
    color: var(--testo-secondario);              /* Colore testo secondario */
    font-size: 0.9rem;                           /* Dimensione font piccola */
    line-height: 1.6;                            /* Altezza riga per leggibilità */
    margin-top: auto;                            /* Spinge il footer in basso */
  }
  
  .footer-links {
    display: flex;                               /* Layout flexbox orizzontale */
    justify-content: center;                     /* Centra i link */
    gap: 2rem;                                  /* Spazio tra i link */
    margin: 1rem 0;                             /* Margine verticale */
    flex-wrap: wrap;                            /* Va a capo su schermi piccoli */
  }
  
  .telegram-link {
    color: var(--testo-secondario);              /* Colore testo secondario */
    text-decoration: none;                      /* Nessuna sottolineatura */
    transition: color 0.3s ease;                /* Transizione colore */
    display: flex;                              /* Layout flexbox */
    align-items: center;                        /* Allineamento verticale centrale */
    gap: 0.5rem;                                /* Spazio tra icona e testo */
  }
  
  .telegram-link:hover {
    color: var(--turchese);                     /* Colore turchese al hover */
  }
  
  .telegram-icon {
    font-size: 1.2rem;                          /* Dimensione icona */
  }
  
  .update-info {
    margin-top: 1rem;                           /* Margine superiore */
    font-size: 0.8rem;                          /* Dimensione font molto piccola */
    color: var(--testo-secondario);             /* Colore testo secondario */
    opacity: 0.8;                               /* Opacità ridotta */
  }
  
  /* SOTTOSEZIONE 11.1: Stili dark mode per footer */
  .dark .footer {
    background: var(--glass-bg-dark);            /* Sfondo glassmorphism scuro */
    border-color: var(--glass-border-dark);      /* Bordo glassmorphism scuro */
    color: rgba(248, 250, 252, 0.8);            /* Testo chiaro con opacità */
  }
  
  .dark .telegram-link {
    color: rgba(248, 250, 252, 0.8);            /* Testo chiaro con opacità */
  }
  
  .dark .telegram-link:hover {
    color: var(--turchese);                     /* Colore turchese al hover */
  }
  
  .dark .update-info {
    color: rgba(248, 250, 252, 0.6);            /* Testo chiaro con opacità ridotta */
  }
  /* ========================================
   PAGINE: SEZIONI SPECIFICHE PER PAGINA
   Estratto da style.css per riorganizzazione sicura
   ======================================== */

/* ========================================
   SEZIONE 12: LAYOUT PAGINE
   ======================================== */
/* SOTTOSEZIONE 12.1: Layout specifico per pagine tratte e tariffe */
.fermate-page {
    display: flex;                /* Layout flexbox */
    flex-direction: column;       /* Direzione verticale */
    min-height: 100vh;           /* Altezza minima viewport */
  }
  
  /* Main content per pagine tratte */
  .fermate-page .main-content {
    min-height: 0;               /* Altezza minima (reset) */
    align-items: flex-start;     /* Allineamento in alto */
    padding: 1rem 0;             /* Padding verticale */
    flex: 1;                    /* Occupa spazio disponibile */
    overflow: visible;          /* Contenuto visibile */
  }
  
  /* SOTTOSEZIONE 12.2: Layout ottimizzato per pagina benvenuto */
  body:not(.fermate-page) .main-content {
    align-items: center;         /* Allineamento centrale */
    padding: 1rem 0;           /* Padding verticale */
  }
  
  /* Card principale per pagine non-tratte */
  body:not(.fermate-page) .main-card {
    max-width: 600px !important;  /* Larghezza massima 600px */
    padding: 2rem;               /* Padding interno */
    margin: 1rem auto !important; /* Margine automatico e centrato */
  }
  
  /* SOTTOSEZIONE 12.3: Media queries per layout pagine */
  @media (min-width: 768px) {
    /* Card per pagine non-tratte */
    body:not(.fermate-page) .main-card {
      max-width: 650px !important;     /* Larghezza massima 650px */
      padding: 2rem;                  /* Padding ancora maggiore */
    }
  }
  
  @media (min-width: 992px) {
    /* Card per pagine non-tratte */
    body:not(.fermate-page) .main-card {
      max-width: 700px !important;     /* Larghezza massima 700px */
      padding: 2.5rem;                /* Padding maggiore */
    }
  }
  
  @media (min-width: 1200px) {
    /* Card per pagine non-tratte */
    body:not(.fermate-page) .main-card {
      max-width: 750px !important;     /* Larghezza massima 750px */
      padding: 3rem;                  /* Padding massimo */
    }
  }
  
  @media (min-width: 1400px) {
    /* Card per pagine non-tratte */
    body:not(.fermate-page) .main-card {
      max-width: 850px !important;     /* Larghezza massima 850px */
      padding: 2.5rem;                /* Padding maggiore */
    }
  }
  
  /* SOTTOSEZIONE 12.4: Eccezione per pagine tratte/tariffe - layout verticale normale */
  .fermate-page .main-content>.container {
      display: block !important;        /* Layout a blocchi */
      align-items: normal;             /* Allineamento normale */
      overflow: visible;               /* Contenuto visibile */
    }
  
  /* ========================================
     SEZIONE 13: TITOLI PAGINE
     ======================================== */
  /* SOTTOSEZIONE 13.1: Titoli delle pagine */
  .page-title {
    text-align: center;              /* Testo centrato */
    font-size: 2rem;                 /* Dimensione font grande */
    font-weight: 700;                /* Peso font bold */
    color: var(--testo-principale);  /* Colore testo principale */
    margin: 1rem auto 1rem;         /* Margine verticale e centratura */
    padding: 0 1rem;                 /* Padding laterale */
    line-height: 1.2;                /* Altezza riga compatta */
    text-shadow: 0 2px 10px rgba(255, 255, 255, 0.3);  /* Ombra testo leggera */
  }
  
  /* SOTTOSEZIONE 13.2: Titolo specifico per pagine tratte/tariffe */
  .fermate-page .page-title {
    text-align: center !important;        /* Centratura forzata */
    margin: 1rem auto 1rem auto !important;  /* Margine centrato forzato */
    width: 100% !important;              /* Larghezza completa forzata */
    display: block !important;           /* Display a blocchi forzato */
    position: relative;                  /* Posizione relativa */
  }
  
  /* ========================================
     SEZIONE 14: CARD FERMATE
     ======================================== */
  /* SOTTOSEZIONE 14.1: Card delle tratte con glassmorphism */
  .fermate-card {
    /* SOTTOSEZIONE 14.1.1: Sfondo glassmorphism */
    background: var(--glass-bg);                     /* Sfondo trasparente */
    backdrop-filter: var(--backdrop-blur);          /* Sfocatura del background */
    -webkit-backdrop-filter: var(--backdrop-blur);  /* Supporto WebKit */
    
    /* SOTTOSEZIONE 14.1.2: Bordi e ombre */
    border: 1px solid var(--glass-border);          /* Bordo trasparente */
    border-radius: 20px;                            /* Bordi arrotondati */
    box-shadow: var(--glass-shadow);                /* Ombra glassmorphism */
    
    /* SOTTOSEZIONE 14.1.3: Spaziatura e dimensioni */
    padding: 2rem;                                  /* Padding interno */
    margin: 1rem 0;                                 /* Margine verticale */
    max-width: 100%;                                /* Larghezza massima */
    width: 100%;                                    /* Larghezza completa */
    
    /* SOTTOSEZIONE 14.1.4: Layout e posizionamento */
    position: relative;                             /* Posizione relativa */
    overflow: hidden;                               /* Nasconde overflow */
  }
  
  /* SOTTOSEZIONE 14.2: Titolo delle card tratte */
  .fermate-card h3 {
    /* SOTTOSEZIONE 14.2.1: Tipografia */
    color: rgba(15, 23, 42, 0.95);                   /* Colore scuro con 95% opacità */
    font-size: 1.75rem;                              /* Dimensione font grande */
    font-weight: 700;                                /* Peso font bold */
    text-shadow: 0 2px 10px rgba(255, 255, 255, 0.3);  /* Ombra testo bianca */
    
    /* SOTTOSEZIONE 14.2.2: Layout e spaziatura */
    margin: 0 0 1.5rem 0;                            /* Margine inferiore */
    padding: 0 0 1rem 0;                             /* Padding inferiore */
    text-align: center;                              /* Testo centrato */
    border-bottom: 2px solid rgba(0, 123, 138, 0.3); /* Bordo inferiore ciano */
    line-height: 1.3;                                /* Altezza riga compatta */
    
    /* SOTTOSEZIONE 14.2.3: Posizionamento */
    position: relative;                              /* Posizione relativa */
    display: flex;                                   /* Layout flexbox */
    align-items: center;                             /* Allineamento verticale centrale */
    justify-content: center;                         /* Allineamento orizzontale centrale */
    gap: 0.5rem;                                    /* Spazio tra icona e testo */
  }
  
  /* SOTTOSEZIONE 14.3: Icona emoji del bus nel titolo */
  .fermate-card h3::before {
    content: '🚌';                                  /* Emoji del bus */
    font-size: 1.5rem;                              /* Dimensione font grande */
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));  /* Ombra dell'icona */
  }
  
  /* SOTTOSEZIONE 14.4: Lista delle tratte */
  .fermate-list {
    /* SOTTOSEZIONE 14.4.1: Reset e layout */
    list-style: none;                               /* Rimuove stili lista di default */
    min-height: 200px;                              /* Altezza minima */
    
    /* SOTTOSEZIONE 14.4.2: Scroll e dimensioni */
    max-height: 400px;                              /* Altezza massima */
    overflow-y: auto;                               /* Scroll verticale */
    padding: 0;                                     /* Padding zero */
    margin: 0;                                      /* Margine zero */
  }
  
  /* SOTTOSEZIONE 14.5: Scrollbar personalizzata - Larghezza */
  .fermate-list::-webkit-scrollbar {
    width: 8px;                                     /* Larghezza scrollbar sottile */
  }
  
  /* SOTTOSEZIONE 14.6: Scrollbar personalizzata - Track (binario) */
  .fermate-list::-webkit-scrollbar-track {
    background: var(--grigio-chiaro);               /* Sfondo grigio chiaro per il binario */
    border-radius: 10px;                           /* Bordi arrotondati */
  }
  
  /* SOTTOSEZIONE 14.7: Scrollbar personalizzata - Thumb (cursore) */
  .fermate-list::-webkit-scrollbar-thumb {
    background: var(--turchese);                    /* Sfondo turchese per il cursore */
    border-radius: 10px;                           /* Bordi arrotondati */
  }
  
  /* SOTTOSEZIONE 14.8: Scrollbar personalizzata - Hover del thumb */
  .fermate-list::-webkit-scrollbar-thumb:hover {
    background: var(--turchese-scuro);              /* Sfondo turchese scuro al hover */
  }
  
  /* SOTTOSEZIONE 14.9: Elemento singolo della tratta */
  .fermate-item {
    /* SOTTOSEZIONE 14.9.1: Spaziatura e dimensioni */
    padding: 1.2rem 1.5rem 1.2rem 2rem;              /* Padding interno con più spazio a sinistra */
    margin-bottom: 0.75rem;                          /* Margine inferiore */
    
    /* SOTTOSEZIONE 14.9.2: Sfondo glassmorphism */
    background: rgba(255, 255, 255, 0.3);            /* Sfondo bianco trasparente */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    
    /* SOTTOSEZIONE 14.9.3: Bordi e ombre */
    border: 1px solid rgba(255, 255, 255, 0.4);      /* Bordo bianco trasparente */
    border-radius: 12px;                             /* Bordi arrotondati */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);       /* Ombra leggera */
    
    /* SOTTOSEZIONE 14.9.4: Layout e posizionamento */
    display: flex;                                   /* Layout flexbox */
    align-items: center;                             /* Allineamento verticale centrale */
    cursor: pointer;                                 /* Cursore pointer */
    transition: all 0.3s ease;                      /* Transizione fluida */
    position: relative;                              /* Posizione relativa */
    
    /* SOTTOSEZIONE 14.9.5: Tipografia */
    color: var(--testo-principale);                  /* Colore testo principale */
    font-size: 1rem;                                /* Dimensione font standard */
    font-weight: 500;                                /* Peso font medium */
    line-height: 1.4;                                /* Altezza riga per leggibilità */
  }
  
  /* SOTTOSEZIONE 14.10: Icona emoji della fermata */
  .fermate-icon {
    font-size: 1.2rem;                              /* Dimensione font grande */
    transition: transform 0.3s ease;                /* Transizione della trasformazione */
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));  /* Ombra dell'icona */
    margin-right: 0.5rem;                           /* Spazio tra icona e numero */
    margin-left: 0.5rem;                            /* Spazio a sinistra per spostare l'icona */
    display: inline-block;                          /* Layout inline per controllo margini */
  }
  
  /* SOTTOSEZIONE 14.11: Animazione hover dell'icona */
  .fermate-item:hover .fermate-icon {
    transform: scale(1.3) rotate(10deg);            /* Ingrandisce e ruota l'icona al hover */
    color: inherit;                                  /* Mantiene il colore originale dell'icona */
    text-shadow: none;                              /* Nessun contorno per l'icona */
  }
  
  /* SOTTOSEZIONE 14.12: Effetto hover dell'elemento tratta */
  .fermate-item:hover {
    /* SOTTOSEZIONE 14.12.1: Sfondo hover */
    /* background: rgba(23, 183, 177, 0.4);             /* Sfondo turchese trasparente RIMOSSO */
    background: rgba(248, 250, 252, 0.4);             /* Sfondo grigio chiaro elegante */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    
    /* SOTTOSEZIONE 14.12.2: Bordi e ombre hover */
    border-color: rgba(255, 255, 255, 0.6);          /* Bordo bianco più opaco */
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);      /* Ombra più profonda */
    
    /* SOTTOSEZIONE 14.12.3: Trasformazioni hover */
    transform: translateY(-2px);                      /* Solleva leggermente */
  }
  
  /* SOTTOSEZIONE 14.13: Effetto attivo dell'elemento tratta */
  .fermate-item:active {
    transform: translateY(0);                         /* Ritorna alla posizione originale */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);       /* Ombra ridotta */
  }
  
  /* SOTTOSEZIONE 14.14: Animazioni di entrata per elementi tratte */
  .fermate-item:nth-child(1) { animation-delay: 0.05s; }  /* Primo elemento */
  .fermate-item:nth-child(2) { animation-delay: 0.1s; }   /* Secondo elemento */
  .fermate-item:nth-child(3) { animation-delay: 0.15s; }  /* Terzo elemento */
  .fermate-item:nth-child(4) { animation-delay: 0.2s; }   /* Quarto elemento */
  .fermate-item:nth-child(5) { animation-delay: 0.25s; }  /* Quinto elemento */
  .fermate-item:nth-child(6) { animation-delay: 0.3s; }   /* Sesto elemento */
  .fermate-item:nth-child(7) { animation-delay: 0.35s; }  /* Settimo elemento */
  .fermate-item:nth-child(8) { animation-delay: 0.4s; }   /* Ottavo elemento */
  
  /* ========================================
     SEZIONE 15: DARK MODE PAGINE
     ======================================== */
  /* SOTTOSEZIONE 15.1: Tratte e tariffe in dark mode - Glassmorphism */
  .dark .fermate-card {
    background: rgba(30, 41, 59, 0.5);      /* Sfondo scuro trasparente */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border-color: rgba(148, 163, 184, 0.2); /* Bordo grigio chiaro trasparente */
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);  /* Ombra ultra leggera in dark mode */
  }
  
  /* SOTTOSEZIONE 15.2: Titoli delle card tratte in dark mode */
  .dark .fermate-card h3 {
    color: rgba(255, 255, 255, 0.95);      /* Testo bianco con 95% opacità */
    border-bottom-color: rgba(255, 255, 255, 0.6);  /* Bordo inferiore bianco più marcato */
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.7);     /* Ombra testo molto forte */
  }
  
  /* SOTTOSEZIONE 15.3: Elemento tratte in dark mode */
  .dark .fermate-item {
    background: rgba(30, 41, 59, 0.6);      /* Sfondo scuro trasparente */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border-color: rgba(148, 163, 184, 0.3); /* Bordo grigio chiaro trasparente */
    color: rgba(248, 250, 252, 0.95);      /* Testo chiaro con 95% opacità */
  }
  
  /* SOTTOSEZIONE 15.4: Effetto hover elemento tratte in dark mode */
  .dark .fermate-item:hover {
    /* background: rgba(23, 183, 177, 0.4);    /* Sfondo turchese trasparente al hover RIMOSSO */
    background: rgba(255, 255, 255, 0.1);    /* Sfondo bianco trasparente al hover */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    color: #ffffff;                         /* Testo bianco al hover */
    border-color: rgba(255, 255, 255, 0.4); /* Bordo bianco più opaco */
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);  /* Ombra scura più profonda */
  }
  
  /* SOTTOSEZIONE 15.5: Scrollbar in dark mode */
  .dark .fermate-list::-webkit-scrollbar-track {
    background: rgba(15, 23, 42, 0.3);      /* Sfondo scuro trasparente per la track */
  }
  
  .dark .fermate-list::-webkit-scrollbar-thumb {
    background: rgba(23, 183, 177, 0.6);    /* Sfondo turchese trasparente per il thumb */
  }
  
  /* SOTTOSEZIONE 15.10: Barra di ricerca in dark mode */
  .dark .search-input {
    background: var(--glass-bg-dark);        /* Sfondo glassmorphism scuro */
    color: rgba(248, 250, 252, 0.95);       /* Testo chiaro */
    border-color: var(--glass-border-dark);  /* Bordo glassmorphism scuro */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);  /* Ombra scura */
  }
  
  .dark .search-input::placeholder {
    color: rgba(148, 163, 184, 0.7);        /* Placeholder grigio chiaro */
  }
  
  .dark .search-icon {
    color: rgba(148, 163, 184, 0.7);        /* Icona grigio chiaro */
  }

  /* ========================================
   MODALI: MODAL, OVERLAY, MOBILE MENU
   Estratto da style.css per riorganizzazione sicura
   ======================================== */

/* ========================================
   SEZIONE 16: MODAL CACHE
   ======================================== */
/* SOTTOSEZIONE 16.1: Modal overlay */
.cache-modal {
    display: none;                              /* Nascosto di default */
    position: fixed;                            /* Posizione fissa */
    top: 0;                                     /* Inizio della pagina */
    left: 0;                                    /* Inizio della pagina */
    width: 100%;                                /* Larghezza completa */
    height: 100%;                               /* Altezza completa */
    background: rgba(0, 0, 0, 0.75);            /* Sfondo scuro più opaco (75%) */
    z-index: 10000;                             /* Sopra tutti gli elementi */
  }
  
  /* SOTTOSEZIONE 16.2: Modal content */
  .cache-modal-content {
    position: absolute;                          /* Posizione assoluta */
    top: 50%;                                   /* Centrato verticalmente */
    left: 50%;                                  /* Centrato orizzontalmente */
    transform: translate(-50%, -50%);           /* Centrato perfetto */
    background: #ffffff;                        /* Sfondo bianco puro */
    border-radius: 12px;                        /* Bordi arrotondati */
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5); /* Ombra più profonda */
    width: 90%;                                 /* Larghezza 90% */
    max-width: 500px;                           /* Larghezza massima */
    overflow: hidden;                           /* Nasconde overflow */
    animation: modalSlideIn 0.3s ease-out;      /* Animazione di entrata */
  }
  
  @keyframes modalSlideIn {
    from {
      opacity: 0;
      transform: translate(-50%, -60%);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -50%);
    }
  }
  
  /* SOTTOSEZIONE 16.3: Header modal */
  .cache-modal-header {
    background: var(--turchese);                 /* Sfondo turchese */
    color: white;                               /* Testo bianco */
    padding: 1.5rem;                            /* Padding interno */
    text-align: center;                         /* Testo centrato */
  }
  
  .cache-modal-header h3 {
    margin: 0;                                  /* Nessun margine */
    font-size: 1.2rem;                          /* Dimensione font */
    font-weight: 600;                           /* Peso font */
  }
  
  /* SOTTOSEZIONE 16.4: Body modal */
  .cache-modal-body {
    padding: 2rem;                              /* Padding interno */
    text-align: center;                         /* Testo centrato */
  }
  
  .cache-modal-body p {
    margin: 0 0 1rem 0;                         /* Margine inferiore */
    color: var(--testo-principale);             /* Colore testo */
    line-height: 1.5;                           /* Altezza riga */
  }
  
  /* Stili per elementi kbd (tasti) */
  .cache-modal-body kbd {
    background: #f1f5f9;                        /* Sfondo grigio chiaro */
    border: 1px solid #cbd5e1;                 /* Bordo grigio */
    border-radius: 4px;                         /* Bordi arrotondati */
    padding: 0.2rem 0.4rem;                     /* Padding interno */
    font-family: 'Courier New', monospace;      /* Font monospace */
    font-size: 0.85em;                          /* Font leggermente più piccolo */
    color: #475569;                             /* Colore testo */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);  /* Ombra leggera */
  }
  
  /* Stili per liste ordinate */
  .cache-modal-body ol {
    text-align: left;                           /* Allineamento a sinistra */
    margin: 0.5rem 0;                           /* Margine verticale */
    padding-left: 1.5rem;                       /* Padding sinistro */
  }
  
  .cache-modal-body li {
    margin: 0.5rem 0;                           /* Margine tra elementi */
    color: var(--testo-principale);             /* Colore testo */
  }
  
  .cache-modal-warning {
    color: #dc2626;                             /* Colore rosso per avviso */
    font-weight: 500;                           /* Peso font medio */
    font-size: 0.9rem;                          /* Font più piccolo */
  }
  
  /* SOTTOSEZIONE 16.5: Footer modal */
  .cache-modal-footer {
    display: flex;                              /* Layout flexbox */
    gap: 1rem;                                  /* Spazio tra pulsanti */
    padding: 0 2rem 2rem 2rem;                 /* Padding interno */
  }
  
  /* SOTTOSEZIONE 16.6: Pulsanti modal */
  .cache-modal-btn {
    flex: 1;                                    /* Larghezza uguale */
    padding: 0.75rem 1.5rem;                    /* Padding interno */
    border: none;                               /* Nessun bordo */
    border-radius: 8px;                         /* Bordi arrotondati */
    font-size: 1rem;                            /* Dimensione font */
    font-weight: 500;                           /* Peso font */
    cursor: pointer;                            /* Cursore pointer */
    transition: all 0.3s ease;                  /* Transizione fluida */
  }
  
  .cache-modal-cancel {
    background: #f3f4f6;                        /* Sfondo grigio chiaro */
    color: var(--testo-principale);             /* Colore testo */
  }
  
  .cache-modal-cancel:hover {
    background: #e5e7eb;                        /* Sfondo grigio più scuro */
  }
  
  .cache-modal-confirm {
    background: #dc2626;                        /* Sfondo rosso */
    color: white;                               /* Testo bianco */
  }
  
  .cache-modal-confirm:hover {
    background: #b91c1c;                        /* Sfondo rosso più scuro */
  }
  
  /* SOTTOSEZIONE 16.7: Modalità scura per modal */
  .dark .cache-modal-content {
    background: rgba(30, 41, 59, 0.98);         /* Sfondo scuro quasi opaco (98%) */
    border: 1px solid rgba(148, 163, 184, 0.2); /* Bordo sottile per definizione */
  }
  
  .dark .cache-modal-body p {
    color: var(--testo-principale);             /* Colore testo scuro */
  }
  
  /* Stili per modalità scura */
  .dark .cache-modal-body kbd {
    background: #374151;                        /* Sfondo grigio scuro */
    border: 1px solid #4b5563;                 /* Bordo grigio scuro */
    color: #d1d5db;                            /* Testo chiaro */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); /* Ombra più scura */
  }
  
  .dark .cache-modal-body li {
    color: var(--testo-principale);             /* Colore testo scuro */
  }
  
  .dark .cache-modal-cancel {
    background: #374151;                        /* Sfondo grigio scuro */
    color: var(--testo-principale);             /* Colore testo scuro */
  }
  
  .dark .cache-modal-cancel:hover {
    background: #4b5563;                        /* Sfondo grigio più scuro */
  }
  
  /* SOTTOSEZIONE 16.8: Modal mobile */
  @media (max-width: 480px) {
    .cache-modal-content {
      width: 95%;                               /* Larghezza quasi completa */
      max-width: none;                          /* Nessuna larghezza massima */
      max-height: 90vh;                         /* Altezza massima 90% viewport */
      overflow-y: auto;                         /* Scroll verticale se necessario */
    }
    
    .cache-modal-header {
      padding: 1rem;                            /* Padding ridotto */
    }
    
    .cache-modal-header h3 {
      font-size: 1.1rem;                        /* Font più piccolo */
    }
    
    .cache-modal-body {
      padding: 1rem;                            /* Padding ridotto */
    }
    
    .cache-modal-body p {
      font-size: 0.95rem;                       /* Font leggermente più piccolo */
    }
    
    .cache-modal-footer {
      padding: 1rem;                            /* Padding ridotto */
      flex-direction: column;                   /* Layout verticale */
      gap: 0.75rem;                             /* Spazio ridotto tra pulsanti */
    }
    
    .cache-modal-btn {
      padding: 0.875rem;                        /* Padding ottimizzato */
      font-size: 0.95rem;                       /* Font leggermente più piccolo */
    }
  }
  
  /* SOTTOSEZIONE 16.9: Modal per schermi molto piccoli */
  @media (max-width: 360px) {
    .cache-modal-content {
      width: 98%;                               /* Larghezza quasi totale */
    }
    
    .cache-modal-header,
    .cache-modal-body,
    .cache-modal-footer {
      padding: 0.75rem;                         /* Padding ancora più ridotto */
    }
    
    .cache-modal-body p {
      font-size: 0.9rem;                        /* Font ancora più piccolo */
    }
    
    .cache-modal-btn {
      padding: 0.75rem;                         /* Padding ridotto */
      font-size: 0.9rem;                        /* Font più piccolo */
    }
  }
  
  /* ========================================
     SEZIONE 17: MOBILE MENU
     ======================================== */
  /* SOTTOSEZIONE 17.1: Hamburger toggle button - visibile solo su mobile */
  .hamburger-toggle {
    display: none; /* Nascosto su desktop */
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 4px;
  }
  
  .hamburger-icon {
    display: block;
    width: 28px;
    height: 2px;
    background: var(--bianco);
    position: relative;
    transition: all 0.3s ease;
  }
  
  .hamburger-icon::before,
  .hamburger-icon::after {
    content: '';
    display: block;
    width: 28px;
    height: 2px;
    background: var(--bianco);
    position: absolute;
    transition: all 0.3s ease;
  }
  
  .hamburger-icon::before {
    top: -8px;
  }
  
  .hamburger-icon::after {
    top: 8px;
  }
  
  /* Animazione hamburger quando menu aperto */
  .hamburger-toggle.active .hamburger-icon {
    background: transparent;
  }
  
  .hamburger-toggle.active .hamburger-icon::before {
    top: 0;
    transform: rotate(45deg);
  }
  
  .hamburger-toggle.active .hamburger-icon::after {
    top: 0;
    transform: rotate(-45deg);
  }
  
  /* SOTTOSEZIONE 17.2: Overlay scuro dietro il menu */
  .mobile-menu-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .mobile-menu-overlay.active {
    display: block;
    opacity: 1;
  }
  
  /* SOTTOSEZIONE 17.3: Menu mobile drawer */
  .mobile-menu {
    position: fixed;
    top: 0;
    right: -100%;
    width: 240px;
    height: 100vh;
    background: var(--glass-bg);
    border-left: 1px solid var(--glass-border);
    box-shadow: -8px 0 32px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    transition: right 0.3s ease;
    overflow-y: auto;
  }
  
  .mobile-menu.active {
    right: 0;
  }
  
  /* SOTTOSEZIONE 17.4: Header del menu mobile */
  .mobile-menu-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px;
    border-bottom: 1px solid var(--glass-border);
    background: rgba(0, 123, 138, 0.1);
  }
  
  .mobile-menu-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--testo-principale);
  }
  
  .mobile-menu-close {
    background: none;
    border: none;
    font-size: 2rem;
    line-height: 1;
    color: var(--testo-principale);
    cursor: pointer;
    padding: 8px;
    border-radius: 4px;
    transition: background 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
  }
  
  .mobile-menu-close:hover {
    background: rgba(0, 0, 0, 0.1);
  }
  
  /* SOTTOSEZIONE 17.5: Navigazione menu mobile */
  .mobile-menu-nav {
    padding: 12px 0;
  }
  
  .mobile-nav-link,
  .mobile-nav-button {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    color: var(--testo-principale);
    text-decoration: none;
    font-size: 1rem;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    background: none;
    width: 100%;
    cursor: pointer;
    text-align: left;
    position: relative;
    border-radius: 8px;
  }
  
  /* Padding extra per pulsanti con badge ON/OFF */
  .mobile-toggle-with-badge {
    padding-right: 60px;
  }
  
  .mobile-nav-link:hover,
  .mobile-nav-button:hover {
    background: rgba(0, 123, 138, 0.1);
    color: var(--turchese);
    transform: translateX(4px);
  }
  
  /* Stato attivo per pulsante animazione mobile */
  .mobile-toggle-with-badge.active {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    font-weight: 600;
    border-left: 4px solid #22c55e;
    padding-left: 16px;
    padding-right: 60px;
  }
  
  .mobile-toggle-with-badge.active:hover {
    background: rgba(34, 197, 94, 0.25);
    color: #16a34a;
    transform: translateX(6px);
  }
  
  /* Indicatore ON/OFF per animazione */
  .mobile-toggle-with-badge.active::after {
    content: 'ON';
    position: absolute;
    right: 20px;
    background: #22c55e;
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 12px;
    animation: pulse-active 2s ease-in-out infinite;
  }
  
  .mobile-toggle-with-badge:not(.active)::after {
    content: 'OFF';
    position: absolute;
    right: 20px;
    background: rgba(148, 163, 184, 0.3);
    color: rgba(71, 85, 105, 0.8);
    font-size: 0.7rem;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 12px;
  }
  
  /* Animazione pulse per stato attivo */
  @keyframes pulse-active {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
    }
    50% {
      box-shadow: 0 0 0 6px rgba(34, 197, 94, 0);
    }
  }
  
  /* Animazione click */
  .mobile-nav-button:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  .mobile-nav-icon {
    font-size: 1.2rem;
    width: 24px;
    text-align: center;
    transition: transform 0.3s ease;
  }
  
  /* Icona animata quando pulsante animazione è attivo */
  .mobile-toggle-with-badge.active .mobile-nav-icon {
    animation: rotate-icon 3s linear infinite;
  }
  
  /* Animazione rotazione icona */
  @keyframes rotate-icon {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
  
  .mobile-menu-divider {
    height: 1px;
    background: var(--glass-border);
    margin: 12px 20px;
  }
  
  /* SOTTOSEZIONE 17.5.1: Sezione dimensione testo menu mobile */
  .mobile-font-size-section {
    padding: 12px 20px;
  }
  
  .mobile-section-title {
    display: block;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--testo-secondario);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
  }
  
  .mobile-font-size-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
  }
  
  .mobile-font-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 12px 8px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.75rem;
    color: var(--testo-principale);
  }
  
  .font-btn-letter {
    font-weight: 700;
  }
  
  /* Dimensioni diverse per ogni pulsante mobile */
  #mobile-font-size-small .font-btn-letter {
    font-size: 0.9rem;
  }
  
  #mobile-font-size-medium .font-btn-letter {
    font-size: 1.1rem;
  }
  
  #mobile-font-size-large .font-btn-letter {
    font-size: 1.3rem;
  }
  
  .mobile-font-btn:hover {
    background: rgba(0, 123, 138, 0.1);
    border-color: var(--turchese);
    color: var(--turchese);
  }
  
  .mobile-font-btn.active {
    background: rgba(0, 123, 138, 0.15);
    border-color: var(--turchese);
    color: var(--turchese);
    box-shadow: 0 2px 8px rgba(0, 123, 138, 0.2);
  }
  
  .font-btn-label {
    font-size: 0.7rem;
    font-weight: 500;
  }
  
  /* SOTTOSEZIONE 17.6: Media query - mostra hamburger su mobile, nascondi navbar-nav */
  @media (max-width: 768px) {
    .hamburger-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .navbar-nav {
      display: none; /* Nasconde menu desktop su mobile */
    }
  }
  
  /* SOTTOSEZIONE 17.7: Dark mode per menu mobile */
  .dark .mobile-menu {
    background: rgba(30, 41, 59, 0.95);
    border-left-color: rgba(148, 163, 184, 0.2);
    box-shadow: -8px 0 32px rgba(0, 0, 0, 0.7);
  }
  
  .dark .mobile-menu-header {
    border-bottom-color: var(--glass-border-dark);
    background: rgba(23, 183, 177, 0.15);
  }
  
  .dark .mobile-menu-close:hover {
    background: rgba(255, 255, 255, 0.1);
  }
  
  .dark .mobile-nav-link:hover,
  .dark .mobile-nav-button:hover {
    background: rgba(23, 183, 177, 0.2);
  }
  
  /* Stato attivo per pulsante animazione mobile - dark mode */
  .dark .mobile-toggle-with-badge.active {
    background: rgba(34, 197, 94, 0.2);
    color: #86efac;
    font-weight: 600;
    border-left: 4px solid #22c55e;
  }
  
  .dark .mobile-toggle-with-badge.active:hover {
    background: rgba(34, 197, 94, 0.3);
    color: #bbf7d0;
  }
  
  /* Indicatore ON/OFF per animazione - dark mode */
  .dark .mobile-toggle-with-badge.active::after {
    background: #22c55e;
    color: white;
    box-shadow: 0 0 8px rgba(34, 197, 94, 0.5);
  }
  
  .dark .mobile-toggle-with-badge:not(.active)::after {
    background: rgba(71, 85, 105, 0.4);
    color: rgba(148, 163, 184, 0.9);
  }
  
  .dark .mobile-menu-divider {
    background: var(--glass-border-dark);
  }
  
  .dark .mobile-section-title {
    color: rgba(248, 250, 252, 0.7);
  }
  
  .dark .mobile-font-btn {
    background: var(--glass-bg-dark);
    border-color: var(--glass-border-dark);
    color: var(--testo-scuro);
  }
  
  .dark .mobile-font-btn:hover {
    background: rgba(23, 183, 177, 0.15);
    border-color: var(--turchese);
    color: var(--turchese);
  }
  
  .dark .mobile-font-btn.active {
    background: rgba(23, 183, 177, 0.2);
    border-color: var(--turchese);
    color: var(--turchese);
  }
  
  /* SOTTOSEZIONE 17.7.1: Stili per pagina benvenuto */
  .benvenuto-font-size-section {
    margin-top: 1rem;
  }
  
  .benvenuto-font-size-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .benvenuto-font-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    padding: 0.6rem 0.5rem !important;
  }
  
  .benvenuto-font-btn.active {
    background: var(--turchese) !important;
    color: white !important;
    border-color: var(--turchese-scuro) !important;
    box-shadow: 0 4px 12px rgba(0, 123, 138, 0.3) !important;
  }
  
  /* ========================================
     SEZIONE 18: MODAL FERMATE
     ======================================== */
  /* SOTTOSEZIONE 18.1: Modal fermate */
  .fermate-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    display: none;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .fermate-modal.show {
    display: flex;
    opacity: 1;
  }
  
  .fermate-modal-content {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    box-shadow: var(--glass-shadow);
    width: 100%;
    max-width: 500px;
    max-height: 80vh;
    margin: 20px;
    display: flex;
    flex-direction: column;
    transform: scale(0.9);
    transition: transform 0.3s ease;
  }
  
  .fermate-modal.show .fermate-modal-content {
    transform: scale(1);
  }
  
  .fermate-modal-header {
    /* Stile navbar con gradient turchese */
    background: linear-gradient(135deg, 
      rgba(0, 123, 138, 0.9) 0%, 
      rgba(0, 123, 138, 0.7) 50%, 
      rgba(0, 123, 138, 0.5) 100%);
    border-bottom: 1px solid rgba(0, 123, 138, 0.3);
    box-shadow: 0 4px 12px 0 rgba(0, 123, 138, 0.4);
    border-radius: 16px 16px 0 0;
    padding: 10px 20px;
    min-height: 52px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
  }

  /* SOTTOSEZIONE 18.1.1: Azioni modal fermate */
  .fermate-modal-actions {
    display: flex;                    /* Layout flexbox */
    align-items: center;              /* Allineamento verticale */
    gap: 0.75rem;                    /* Spazio tra pulsanti */
  }

  /* SOTTOSEZIONE 18.1.2: Pulsante geolocalizzazione modal */
  .fermate-location-btn {
    display: none;                    /* Nascosto inizialmente */
    align-items: center;              /* Allineamento verticale */
    gap: 0.5rem;                     /* Spazio tra icona e testo */
    padding: 0.5rem 0.75rem;         /* Padding interno */
    background: var(--turchese);      /* Sfondo turchese */
    color: white;                     /* Testo bianco */
    border: none;                     /* Nessun bordo */
    border-radius: 8px;               /* Bordi arrotondati */
    cursor: pointer;                  /* Cursore pointer */
    font-size: 0.9rem;                /* Dimensione font */
    font-weight: 500;                 /* Peso font */
    transition: all 0.3s ease;        /* Transizione fluida */
    box-shadow: 0 2px 6px rgba(0, 123, 138, 0.3);  /* Ombra */
  }

  .fermate-location-btn:hover {
    background: var(--turchese-scuro);  /* Sfondo più scuro al hover */
    transform: translateY(-1px);        /* Leggero sollevamento */
    box-shadow: 0 4px 10px rgba(0, 123, 138, 0.4);  /* Ombra più pronunciata */
  }

  .fermate-location-btn:disabled {
    opacity: 0.6;                     /* Opacità ridotta quando disabilitato */
    cursor: not-allowed;              /* Cursore non consentito */
    transform: none;                  /* Nessuna trasformazione */
  }
  
  .fermate-modal-title,
  #fermate-modal-title {
    font-size: 1rem;
    font-weight: 600;
    color: white !important;
    line-height: 32px;
    margin: 0;
  }
  
  .fermate-modal-close {
    background: none;
    color: white;
    opacity: 0.95;
    border: 2px solid rgba(255, 255, 255, 0.6);
    border-radius: 6px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
    line-height: 1;
  }
  
  .fermate-modal-close:hover {
    opacity: 1;
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 1);
    transform: scale(1.1);
  }
  
  .fermate-modal-body {
    padding: 20px 24px 24px;
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  
  /* SOTTOSEZIONE 18.2: Container ricerca fermate */
  .fermate-search-container {
    margin-bottom: 20px;
    flex-shrink: 0;
  }
  
  .fermate-search-box {
    position: relative;
    display: flex;
    align-items: center;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 12px 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }
  
  .fermate-search-box:focus-within {
    border-color: var(--turchese);
    box-shadow: 0 0 0 3px rgba(23, 183, 177, 0.1);
  }
  
  .fermate-search-icon {
    font-size: 1.2rem;
    color: var(--testo-secondario);
    margin-right: 12px;
    flex-shrink: 0;
  }
  
  .fermate-search-input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    color: var(--testo-principale);
    font-size: 1rem;
    font-weight: 500;
  }
  
  .fermate-search-input::placeholder {
    color: var(--testo-secondario);
    font-weight: 400;
  }
  
  .fermate-clear-btn {
    background: none;
    border: none;
    color: var(--testo-secondario);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    font-size: 1rem;
    transition: all 0.3s ease;
    margin-left: 8px;
    flex-shrink: 0;
  }
  
  .fermate-clear-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    color: var(--testo-principale);
  }
  
  /* SOTTOSEZIONE 18.2.5: Pulsante geolocalizzazione inline */
  .fermate-location-btn-inline {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 14px 20px;
    margin: 12px 0;
    background: linear-gradient(135deg, var(--turchese) 0%, var(--turchese-scuro) 100%);
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 0.95rem;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(0, 123, 138, 0.3);
  }
  
  .fermate-location-btn-inline:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 123, 138, 0.4);
    background: linear-gradient(135deg, var(--turchese-scuro) 0%, var(--turchese) 100%);
  }
  
  .fermate-location-btn-inline:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0, 123, 138, 0.3);
  }
  
  #fermate-location-icon {
    font-size: 1.2rem;
  }
  
  #fermate-location-text {
    letter-spacing: 0.3px;
  }
  
  /* SOTTOSEZIONE 18.3: Container lista fermate */
  .fermate-list-container {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  
  .fermate-modal-list {
    list-style: none;
    margin: 0;
    padding: 0 8px 0 0; /* Padding destro per scrollbar */
    flex: 1;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--turchese) var(--grigio-chiaro);
  }
  
  .fermate-modal-list::-webkit-scrollbar {
    width: 6px;
  }
  
  .fermate-modal-list::-webkit-scrollbar-track {
    background: var(--grigio-chiaro);
    border-radius: 3px;
  }
  
  .fermate-modal-list::-webkit-scrollbar-thumb {
    background: var(--turchese);
    border-radius: 3px;
  }
  
  .fermate-modal-list::-webkit-scrollbar-thumb:hover {
    background: var(--turchese-scuro);
  }
  
  .fermate-modal-list li {
    padding: 14px 24px; /* Padding aumentato per touch migliore */
    cursor: pointer;
    border-radius: 8px;
    margin-bottom: 4px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    color: var(--testo-principale);
    font-weight: 500;
  }
  
  .fermate-modal-list li:hover {
    background: rgba(0, 123, 138, 0.1);
    color: var(--turchese);
  }
  
  .fermate-modal-list li.selected {
    background: var(--turchese);
    color: white;
  }
  
  .fermate-modal-list li.selected:hover {
    background: var(--turchese-scuro);
    color: white;
  }
  
  /* SOTTOSEZIONE 18.4: Dark mode per modal fermate */
  .dark .fermate-modal-content {
    background: var(--glass-bg-dark);
    border-color: var(--glass-border-dark);
    box-shadow: var(--glass-shadow-dark);
  }
  
  .dark .fermate-modal-header {
    border-bottom-color: var(--glass-border-dark);
  }

  /* Dark mode per pulsante geolocalizzazione modal */
  .dark .fermate-location-btn {
    background: var(--turchese);      /* Sfondo turchese anche in dark mode */
    box-shadow: 0 2px 6px rgba(0, 153, 170, 0.4);  /* Ombra turchese */
  }

  .dark .fermate-location-btn:hover {
    background: var(--turchese-scuro);  /* Sfondo turchese scuro al hover */
    box-shadow: 0 4px 10px rgba(0, 153, 170, 0.5);  /* Ombra turchese più pronunciata */
  }
  
  .dark .fermate-modal-header {
    background: linear-gradient(135deg, 
      rgba(0, 123, 138, 0.95) 0%, 
      rgba(0, 123, 138, 0.8) 50%, 
      rgba(0, 123, 138, 0.6) 100%);
    border-bottom-color: rgba(0, 123, 138, 0.5);
    box-shadow: 0 4px 12px 0 rgba(0, 123, 138, 0.6);
  }
  
  .dark .fermate-modal-title,
  .dark #fermate-modal-title {
    color: white !important;
  }
  
  .dark .fermate-modal-close {
    color: white;
    border-color: rgba(255, 255, 255, 0.6);
  }
  
  .dark .fermate-modal-close:hover {
    border-color: rgba(255, 255, 255, 1);
    background: rgba(255, 255, 255, 0.2);
  }
  
  .dark .fermate-search-box {
    background: var(--glass-bg-dark);
    border-color: var(--glass-border-dark);
  }
  
  .dark .fermate-search-input {
    color: rgba(248, 250, 252, 0.95);
  }
  
  .dark .fermate-search-input::placeholder {
    color: rgba(148, 163, 184, 0.7);
  }
  
  .dark .fermate-search-icon {
    color: rgba(148, 163, 184, 0.7);
  }
  
  .dark .fermate-clear-btn {
    color: rgba(148, 163, 184, 0.7);
  }
  
  .dark .fermate-clear-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: rgba(248, 250, 252, 0.95);
  }
  
  /* Dark mode per pulsante geolocalizzazione inline */
  .dark .fermate-location-btn-inline {
    background: linear-gradient(135deg, rgba(0, 153, 170, 0.9) 0%, rgba(0, 123, 138, 0.9) 100%);
    box-shadow: 0 3px 10px rgba(0, 153, 170, 0.4);
  }
  
  .dark .fermate-location-btn-inline:hover {
    background: linear-gradient(135deg, rgba(0, 123, 138, 0.9) 0%, rgba(0, 153, 170, 0.9) 100%);
    box-shadow: 0 5px 15px rgba(0, 153, 170, 0.5);
  }
  
  .dark .fermate-modal-list li {
    color: rgba(248, 250, 252, 0.95);
  }
  
  .dark .fermate-modal-list li:hover {
    background: rgba(23, 183, 177, 0.2);
    color: var(--turchese);
  }
  
  .dark .fermate-modal-list li.selected {
    background: var(--turchese);
    color: white;
  }
  
  .dark .fermate-modal-list li.selected:hover {
    background: var(--turchese-scuro);
    color: white;
  }
  
  /* SOTTOSEZIONE 18.5: Responsive modal fermate */
  @media (max-width: 480px) {
    .fermate-modal-content {
      margin: 10px;
      max-height: 90vh;
    }
    
    .fermate-modal-header,
    .fermate-modal-body {
      padding: 16px;
    }
    
    .fermate-search-box {
      padding: 10px 12px;
    }
    
    .fermate-modal-list li {
      padding: 16px 20px; /* Ancora più padding su mobile per area touch maggiore */
    }
  }
  
  /* ========================================
   SEZIONE 18B: MODAL LINEE (STILE AVANZATO)
   ======================================== */
  
  /* SOTTOSEZIONE 18B.0: Header modale linee con stile navbar */
  #linee-modal .fermate-modal-header {
    /* Stesso gradient della navbar */
    background: linear-gradient(135deg, 
      rgba(0, 123, 138, 0.9) 0%, 
      rgba(0, 123, 138, 0.7) 50%, 
      rgba(0, 123, 138, 0.5) 100%);
    border-bottom: 1px solid rgba(0, 123, 138, 0.3);
    box-shadow: 0 4px 12px 0 rgba(0, 123, 138, 0.4);
    border-radius: 16px 16px 0 0; /* Arrotonda solo gli angoli superiori */
    padding: 10px 20px; /* Padding simmetrico per allineamento */
    min-height: 52px; /* Altezza minima per garantire allineamento */
  }
  
  /* Testo bianco per contrasto pulito */
  #linee-modal .fermate-modal-title,
  #linee-modal-title {
    color: white !important;
    font-weight: 600;
    font-size: 1rem; /* Dimensione standard */
    line-height: 32px; /* Allineamento perfetto con bottone chiusura (32px) */
  }
  
  /* Bottone chiusura con bordo */
  #linee-modal .fermate-modal-close {
    color: white;
    opacity: 0.95;
    border: 2px solid rgba(255, 255, 255, 0.6); /* Bordo bianco */
    border-radius: 6px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }
  
  #linee-modal .fermate-modal-close:hover {
    opacity: 1;
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 1); /* Bordo bianco pieno */
    transform: scale(1.1);
  }
  
  /* Dark mode per header modale linee */
  .dark #linee-modal .fermate-modal-header {
    background: linear-gradient(135deg, 
      rgba(0, 123, 138, 0.95) 0%, 
      rgba(0, 123, 138, 0.8) 50%, 
      rgba(0, 123, 138, 0.6) 100%);
    border-bottom-color: rgba(0, 123, 138, 0.5);
    box-shadow: 0 4px 12px 0 rgba(0, 123, 138, 0.6);
  }
  
  /* SOTTOSEZIONE 18B.1: Item linea con badge e dettagli */
  .linea-modal-item {
    padding: 16px;
    cursor: pointer;
    border-radius: 12px;
    margin-bottom: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    gap: 16px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }
  
  .linea-modal-item:hover {
    background: linear-gradient(135deg, rgba(0, 123, 138, 0.1) 0%, rgba(23, 183, 177, 0.05) 100%);
    border-color: var(--turchese);
    transform: translateX(4px);
    box-shadow: 0 4px 12px rgba(0, 123, 138, 0.15);
  }
  
  .linea-modal-item:active {
    transform: translateX(4px) scale(0.98);
  }
  
  /* Badge con icona bus e numero linea */
  .linea-badge {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--turchese) 0%, var(--turchese-scuro) 100%);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 123, 138, 0.3);
    transition: all 0.3s ease;
  }
  
  .linea-modal-item:hover .linea-badge {
    transform: scale(1.05);
    box-shadow: 0 6px 16px rgba(0, 123, 138, 0.4);
  }
  
  .linea-icon {
    font-size: 24px;
    margin-bottom: 2px;
  }
  
  .linea-number {
    font-size: 14px;
    font-weight: 700;
    color: white;
    letter-spacing: 0.5px;
  }
  
  /* Dettagli linea (percorso e numero fermate) */
  .linea-details {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .linea-route {
    font-size: 16px;
    font-weight: 600;
    color: var(--testo-principale);
    line-height: 1.3;
  }
  
  .linea-stops {
    font-size: 13px;
    color: var(--testo-secondario);
    font-weight: 500;
  }
  
  /* Freccia di selezione */
  .linea-arrow {
    font-size: 28px;
    color: var(--testo-secondario);
    transition: all 0.3s ease;
    opacity: 0.5;
  }
  
  .linea-modal-item:hover .linea-arrow {
    color: var(--turchese);
    transform: translateX(4px);
    opacity: 1;
  }
  
  /* SOTTOSEZIONE 18B.2: Dark mode per modal linee */
  .dark .linea-modal-item {
    background: var(--glass-bg-dark);
    border-color: var(--glass-border-dark);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }
  
  .dark .linea-modal-item:hover {
    background: linear-gradient(135deg, rgba(23, 183, 177, 0.15) 0%, rgba(0, 123, 138, 0.1) 100%);
    border-color: var(--turchese);
    box-shadow: 0 4px 12px rgba(23, 183, 177, 0.25);
  }
  
  .dark .linea-route {
    color: rgba(248, 250, 252, 0.95);
  }
  
  .dark .linea-stops {
    color: rgba(148, 163, 184, 0.8);
  }
  
  .dark .linea-arrow {
    color: rgba(148, 163, 184, 0.6);
  }
  
  .dark .linea-modal-item:hover .linea-arrow {
    color: var(--turchese);
  }
  
  /* SOTTOSEZIONE 18B.3: Responsive modal linee */
  @media (max-width: 480px) {
    .linea-modal-item {
      padding: 12px;
      gap: 12px;
    }
    
    .linea-badge {
      min-width: 60px;
      height: 60px;
    }
    
    .linea-icon {
      font-size: 20px;
    }
    
    .linea-number {
      font-size: 12px;
    }
    
    .linea-route {
      font-size: 14px;
    }
    
    .linea-stops {
      font-size: 12px;
    }
    
    .linea-arrow {
      font-size: 24px;
    }
  }
  
  /* ========================================
   UTILITY: HELPER, ANIMAZIONI, COMPONENTI AUSILIARI
   Estratto da style.css per riorganizzazione sicura
   ======================================== */

/* ========================================
   SEZIONE 19: ANIMAZIONI E TRANSIZIONI
   ======================================== */
/* SOTTOSEZIONE 19.1: Animazione fade-in */
.fade-in {
    animation: fadeIn 0.6s ease-in-out;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* SOTTOSEZIONE 19.2: Classe per nascondere elementi */
  .hidden {
    display: none !important;
  }
  
  /* SOTTOSEZIONE 19.3: Classe per elementi inattivi */
  .inactive {
    opacity: 0.6;
    pointer-events: none;
  }
  
  /* SOTTOSEZIONE 19.4: Riduci Animazioni (Reduce Motion) */
  /* Disabilita TUTTE le animazioni/transizioni quando attivo */
  body.reduce-motion *,
  body.reduce-motion *::before,
  body.reduce-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  
  /* ========================================
     SEZIONE 20: SEZIONI LAYOUT
     ======================================== */
  /* SOTTOSEZIONE 20.1: Sezione calcolo */
  .calculate-section {
    text-align: center;              /* Testo centrato */
    margin: 1.2rem 0;               /* Margine verticale */
    display: flex;                  /* Layout flexbox */
    flex-direction: column;         /* Direzione verticale */
    align-items: center;            /* Allineamento centrale */
    gap: 0.5rem;                    /* Spazio tra elementi */
  }
  
  /* SOTTOSEZIONE 20.2: Sezione reset */
  .reset-section {
    text-align: center;              /* Testo centrato */
    margin: 1.5rem 0;               /* Margine verticale */
    padding: 1rem 0;                /* Padding verticale */
  }
  
  /* ========================================
     SEZIONE 21: BOTTONI UTILITY
     ======================================== */
  /* SOTTOSEZIONE 21.1: Pulsante calcola */
  .calculate-btn {
    /* Stile glassmorphism bianco */
    background: rgba(255, 255, 255, 0.6);    /* Sfondo bianco trasparente */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border: 1px solid rgba(255, 255, 255, 0.3);  /* Bordo bianco trasparente */
    border-radius: 12px;                      /* Bordi arrotondati */
    color: var(--testo-principale);           /* Colore testo principale */
    font-size: 1.1rem;                        /* Dimensione font grande */
    font-weight: 600;                         /* Peso font semi-bold */
    padding: 0.8rem 2rem;                     /* Padding interno */
    cursor: pointer;                          /* Cursore pointer */
    transition: all 0.3s ease;                /* Transizione fluida */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);  /* Ombra leggera */
    width: 100%;                              /* Larghezza completa */
    margin-top: 1rem;                         /* Margine superiore */
  }
  
  /* Effetto hover del pulsante calcola */
  .calculate-btn:hover {
    background: rgba(255, 255, 255, 0.8);    /* Sfondo bianco più opaco */
    transform: translateY(-3px);            /* Solleva il pulsante */
    box-shadow: 0 8px 25px rgba(255, 255, 255, 0.5);  /* Ombra bianca più forte */
    border-color: rgba(255, 255, 255, 0.5);  /* Bordo bianco più opaco */
  }
  
  /* Stato disabilitato del pulsante calcola */
  .calculate-btn:disabled {
    background: rgba(108, 117, 125, 0.3);   /* Sfondo grigio trasparente */
    cursor: not-allowed;                    /* Cursore non consentito */
    transform: none;                        /* Nessuna trasformazione */
    box-shadow: none;                       /* Nessuna ombra */
    border-color: rgba(255, 255, 255, 0.1); /* Bordo bianco molto trasparente */
  }
  
  /* SOTTOSEZIONE 21.2: Pulsante reset */
  .reset-btn {
    background: var(--glass-bg);                  /* Sfondo glassmorphism */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border: 1px solid var(--glass-border);       /* Bordo glassmorphism */
    color: var(--testo-principale);              /* Colore testo principale */
    border-radius: 12px;                         /* Bordi arrotondati */
    padding: 0.6rem 1.5rem;                      /* Padding interno */
    font-size: 1rem;                             /* Dimensione font standard */
    font-weight: 500;                            /* Peso font medium */
    cursor: pointer;                             /* Cursore pointer */
    transition: all 0.3s ease;                   /* Transizione fluida */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);   /* Ombra leggera */
  }
  
  .reset-btn:hover {
    background: rgba(255, 255, 255, 0.4);        /* Sfondo bianco più opaco */
    border-color: rgba(255, 255, 255, 0.6);      /* Bordo bianco più opaco */
    transform: translateY(-1px);                  /* Solleva leggermente */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  /* Ombra più profonda */
  }
  
  /* SOTTOSEZIONE 21.3: Pulsante route */
  .route-button {
    background: var(--glass-bg);                  /* Sfondo glassmorphism */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border: 1px solid var(--glass-border);       /* Bordo glassmorphism */
    color: var(--testo-principale);              /* Colore testo principale */
    border-radius: 12px;                         /* Bordi arrotondati */
    padding: 0.75rem 1rem;                       /* Padding interno */
    font-size: 1rem;                             /* Dimensione font standard */
    font-weight: 500;                            /* Peso font medium */
    cursor: pointer;                             /* Cursore pointer */
    transition: all 0.3s ease;                   /* Transizione fluida */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);   /* Ombra leggera */
    width: 100%;                                 /* Larghezza completa */
    display: flex;                               /* Layout flexbox */
    align-items: center;                         /* Allineamento verticale centrale */
    justify-content: space-between;              /* Spazio tra testo e freccia */
    text-align: left;                            /* Testo allineato a sinistra */
  }
  
  .route-button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.4);        /* Sfondo bianco più opaco */
    border-color: rgba(255, 255, 255, 0.6);      /* Bordo bianco più opaco */
    transform: translateY(-1px);                  /* Solleva leggermente */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  /* Ombra più profonda */
  }
  
  .route-button:disabled {
    background: rgba(108, 117, 125, 0.3);        /* Sfondo grigio trasparente */
    cursor: not-allowed;                        /* Cursore non consentito */
    transform: none;                            /* Nessuna trasformazione */
    box-shadow: none;                           /* Nessuna ombra */
    border-color: rgba(255, 255, 255, 0.1);     /* Bordo bianco molto trasparente */
    opacity: 0.6;                               /* Opacità ridotta */
  }
  
  /* Ottimizzazione pulsanti route per schermi piccoli */
  @media (max-width: 768px) {
    .route-button {
      padding: 0.65rem 0.85rem;                   /* Padding ridotto per mobile */
      font-size: 0.95rem;                         /* Font-size leggermente ridotto */
    }
  }
  
  @media (max-width: 390px) {
    .route-button {
      padding: 0.6rem 0.75rem;                    /* Padding ulteriormente ridotto */
      font-size: 0.9rem;                          /* Font-size ridotto per schermi molto piccoli */
    }
  }
  
  /* SOTTOSEZIONE 21.4: Freccia route */
  .route-arrow {
    font-size: 0.8rem;                           /* Dimensione font piccola */
    color: var(--testo-secondario);              /* Colore testo secondario */
    transition: transform 0.3s ease;             /* Transizione rotazione */
  }
  
  .route-button:hover:not(:disabled) .route-arrow {
    transform: translateY(-1px);                 /* Solleva leggermente */
  }
  
  /* ========================================
     SEZIONE 22: CARD PREZZI
     ======================================== */
  /* SOTTOSEZIONE 22.1: Card prezzo con glassmorphism */
  .price-card {
    border-radius: 1rem;
    overflow: hidden;
    margin: 1rem 0;
    background: rgba(255, 255, 255, 0.15);
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    position: relative;
    transition: all 0.3s ease;
  }
  
  /* Effetto rifrazione della luce - overlay gradiente */
  .price-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      transparent 100%
    );
    pointer-events: none;
    z-index: 1;
  }
  
  /* Stato inattivo - quando i campi non sono selezionati */
  .price-card.inactive {
    opacity: 0.6;
  }
  
  .price-card.inactive .price-section {
    opacity: 0.6;
  }
  
  .price-card.inactive .price-label {
    color: #64748b;
  }
  
  .price-card.inactive .price-code {
    color: #64748b;
  }
  
  .price-card.inactive .price-value {
    color: #64748b;
    text-shadow: none;
  }
  
  /* SOTTOSEZIONE 22.2: Sezione prezzo semplificata */
  .price-section {
    padding: 1rem 1.5rem;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
  }
  
  /* Effetto rifrazione della luce per price-section */
  .price-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      transparent 100%
    );
    pointer-events: none;
    z-index: 1;
  }
  
  /* SOTTOSEZIONE 22.3: Etichetta del prezzo */
  .price-label {
    color: var(--testo-principale);  /* Colore principale per coerenza */
    font-size: 1rem;                /* Dimensione font standard */
    margin-bottom: 0.8rem;          /* Margine inferiore */
    font-weight: 500;               /* Peso font medium */
    letter-spacing: 1px;            /* Spaziatura tra lettere */
    text-transform: uppercase;      /* Testo maiuscolo */
    opacity: 0.8;                   /* Opacità ridotta */
  }
  
  /* SOTTOSEZIONE 22.4: Valore del prezzo */
  .price-value {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;  /* Font di sistema per compatibilità offline */
    font-size: 3rem;                /* Dimensione font ridotta per compattezza */
    font-weight: 700;               /* Peso font bold (ridotto da 900 per coerenza) */
    color: var(--testo-principale);  /* Colore principale per coerenza */
    margin-bottom: 0.5rem;            /* Margine inferiore ridotto */
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);  /* Ombra leggera per coerenza */
    line-height: 1;                  /* Altezza riga compatta */
  }
  
  /* SOTTOSEZIONE 22.5: Codice prezzo - solo testo con dimensione appropriata */
  .price-code {
    color: var(--testo-principale);       /* Colore principale per coerenza */
    font-size: 1.8rem;                   /* Dimensione ridotta per compattezza */
    font-weight: 700;                    /* Peso font bold */
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);  /* Ombra leggera per coerenza */
    margin-bottom: 0;                    /* Rimuovo margine inferiore */
    line-height: 1;                      /* Altezza riga compatta */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;    /* Font di sistema per compatibilità offline */
  }
  
  /* SOTTOSEZIONE 22.6: Divisore tra codice e prezzo */
  .price-divider {
    height: 2px;
    background: rgba(15, 23, 42, 0.4);  /* Stesso colore del divisore nelle altre pagine */
    margin: 1rem 1.5rem;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  /* ========================================
     SEZIONE 23: RICERCA E SELEZTORI
     ======================================== */
  /* SOTTOSEZIONE 23.1: Container selettore linea */
  .line-selector-container {
    max-width: 600px;                /* Larghezza massima */
    margin: 0 auto 1.5rem;          /* Margine centrato */
    padding-top: 1rem;              /* Padding superiore */
    border-top: 2px solid rgba(15, 23, 42, 0.4);  /* Bordo superiore più chiaro */
  }
  
  /* SOTTOSEZIONE 23.2: Barra di ricerca */
  .search-container {
    margin-bottom: 2rem;            /* Margine inferiore */
    display: flex;                  /* Layout flexbox */
    justify-content: center;        /* Centra orizzontalmente */
  }

  /* SOTTOSEZIONE 23.2.5: Contenitore pulsanti route */
  .route-button-container {
    display: flex;                  /* Layout flexbox */
    align-items: center;            /* Allineamento verticale */
    gap: 0.5rem;                   /* Spazio tra pulsanti */
    width: 100%;                   /* Larghezza completa */
  }

  /* SOTTOSEZIONE 23.2.6: Pulsante geolocalizzazione piccolo */
  .location-btn-small {
    display: flex;                  /* Layout flexbox */
    align-items: center;            /* Allineamento verticale */
    justify-content: center;        /* Centra contenuto */
    width: 40px;                   /* Larghezza fissa */
    height: 40px;                  /* Altezza fissa */
    background: var(--turchese);    /* Sfondo turchese */
    color: white;                   /* Testo bianco */
    border: none;                   /* Nessun bordo */
    border-radius: 8px;             /* Bordi arrotondati */
    cursor: pointer;                /* Cursore pointer */
    font-size: 1.1rem;              /* Dimensione font */
    transition: all 0.3s ease;      /* Transizione fluida */
    box-shadow: 0 2px 6px rgba(0, 123, 138, 0.3);  /* Ombra */
    flex-shrink: 0;                 /* Non si restringe */
  }

  .location-btn-small:hover {
    background: var(--turchese-scuro);  /* Sfondo più scuro al hover */
    transform: translateY(-1px);        /* Leggero sollevamento */
    box-shadow: 0 4px 10px rgba(0, 123, 138, 0.4);  /* Ombra più pronunciata */
  }

  .location-btn-small.active {
    background: var(--turchese-scuro);  /* Sfondo scuro quando attivo */
    box-shadow: 0 0 0 2px rgba(0, 123, 138, 0.3);  /* Bordo evidenziato */
  }

  .location-btn-small:disabled {
    opacity: 0.6;                   /* Opacità ridotta quando disabilitato */
    cursor: not-allowed;            /* Cursore non consentito */
    transform: none;                /* Nessuna trasformazione */
  }

  /* Stili per pulsante geolocalizzazione piccolo in dark mode */
  .dark .location-btn-small {
    background: var(--turchese);    /* Sfondo turchese in dark mode */
    box-shadow: 0 2px 6px rgba(0, 153, 170, 0.4);  /* Ombra diversa */
  }

  .dark .location-btn-small:hover {
    background: var(--turchese-scuro);  /* Sfondo più scuro al hover */
    box-shadow: 0 4px 10px rgba(0, 153, 170, 0.5);  /* Ombra più pronunciata */
  }

  .dark .location-btn-small.active {
    background: var(--turchese-scuro);  /* Sfondo scuro quando attivo */
    box-shadow: 0 0 0 2px rgba(0, 153, 170, 0.4);  /* Bordo evidenziato */
  }

  /* SOTTOSEZIONE 23.2.7: Pulsante inversione piccolo */
  .swap-btn-small {
    display: flex;                  /* Layout flexbox */
    align-items: center;            /* Allineamento verticale */
    justify-content: center;        /* Centra contenuto */
    width: 40px;                   /* Larghezza fissa */
    height: 40px;                  /* Altezza fissa */
    background: var(--turchese);    /* Sfondo turchese per maggiore visibilità */
    color: white;                   /* Testo bianco */
    border: none;                   /* Nessun bordo */
    border-radius: 8px;             /* Bordi arrotondati */
    cursor: pointer;                /* Cursore pointer */
    font-size: 1.1rem;              /* Dimensione font */
    transition: all 0.3s ease;      /* Transizione fluida */
    box-shadow: 0 2px 6px rgba(0, 123, 138, 0.3);  /* Ombra turchese */
    flex-shrink: 0;                 /* Non si restringe */
  }

  .swap-btn-small:hover {
    background: var(--turchese-scuro);  /* Sfondo turchese scuro al hover */
    transform: translateY(-1px);        /* Leggero sollevamento */
    box-shadow: 0 4px 10px rgba(0, 123, 138, 0.4);  /* Ombra turchese più pronunciata */
  }

  .swap-btn-small:active {
    transform: translateY(0);           /* Ritorna alla posizione originale al click */
    box-shadow: 0 2px 6px rgba(0, 123, 138, 0.3);  /* Ombra turchese normale */
  }

  .swap-btn-small:disabled {
    opacity: 0.6;                   /* Opacità ridotta quando disabilitato */
    cursor: not-allowed;            /* Cursore non consentito */
    transform: none;                /* Nessuna trasformazione */
  }

  /* Stili per pulsante inversione piccolo in dark mode */
  .dark .swap-btn-small {
    background: var(--turchese);    /* Sfondo turchese anche in dark mode */
    box-shadow: 0 2px 6px rgba(0, 153, 170, 0.4);  /* Ombra turchese */
  }

  .dark .swap-btn-small:hover {
    background: var(--turchese-scuro);  /* Sfondo turchese scuro al hover */
    box-shadow: 0 4px 10px rgba(0, 153, 170, 0.5);  /* Ombra turchese più pronunciata */
  }

  /* SOTTOSEZIONE 23.2.8: Pulsante geolocalizzazione grande */
  .location-btn {
    display: flex;                  /* Layout flexbox */
    align-items: center;            /* Allineamento verticale */
    justify-content: center;        /* Centra contenuto */
    gap: 0.5rem;                   /* Spazio tra icona e testo */
    padding: 0.75rem 1.5rem;       /* Padding interno */
    background: var(--turchese);    /* Sfondo turchese */
    color: white;                   /* Testo bianco */
    border: none;                   /* Nessun bordo */
    border-radius: 12px;            /* Bordi arrotondati */
    cursor: pointer;                /* Cursore pointer */
    font-size: 1rem;                /* Dimensione font */
    font-weight: 500;               /* Peso del font */
    transition: all 0.3s ease;      /* Transizione fluida */
    box-shadow: 0 3px 8px rgba(0, 123, 138, 0.3);  /* Ombra */
    min-width: 180px;               /* Larghezza minima */
  }

  .location-btn:hover {
    background: var(--turchese-scuro);  /* Sfondo più scuro al hover */
    transform: translateY(-2px);        /* Sollevamento al hover */
    box-shadow: 0 6px 15px rgba(0, 123, 138, 0.4);  /* Ombra più pronunciata */
  }

  .location-btn.active {
    background: var(--turchese-scuro);  /* Sfondo scuro quando attivo */
    box-shadow: 0 0 0 3px rgba(0, 123, 138, 0.3);  /* Bordo evidenziato */
  }

  .location-btn:disabled {
    opacity: 0.6;                   /* Opacità ridotta quando disabilitato */
    cursor: not-allowed;            /* Cursore non consentito */
    transform: none;                /* Nessuna trasformazione */
  }

  /* Stili per pulsante geolocalizzazione grande in dark mode */
  .dark .location-btn {
    background: var(--turchese);    /* Sfondo turchese in dark mode */
    box-shadow: 0 3px 8px rgba(0, 153, 170, 0.4);  /* Ombra diversa */
  }

  .dark .location-btn:hover {
    background: var(--turchese-scuro);  /* Sfondo più scuro al hover */
    box-shadow: 0 6px 15px rgba(0, 153, 170, 0.5);  /* Ombra più pronunciata */
  }

  .dark .location-btn.active {
    background: var(--turchese-scuro);  /* Sfondo scuro quando attivo */
    box-shadow: 0 0 0 3px rgba(0, 153, 170, 0.4);  /* Bordo evidenziato */
  }
  
  /* SOTTOSEZIONE 23.3: Box contenitore ricerca */
  .search-box {
    position: relative;                             /* Posizione relativa per elementi assoluti */
    width: 100%;                                   /* Larghezza completa */
    max-width: 600px;                              /* Larghezza massima */
    display: flex;                                 /* Layout flexbox */
    align-items: center;                           /* Allineamento verticale centrale */
    background: var(--glass-bg);                   /* Sfondo glassmorphism */
    /* backdrop-filter rimosso per performance */
    /* -webkit-backdrop-filter rimosso per performance */
    border: 1px solid var(--glass-border);         /* Bordo glassmorphism */
    border-radius: 12px;                           /* Bordi arrotondati */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);    /* Ombra leggera */
    transition: all 0.3s ease;                     /* Transizione fluida */
    overflow: hidden;                              /* Nasconde overflow */
  }
  
  /* SOTTOSEZIONE 23.4: Icona ricerca */
  .search-icon {
    position: absolute;                            /* Posizione assoluta */
    left: 16px;                                   /* Posizione sinistra */
    top: 50%;                                     /* Posizione verticale centrale */
    transform: translateY(-50%);                  /* Centra verticalmente */
    color: var(--testo-secondario);               /* Colore testo secondario */
    font-size: 1.2rem;                            /* Dimensione font grande */
    pointer-events: none;                         /* Non intercetta click */
    z-index: 2;                                   /* Sopra l'input */
    transition: color 0.3s ease;                  /* Transizione colore */
  }
  
  /* SOTTOSEZIONE 23.5: Input ricerca */
  .search-input {
    width: 100%;                                  /* Larghezza completa */
    padding: 12px 16px 12px 48px;                /* Padding con spazio per icona */
    border: none;                                 /* Nessun bordo */
    outline: none;                                /* Nessun outline */
    background: transparent;                      /* Sfondo trasparente */
    color: var(--testo-principale);               /* Colore testo principale */
    font-size: 1rem;                              /* Dimensione font standard */
    font-weight: 500;                             /* Peso font medium */
    transition: all 0.3s ease;                    /* Transizione fluida */
  }
  
  .search-input::placeholder {
    color: var(--testo-secondario);               /* Colore placeholder */
    font-weight: 400;                             /* Peso font normale */
    opacity: 0.8;                                 /* Opacità ridotta */
  }
  
  .search-input:focus {
    outline: none;                                /* Rimuove outline di default */
  }
  
  /* Focus del search-box */
  .search-box:focus-within {
    border-color: var(--turchese);                /* Bordo turchese al focus */
    box-shadow: 0 0 0 3px rgba(23, 183, 177, 0.1);  /* Ombra turchese */
  }
  
  .search-box:focus-within .search-icon {
    color: var(--turchese);                       /* Icona turchese al focus */
  }
  
  /* ========================================
     SEZIONE 24: FOOTER E LINK
     ======================================== */
  /* SOTTOSEZIONE 24.1: Link footer */
  .footer-links {
    display: flex;                               /* Layout flexbox orizzontale */
    justify-content: center;                     /* Centra i link */
    gap: 2rem;                                  /* Spazio tra i link */
    margin: 1rem 0;                             /* Margine verticale */
    flex-wrap: wrap;                            /* Va a capo su schermi piccoli */
  }
  
  /* SOTTOSEZIONE 24.2: Link Telegram */
  .telegram-link {
    color: var(--testo-secondario);              /* Colore testo secondario */
    text-decoration: none;                      /* Nessuna sottolineatura */
    transition: color 0.3s ease;                /* Transizione colore */
    display: flex;                              /* Layout flexbox */
    align-items: center;                        /* Allineamento verticale centrale */
    gap: 0.5rem;                                /* Spazio tra icona e testo */
  }
  
  .telegram-link:hover {
    color: var(--turchese);                     /* Colore turchese al hover */
  }
  
  /* SOTTOSEZIONE 24.3: Icona Telegram */
  .telegram-icon {
    font-size: 1.2rem;                          /* Dimensione icona */
  }
  
  /* SOTTOSEZIONE 24.4: Informazioni aggiornamento */
  .update-info {
    margin-top: 1rem;                           /* Margine superiore */
    font-size: 0.8rem;                          /* Dimensione font molto piccola */
    color: var(--testo-secondario);             /* Colore testo secondario */
    opacity: 0.8;                               /* Opacità ridotta */
  }
  
  /* SOTTOSEZIONE 24.5: Footer responsive per mobile */
  @media (max-width: 768px) {
    .footer {
      padding: 1.5rem 1rem;                      /* Padding ridotto */
      font-size: 0.85rem;                        /* Font leggermente più piccolo */
    }
    
    .footer p {
      line-height: 1.6;                          /* Migliore leggibilità */
      margin-bottom: 0.75rem;                    /* Spazio sotto il paragrafo */
    }
    
    .footer-links {
      gap: 1rem;                                 /* Spazio ridotto tra link */
      margin: 0.75rem 0;                         /* Margine ridotto */
    }
    
    .telegram-link {
      font-size: 0.9rem;                         /* Font più piccolo */
      padding: 0.5rem;                           /* Padding per area di tap più grande */
    }
    
    .telegram-icon {
      font-size: 1.1rem;                         /* Icona leggermente più piccola */
    }
  }
  
  @media (max-width: 480px) {
    .footer {
      padding: 1rem 0.75rem;                     /* Padding ancora più ridotto */
      font-size: 0.8rem;                         /* Font più piccolo */
    }
    
    .footer p {
      margin-bottom: 0.5rem;                     /* Meno spazio */
    }
    
    .footer-links {
      flex-direction: column;                    /* Link in colonna */
      gap: 0.5rem;                               /* Spazio ridotto */
      align-items: center;                       /* Centra i link */
    }
    
    .telegram-link {
      width: 100%;                               /* Larghezza completa */
      max-width: 280px;                          /* Larghezza massima */
      justify-content: center;                   /* Centra il contenuto */
      padding: 0.75rem 1rem;                     /* Padding maggiore per tap */
      background: rgba(23, 183, 177, 0.1);      /* Sfondo leggero */
      border-radius: 8px;                        /* Bordi arrotondati */
      transition: all 0.3s ease;                /* Transizione fluida */
    }
    
    .telegram-link:active {
      background: rgba(23, 183, 177, 0.2);      /* Sfondo più intenso al tap */
      transform: scale(0.98);                    /* Leggero effetto di pressione */
    }
  }
  
  @media (max-width: 360px) {
    .footer {
      padding: 0.75rem 0.5rem;                   /* Padding minimo */
      font-size: 0.75rem;                        /* Font ancora più piccolo */
    }
    
    .telegram-link {
      font-size: 0.85rem;                        /* Font ridotto */
      padding: 0.65rem 0.75rem;                  /* Padding ridotto */
    }
  }
  
  /* ========================================
     SEZIONE 24.6: PULSANTE TORNA SU
     ======================================== */
  /* Pulsante floating per tornare in cima alla pagina */
  .scroll-to-top {
    position: fixed;                           /* Posizione fissa nello schermo */
    bottom: 2rem;                              /* Distanza dal basso */
    right: 2rem;                               /* Distanza da destra */
    width: 3rem;                               /* Larghezza del pulsante */
    height: 3rem;                              /* Altezza del pulsante */
    background: var(--turchese);              /* Colore di sfondo principale */
    color: white;                              /* Colore del testo */
    border: none;                              /* Nessun bordo */
    border-radius: 50%;                        /* Completamente rotondo */
    font-size: 1.5rem;                         /* Dimensione dell'icona */
    font-weight: bold;                         /* Grassetto */
    cursor: pointer;                           /* Cursore pointer */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Ombra per profondità */
    opacity: 0;                                /* Invisibile di default */
    visibility: hidden;                        /* Nascosto di default */
    transform: translateY(100px);              /* Traslato fuori schermo */
    transition: all 0.3s ease;                 /* Transizione fluida */
    z-index: 999;                              /* Sopra quasi tutti gli elementi */
    display: flex;                             /* Layout flex */
    align-items: center;                       /* Centra verticalmente */
    justify-content: center;                   /* Centra orizzontalmente */
  }
  
  /* Stato visibile del pulsante */
  .scroll-to-top.visible {
    opacity: 1;                                /* Completamente visibile */
    visibility: visible;                       /* Visibile */
    transform: translateY(0);                  /* Nella posizione normale */
  }
  
  /* Effetto hover */
  .scroll-to-top:hover {
    background: var(--turchese-hover);        /* Colore più scuro al hover */
    transform: translateY(-3px);               /* Solleva leggermente */
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3); /* Ombra più pronunciata */
  }
  
  /* Effetto active (click) */
  .scroll-to-top:active {
    transform: translateY(-1px);               /* Riduce il sollevamento */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Ombra normale */
  }
  
  /* Dark mode per pulsante torna su */
  body.dark-mode .scroll-to-top {
    background: var(--turchese);              /* Stesso colore in dark mode */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4); /* Ombra più scura */
  }
  
  body.dark-mode .scroll-to-top:hover {
    background: var(--turchese-hover);        /* Hover in dark mode */
  }
  
  /* Responsive per mobile */
  @media (max-width: 768px) {
    .scroll-to-top {
      bottom: 1.5rem;                          /* Più vicino al basso */
      right: 1.5rem;                           /* Più vicino a destra */
      width: 2.75rem;                          /* Leggermente più piccolo */
      height: 2.75rem;                         /* Leggermente più piccolo */
      font-size: 1.3rem;                       /* Icona più piccola */
    }
  }
  
  @media (max-width: 480px) {
    .scroll-to-top {
      bottom: 1rem;                            /* Ancora più vicino al basso */
      right: 1rem;                             /* Ancora più vicino a destra */
      width: 2.5rem;                           /* Più piccolo su schermi piccoli */
      height: 2.5rem;                          /* Più piccolo su schermi piccoli */
      font-size: 1.2rem;                       /* Icona ancora più piccola */
    }
  }
  
  /* ========================================
     SEZIONE 24.7: BANNER INSTALLAZIONE PWA
     ======================================== */
  /* Banner per promuovere l'installazione dell'app come PWA */
  .pwa-install-banner {
    margin: 2rem 0 1.5rem 0;                 /* Spaziatura sopra e sotto */
    padding: 0;                               /* Reset padding */
    border-radius: 16px;                      /* Angoli arrotondati */
    overflow: hidden;                         /* Nasconde contenuto che esce */
    background: linear-gradient(135deg, var(--turchese) 0%, #17b7b1 100%); /* Gradiente turchese */
    box-shadow: 0 8px 24px rgba(0, 123, 138, 0.25); /* Ombra turchese */
    animation: slideUp 0.4s ease-out;         /* Animazione di entrata */
    transition: all 0.3s ease;                /* Transizione fluida */
  }
  
  .pwa-install-banner:hover {
    box-shadow: 0 12px 32px rgba(0, 123, 138, 0.35); /* Ombra più pronunciata al hover */
    transform: translateY(-2px);              /* Solleva leggermente */
  }
  
  /* Contenuto principale del banner */
  .pwa-install-content {
    display: flex;                            /* Layout flex */
    justify-content: space-between;           /* Spazia elementi ai lati */
    align-items: center;                      /* Centra verticalmente */
    padding: 1.25rem 1.5rem;                  /* Padding interno */
    gap: 1rem;                                /* Spazio tra elementi */
  }
  
  /* Sezione testo del banner */
  .pwa-install-text {
    display: flex;                            /* Layout flex */
    flex-direction: column;                   /* Disponi in colonna */
    gap: 0.25rem;                             /* Piccolo spazio tra titolo e sottotitolo */
    flex: 1;                                  /* Occupa spazio disponibile */
  }
  
  /* Titolo del banner */
  .pwa-install-title {
    font-size: 1.125rem;                      /* Testo leggermente più grande */
    font-weight: 700;                         /* Grassetto */
    color: white;                             /* Testo bianco */
    display: flex;                            /* Per allineare icona */
    align-items: center;                      /* Centra verticalmente */
    gap: 0.5rem;                              /* Spazio tra emoji e testo */
  }
  
  /* Sottotitolo del banner */
  .pwa-install-subtitle {
    font-size: 0.875rem;                      /* Testo più piccolo */
    color: rgba(255, 255, 255, 0.9);         /* Bianco leggermente trasparente */
    font-weight: 400;                         /* Peso normale */
  }
  
  /* Contenitore azioni (pulsanti) */
  .pwa-install-actions {
    display: flex;                            /* Layout flex */
    gap: 0.75rem;                             /* Spazio tra pulsanti */
    align-items: center;                      /* Centra verticalmente */
  }
  
  /* Stili comuni per i pulsanti PWA */
  .pwa-btn {
    padding: 0.625rem 1.25rem;                /* Padding interno */
    border-radius: 8px;                       /* Angoli arrotondati */
    border: none;                             /* Nessun bordo */
    font-size: 0.9375rem;                     /* Dimensione font */
    font-weight: 600;                         /* Semi-grassetto */
    cursor: pointer;                          /* Cursore pointer */
    transition: all 0.2s ease;                /* Transizione fluida */
    white-space: nowrap;                      /* Testo su una riga */
  }
  
  /* Pulsante primario (Installa) */
  .pwa-btn-primary {
    background: white;                        /* Sfondo bianco */
    color: var(--turchese);                   /* Testo turchese */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); /* Ombra leggera */
  }
  
  .pwa-btn-primary:hover {
    background: #f8f9fa;                      /* Grigio chiarissimo al hover */
    transform: translateY(-1px);              /* Solleva leggermente */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Ombra più pronunciata */
  }
  
  .pwa-btn-primary:active {
    transform: translateY(0);                 /* Reset posizione al click */
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15); /* Ombra ridotta */
  }
  
  /* Pulsante secondario (Più tardi) */
  .pwa-btn-secondary {
    background: rgba(255, 255, 255, 0.2);    /* Sfondo bianco semi-trasparente */
    color: white;                             /* Testo bianco */
    backdrop-filter: blur(10px);              /* Effetto blur glassmorphism */
    -webkit-backdrop-filter: blur(10px);      /* Safari support */
  }
  
  .pwa-btn-secondary:hover {
    background: rgba(255, 255, 255, 0.3);    /* Più opaco al hover */
    transform: translateY(-1px);              /* Solleva leggermente */
  }
  
  .pwa-btn-secondary:active {
    transform: translateY(0);                 /* Reset posizione al click */
    background: rgba(255, 255, 255, 0.25);   /* Leggermente meno opaco */
  }
  
  /* Sezione hint per iOS */
  .pwa-ios-hint {
    background: rgba(255, 255, 255, 0.15);   /* Sfondo semi-trasparente */
    backdrop-filter: blur(10px);              /* Effetto blur */
    -webkit-backdrop-filter: blur(10px);      /* Safari support */
    padding: 1.25rem 1.5rem;                  /* Padding interno */
    border-top: 1px solid rgba(255, 255, 255, 0.2); /* Bordo superiore */
    color: white;                             /* Testo bianco */
  }
  
  /* Titolo hint iOS */
  .ios-hint-title {
    font-size: 1rem;                          /* Dimensione font */
    font-weight: 600;                         /* Semi-grassetto */
    margin-bottom: 0.75rem;                   /* Spazio sotto */
    display: flex;                            /* Per allineare icona */
    align-items: center;                      /* Centra verticalmente */
    gap: 0.5rem;                              /* Spazio tra emoji e testo */
  }
  
  /* Lista step iOS */
  .ios-hint-steps {
    list-style: none;                         /* Rimuove bullets default */
    padding: 0;                               /* Reset padding */
    margin: 0 0 0.75rem 0;                    /* Margine sotto */
    display: flex;                            /* Layout flex */
    flex-direction: column;                   /* Disponi in colonna */
    gap: 0.5rem;                              /* Spazio tra step */
  }
  
  .ios-hint-steps li {
    display: flex;                            /* Layout flex */
    align-items: flex-start;                  /* Allinea in alto */
    gap: 0.5rem;                              /* Spazio tra numero e testo */
    line-height: 1.5;                         /* Altezza linea */
  }
  
  /* Numero dello step */
  .step-number {
    background: rgba(255, 255, 255, 0.25);   /* Sfondo semi-trasparente */
    color: white;                             /* Testo bianco */
    border-radius: 50%;                       /* Completamente rotondo */
    width: 1.5rem;                            /* Larghezza fissa */
    height: 1.5rem;                           /* Altezza fissa */
    display: inline-flex;                     /* Flex per centrare */
    align-items: center;                      /* Centra verticalmente */
    justify-content: center;                  /* Centra orizzontalmente */
    font-size: 0.75rem;                       /* Font piccolo */
    font-weight: 700;                         /* Grassetto */
    flex-shrink: 0;                           /* Non rimpicciolire */
  }
  
  /* Icone iOS */
  .ios-share-icon,
  .ios-plus-icon {
    display: inline-block;                    /* Inline */
    margin: 0 0.25rem;                        /* Margine laterale */
  }
  
  /* Nota finale iOS */
  .ios-hint-note {
    font-size: 0.875rem;                      /* Font leggermente più piccolo */
    font-style: italic;                       /* Corsivo */
    color: rgba(255, 255, 255, 0.85);        /* Leggermente trasparente */
    padding-top: 0.5rem;                      /* Padding sopra */
    border-top: 1px solid rgba(255, 255, 255, 0.15); /* Bordo superiore */
  }
  
  /* Animazione slide-up */
  @keyframes slideUp {
    from {
      opacity: 0;                             /* Inizia invisibile */
      transform: translateY(20px);            /* Inizia spostato in basso */
    }
    to {
      opacity: 1;                             /* Finisce visibile */
      transform: translateY(0);               /* Finisce nella posizione normale */
    }
  }
  
  /* Dark mode per banner PWA */
  body.dark-mode .pwa-install-banner {
    background: linear-gradient(135deg, #0d5e66 0%, #0a4d54 100%); /* Gradiente più scuro */
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4); /* Ombra più scura */
  }
  
  body.dark-mode .pwa-install-banner:hover {
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5); /* Ombra ancora più scura al hover */
  }
  
  body.dark-mode .pwa-btn-primary {
    background: rgba(255, 255, 255, 0.95);   /* Bianco leggermente trasparente */
    color: #0d5e66;                           /* Turchese scuro */
  }
  
  body.dark-mode .pwa-btn-primary:hover {
    background: white;                        /* Bianco pieno al hover */
  }
  
  /* Responsive per mobile */
  @media (max-width: 768px) {
    .pwa-install-banner {
      margin: 1.5rem 0 1rem 0;                /* Margini ridotti */
      border-radius: 12px;                    /* Angoli meno arrotondati */
    }
    
    .pwa-install-content {
      flex-direction: column;                 /* Disponi in colonna */
      align-items: stretch;                   /* Allunga elementi */
      padding: 1rem;                          /* Padding ridotto */
      gap: 0.75rem;                           /* Spazio ridotto */
    }
    
    .pwa-install-text {
      text-align: center;                     /* Centra testo */
    }
    
    .pwa-install-title {
      font-size: 1rem;                        /* Font leggermente più piccolo */
      justify-content: center;                /* Centra contenuto */
    }
    
    .pwa-install-subtitle {
      font-size: 0.8125rem;                   /* Font più piccolo */
    }
    
    .pwa-install-actions {
      flex-direction: row;                    /* Mantieni in riga */
      justify-content: center;                /* Centra */
      width: 100%;                            /* Larghezza piena */
    }
    
    .pwa-btn {
      flex: 1;                                /* Occupa spazio uguale */
      padding: 0.75rem 1rem;                  /* Padding maggiore per tap */
      font-size: 0.875rem;                    /* Font leggermente più piccolo */
    }
    
    .pwa-ios-hint {
      padding: 1rem;                          /* Padding ridotto */
    }
    
    .ios-hint-title {
      font-size: 0.9375rem;                   /* Font leggermente più piccolo */
    }
    
    .ios-hint-steps {
      font-size: 0.875rem;                    /* Font più piccolo */
    }
  }
  
  @media (max-width: 480px) {
    .pwa-install-content {
      padding: 0.875rem;                      /* Padding ancora più ridotto */
    }
    
    .pwa-install-actions {
      flex-direction: column;                 /* Disponi pulsanti in colonna */
      gap: 0.5rem;                            /* Spazio ridotto */
    }
    
    .pwa-btn {
      width: 100%;                            /* Larghezza piena */
    }
    
    .ios-hint-steps {
      gap: 0.625rem;                          /* Spazio ridotto tra step */
    }
  }
  
  /* ========================================
     SEZIONE 25: DARK MODE UTILITY
     ======================================== */
  
  /* SOTTOSEZIONE 25.2: Dark mode per bottoni */
  .dark .calculate-btn {
    background: var(--glass-bg-dark);            /* Sfondo glassmorphism scuro */
    color: rgba(255, 255, 255, 1);              /* Testo bianco pieno (100% opaco) */
    border-color: var(--glass-border-dark);      /* Bordo glassmorphism scuro */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);  /* Ombra scura */
  }
  
  .dark .calculate-btn:hover {
    background: rgba(255, 255, 255, 0.1);       /* Sfondo bianco trasparente al hover */
    border-color: rgba(255, 255, 255, 0.3);     /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);              /* Testo bianco pieno */
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);  /* Ombra scura più profonda */
  }
  
  .dark .reset-btn {
    background: var(--glass-bg-dark);            /* Sfondo glassmorphism scuro */
    color: rgba(255, 255, 255, 1);              /* Testo bianco pieno (100% opaco) */
    border-color: var(--glass-border-dark);      /* Bordo glassmorphism scuro */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);   /* Ombra scura */
  }
  
  .dark .reset-btn:hover {
    background: rgba(255, 255, 255, 0.1);       /* Sfondo bianco trasparente al hover */
    border-color: rgba(255, 255, 255, 0.3);     /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);              /* Testo bianco pieno */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);  /* Ombra scura più profonda */
  }
  
  .dark .route-button {
    background: var(--glass-bg-dark);            /* Sfondo glassmorphism scuro */
    color: rgba(255, 255, 255, 1);              /* Testo bianco pieno (100% opaco) */
    border-color: var(--glass-border-dark);      /* Bordo glassmorphism scuro */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);   /* Ombra scura */
  }
  
  .dark .route-button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.1);       /* Sfondo bianco trasparente al hover */
    border-color: rgba(255, 255, 255, 0.3);     /* Bordo bianco trasparente */
    color: rgba(255, 255, 255, 1);              /* Testo bianco pieno */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);  /* Ombra scura più profonda */
  }
  
  .dark .route-button:disabled {
    background: rgba(30, 41, 59, 0.3);          /* Sfondo scuro trasparente */
    border-color: rgba(148, 163, 184, 0.1);     /* Bordo grigio chiaro trasparente */
    color: rgba(148, 163, 184, 0.5);            /* Testo grigio chiaro */
  }
  
  /* SOTTOSEZIONE 25.3: Dark mode per card prezzi */
  .dark .price-card {
    background: rgba(30, 41, 59, 0.3);          /* Sfondo scuro trasparente */
    border-color: rgba(148, 163, 184, 0.2);     /* Bordo grigio chiaro trasparente */
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);  /* Ombra scura */
  }
  
  .dark .price-label {
    color: rgba(203, 213, 225, 0.8);            /* Testo grigio chiaro con 80% opacità */
  }
  
  .dark .price-code {
    color: rgba(248, 250, 252, 0.95);           /* Testo chiaro con 95% opacità */
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);  /* Ombra testo leggera */
  }
  
  .dark .price-value {
    color: rgba(248, 250, 252, 0.95);           /* Testo chiaro con 95% opacità */
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);  /* Ombra testo leggera */
  }
  
  .dark .price-divider {
    background: rgba(255, 255, 255, 0.2);        /* Bordo bianco trasparente */
  }
  
  /* SOTTOSEZIONE 25.4: Dark mode per ricerca */
  .dark .search-box {
    background: var(--glass-bg-dark);            /* Sfondo glassmorphism scuro */
    border-color: var(--glass-border-dark);      /* Bordo glassmorphism scuro */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);  /* Ombra scura */
  }
  
  .dark .search-input {
    color: rgba(248, 250, 252, 0.95);           /* Testo chiaro */
  }
  
  .dark .search-input::placeholder {
    color: rgba(148, 163, 184, 0.7);            /* Placeholder grigio chiaro */
  }
  
  .dark .search-icon {
    color: rgba(148, 163, 184, 0.7);            /* Icona grigio chiaro */
  }
  
  .dark .search-box:focus-within {
    border-color: var(--turchese);               /* Bordo turchese al focus */
    box-shadow: 0 0 0 3px rgba(23, 183, 177, 0.2);  /* Ombra turchese */
  }
  
  .dark .search-box:focus-within .search-icon {
    color: var(--turchese);                      /* Icona turchese al focus */
  }
  
  /* SOTTOSEZIONE 25.5: Dark mode per selettori linea */
  .dark .line-selector-container {
    border-top-color: rgba(255, 255, 255, 0.4);  /* Bordo superiore bianco trasparente */
  }
  
  /* SOTTOSEZIONE 25.6: Dark mode per footer */
  .dark .telegram-link {
    color: rgba(248, 250, 252, 0.8);            /* Testo chiaro con opacità */
  }
  
  .dark .telegram-link:hover {
    color: var(--turchese);                     /* Colore turchese al hover */
  }
  
  .dark .update-info {
    color: rgba(248, 250, 252, 0.6);            /* Testo chiaro con opacità ridotta */
  }
  

/* ========================================
   SEZIONE 26: MOBILE VERSION CARD
   ======================================== */

.mobile-version-card {
  background: #ffffff;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  padding: 1rem;
  margin: 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  width: calc(100% - 2rem);
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: left;
}

.mobile-version-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  border-color: #17b7b1;
}

.mobile-version-card:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.version-info {
  flex: 1;
}

.version-title {
  font-size: 1.05rem;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 0.5rem;
  letter-spacing: 0.3px;
}

.version-number {
  font-size: 1.1rem;
  font-weight: 700;
  color: #17b7b1;
  margin-bottom: 0.25rem;
}

.version-date {
  font-size: 0.85rem;
  color: #64748b;
}


.dark .mobile-version-card {
  background: #1b2734;
  border-color: #374151;
}

.dark .version-title {
  color: #e2e8f0;
}

.dark .version-number {
  color: #17b7b1;
}

.dark .version-date {
  color: #94a3b8;
}

/* =====================================
   SEZIONE 18: MODAL IMPOSTAZIONI
   ===================================== */

/* Modal Overlay */
.settings-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  z-index: 10000;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.settings-modal.show {
  opacity: 1;
}

/* Modal Content */
.settings-modal-content {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  box-shadow: var(--glass-shadow);
  width: 90%;
  max-width: 600px;
  max-height: 80vh;
  margin: 20px;
  display: flex;
  flex-direction: column;
  transform: scale(0.9);
  transition: transform 0.3s ease;
  overflow: hidden;
}

.settings-modal.show .settings-modal-content {
  transform: scale(1);
}

/* Header - Stile navbar con gradient turchese (come modal fermate) */
.settings-modal-header {
  background: linear-gradient(135deg, 
    rgba(0, 123, 138, 0.9) 0%, 
    rgba(0, 123, 138, 0.7) 50%, 
    rgba(0, 123, 138, 0.5) 100%);
  border-bottom: 1px solid rgba(0, 123, 138, 0.3);
  box-shadow: 0 4px 12px 0 rgba(0, 123, 138, 0.4);
  border-radius: 16px 16px 0 0;
  padding: 10px 20px;
  min-height: 52px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.settings-modal-header h3 {
  margin: 0;
  font-size: 1.3rem;
  font-weight: 700;
  color: white;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.settings-modal-close {
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  font-size: 1.5rem;
  color: white;
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: all 0.2s ease;
  font-weight: 300;
  line-height: 1;
}

.settings-modal-close:hover {
  background: rgba(255, 255, 255, 0.25);
  transform: rotate(90deg);
}

/* Tabs */
.settings-tabs {
  display: flex;
  border-bottom: 2px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.03);
}

.settings-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 1rem;
  background: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  color: var(--testo-secondario);
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.settings-tab:hover {
  background: rgba(0, 123, 138, 0.1);
  color: var(--turchese);
}

.settings-tab.active {
  color: var(--turchese);
  border-bottom-color: var(--turchese);
  background: rgba(0, 123, 138, 0.05);
  font-weight: 600;
}

.tab-icon {
  font-size: 1.2rem;
}

/* Content */
.settings-content {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
}

.settings-tab-content {
  display: none;
}

.settings-tab-content.active {
  display: block;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Section */
.settings-section {
  margin-bottom: 1.5rem;
}

.settings-section-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--testo-principale);
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--glass-border);
}

/* Settings Item */
.settings-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  margin-bottom: 0.75rem;
  transition: all 0.2s ease;
}

.settings-item:hover {
  background: rgba(0, 123, 138, 0.05);
  border-color: var(--turchese);
  transform: translateX(4px);
}

.settings-item.active {
  background: rgba(34, 197, 94, 0.1);
  border-color: #22c55e;
  border-width: 2px;
}

.settings-item-vertical {
  flex-direction: column;
  align-items: stretch;
  gap: 1rem;
}

.settings-item-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.settings-item-icon {
  font-size: 1.5rem;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 123, 138, 0.1);
  border-radius: 10px;
}

.settings-item-text {
  flex: 1;
}

.settings-item-label {
  font-size: 1rem;
  font-weight: 600;
  color: var(--testo-principale);
  margin-bottom: 0.25rem;
}

.settings-item-description {
  font-size: 0.85rem;
  color: var(--testo-secondario);
  line-height: 1.4;
}

/* Toggle Switch */
.settings-toggle {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 28px;
  flex-shrink: 0;
}

.settings-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.settings-toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #cbd5e1;
  transition: all 0.3s ease;
  border-radius: 28px;
}

.settings-toggle-slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: all 0.3s ease;
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.settings-toggle input:checked + .settings-toggle-slider {
  background-color: #22c55e;
}

.settings-toggle input:checked + .settings-toggle-slider:before {
  transform: translateX(22px);
}

.settings-toggle input:focus + .settings-toggle-slider {
  box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
}

/* Theme Options */
.settings-theme-options {
  display: flex;
  gap: 0.75rem;
  width: 100%;
}

.settings-theme-option {
  flex: 1;
  cursor: pointer;
}

.settings-theme-option input[type="radio"] {
  display: none;
}

.theme-option-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 0.75rem;
  background: var(--glass-bg);
  border: 2px solid var(--glass-border);
  border-radius: 12px;
  transition: all 0.2s ease;
  cursor: pointer;
}

.settings-theme-option:hover .theme-option-card {
  background: rgba(0, 123, 138, 0.1);
  border-color: var(--turchese);
  transform: translateY(-2px);
}

.settings-theme-option input:checked + .theme-option-card {
  background: rgba(34, 197, 94, 0.15);
  border-color: #22c55e;
  border-width: 3px;
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
}

.theme-option-icon {
  font-size: 2rem;
}

.theme-option-label {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--testo-principale);
}

.theme-option-description {
  font-size: 0.75rem;
  color: var(--testo-secondario);
  text-align: center;
}

/* Dark mode styles for theme options */
.dark .theme-option-card {
  background: rgba(255, 255, 255, 0.03);
  border-color: var(--glass-border-dark);
}

.dark .settings-theme-option:hover .theme-option-card {
  background: rgba(23, 183, 177, 0.1);
}

.dark .settings-theme-option input:checked + .theme-option-card {
  background: rgba(34, 197, 94, 0.2);
  border-color: #22c55e;
}

/* Mobile responsive for theme options */
@media (max-width: 600px) {
  .settings-theme-options {
    flex-direction: column;
  }
  
  .theme-option-card {
    flex-direction: row;
    justify-content: flex-start;
    padding: 1rem;
    gap: 1rem;
  }
  
  .theme-option-icon {
    font-size: 1.5rem;
  }
  
  .theme-option-description {
    text-align: left;
  }
}

/* Font Size Buttons */
.settings-font-buttons {
  display: flex;
  gap: 0.75rem;
  width: 100%;
}

.settings-font-btn {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 0.5rem;
  background: var(--glass-bg);
  border: 2px solid var(--glass-border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--testo-principale);
}

.settings-font-btn:hover {
  background: rgba(0, 123, 138, 0.1);
  border-color: var(--turchese);
  transform: translateY(-2px);
}

.settings-font-btn.active {
  background: rgba(34, 197, 94, 0.15);
  border-color: #22c55e;
  color: #15803d;
  font-weight: 600;
}

.settings-font-btn .font-sample {
  font-size: 1.5rem;
  font-weight: 600;
}

.settings-font-btn[data-size="normal"] .font-sample {
  font-size: 1.2rem;
}

.settings-font-btn[data-size="large"] .font-sample {
  font-size: 1.5rem;
}

.settings-font-btn[data-size="xlarge"] .font-sample {
  font-size: 1.8rem;
}

.settings-font-btn .font-label {
  font-size: 0.75rem;
  font-weight: 500;
}

/* Dark Mode Styles */
.dark .settings-modal-content {
  background: var(--glass-bg-dark);
  border-color: var(--glass-border-dark);
  box-shadow: var(--glass-shadow-dark);
}

.dark .settings-modal-header {
  /* Mantieni lo stesso gradient turchese anche in dark mode */
  border-bottom-color: var(--glass-border-dark);
}

.dark .settings-tabs {
  border-color: var(--glass-border-dark);
  background: rgba(0, 0, 0, 0.1);
}

.dark .settings-tab:hover {
  background: rgba(23, 183, 177, 0.1);
}

.dark .settings-tab.active {
  background: rgba(23, 183, 177, 0.05);
}

.dark .settings-item {
  background: rgba(255, 255, 255, 0.03);
  border-color: var(--glass-border-dark);
}

.dark .settings-item:hover {
  background: rgba(23, 183, 177, 0.1);
}

.dark .settings-item-icon {
  background: rgba(23, 183, 177, 0.15);
}

.dark .settings-font-btn {
  background: rgba(255, 255, 255, 0.03);
  border-color: var(--glass-border-dark);
}

.dark .settings-font-btn:hover {
  background: rgba(23, 183, 177, 0.1);
}

.dark .settings-font-btn.active {
  background: rgba(34, 197, 94, 0.2);
  color: #86efac;
}

.dark .settings-item.active {
  background: rgba(34, 197, 94, 0.15);
  border-color: #86efac;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .settings-modal-content {
    width: 95%;
    max-height: 90vh;
    margin: 10px;
  }
  
  .settings-modal-header {
    padding: 10px 16px;
  }
  
  .settings-modal-header h3 {
    font-size: 1.1rem;
  }
  
  .settings-content {
    padding: 1rem;
  }
  
  .settings-tab {
    font-size: 0.9rem;
    padding: 0.75rem 0.5rem;
  }
  
  .tab-icon {
    font-size: 1rem;
  }
  
  .settings-item {
    padding: 0.75rem;
  }
  
  .settings-item-icon {
    font-size: 1.2rem;
    width: 35px;
    height: 35px;
  }
  
  .settings-item-label {
    font-size: 0.95rem;
  }
  
  .settings-item-description {
    font-size: 0.8rem;
  }
}

@media (max-width: 480px) {
  .settings-modal-content {
    margin: 10px;
    max-height: 90vh;
  }
  
  .settings-modal-header {
    padding: 10px 16px;
  }
  
  .settings-content {
    padding: 16px;
  }
}

/* =====================================
   SEZIONE 19: MODALITÀ CONTRASTO ALTO
   ===================================== */

.high-contrast {
  /* Aumenta contrasto testi */
  --testo-principale: #000000 !important;
  --testo-secondario: #1f2937 !important;
}

.high-contrast button,
.high-contrast .route-button,
.high-contrast .linea-select-btn {
  border-width: 2px !important;
  font-weight: 600 !important;
}

.high-contrast .main-card,
.high-contrast .price-card {
  border-width: 3px !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
}

.high-contrast .price-code,
.high-contrast .price-value {
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.high-contrast .navbar {
  border-bottom: 3px solid var(--turchese) !important;
}

/* Dark mode + Contrasto Alto */
.dark.high-contrast {
  --testo-principale: #ffffff !important;
  --testo-secondario: #e2e8f0 !important;
}

.dark.high-contrast .main-card,
.dark.high-contrast .price-card {
  border-color: #17b7b1 !important;
  border-width: 3px !important;
}

/* =====================================
   SEZIONE 20: MODALITÀ TOUCH FRIENDLY
   ===================================== */

.touch-friendly button,
.touch-friendly .route-button,
.touch-friendly .linea-select-btn,
.touch-friendly .reset-btn {
  min-height: 56px !important;
  padding: 1rem 1.5rem !important;
  font-size: 1.1rem !important;
}

.touch-friendly .mobile-nav-link,
.touch-friendly .mobile-nav-button {
  min-height: 60px !important;
  padding: 1.25rem 1.5rem !important;
}

.touch-friendly .settings-item {
  padding: 1.25rem !important;
  margin-bottom: 1rem !important;
}

.touch-friendly .settings-toggle {
  width: 60px;
  height: 34px;
}

.touch-friendly .settings-toggle-slider:before {
  height: 26px;
  width: 26px;
}

.touch-friendly .settings-toggle input:checked + .settings-toggle-slider:before {
  transform: translateX(26px);
}

.touch-friendly .settings-font-btn,
.touch-friendly .font-size-btn,
.touch-friendly .mobile-font-btn {
  padding: 1.25rem !important;
  min-height: 70px !important;
}

.touch-friendly .fermate-modal-list li,
.touch-friendly .linea-modal-item {
  min-height: 60px !important;
  padding: 1.25rem !important;
  margin-bottom: 0.5rem !important;
}

.touch-friendly .settings-tab {
  padding: 1.25rem !important;
  font-size: 1.1rem !important;
}

/* Spaziatura aumentata */
.touch-friendly .route-section {
  gap: 1.5rem !important;
}

.touch-friendly .form-group {
  margin-bottom: 2rem !important;
}

.touch-friendly .settings-modal-content {
  max-width: 700px !important;
}

/* Pulsanti più grandi su mobile */
@media (max-width: 768px) {
  .touch-friendly button,
  .touch-friendly .route-button {
    min-height: 64px !important;
    font-size: 1.15rem !important;
  }
  
  .touch-friendly .mobile-nav-link,
  .touch-friendly .mobile-nav-button {
    min-height: 68px !important;
    font-size: 1.1rem !important;
  }
}

/* ========================================
   TAB INFO E AGGIORNAMENTI
   Stili per la tab informazioni nel modal impostazioni
   ======================================== */

/* Card Info */
.info-card {
  background: var(--bianco);
  border: 1px solid var(--bordo);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.info-card-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--testo);
  margin: 0 0 1rem 0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Header Info App */
.info-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--bordo);
}

.info-logo {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  border: 2px solid var(--turchese);
  object-fit: contain;
}

.info-title h3 {
  margin: 0;
  font-size: 1.3rem;
  color: var(--testo);
}

.info-version {
  margin: 0.25rem 0 0 0;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--turchese);
}

.info-date {
  margin: 0.25rem 0 0 0;
  font-size: 0.8rem;
  color: var(--testo-secondario);
}

/* Descrizione */
.info-description {
  margin: 1rem 0;
  color: var(--testo-secondario);
  line-height: 1.6;
}

.info-description p {
  margin: 0;
}

/* Features Grid */
.info-features {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
  margin-top: 1rem;
}

.info-feature {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem;
  background: var(--grigio-chiaro);
  border-radius: 8px;
  font-size: 0.9rem;
}

.info-feature-icon {
  font-size: 1.2rem;
}

/* Update Items */
.update-item {
  padding: 1rem 0;
  border-bottom: 1px solid var(--bordo);
}

.update-item:last-of-type {
  border-bottom: none;
  padding-bottom: 0;
}

.update-version {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}

.update-badge {
  background: var(--turchese);
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.update-date {
  font-size: 0.85rem;
  color: var(--testo-secondario);
}

.update-title {
  font-weight: 600;
  color: var(--testo);
  margin: 0.5rem 0;
}

.update-list {
  margin: 0.5rem 0 0 0;
  padding-left: 1.5rem;
  color: var(--testo-secondario);
  line-height: 1.6;
}

.update-list li {
  margin: 0.25rem 0;
}

/* Link Info */
.info-link {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  margin-top: 1rem;
  background: var(--grigio-chiaro);
  border: 1px solid var(--bordo);
  border-radius: 8px;
  color: var(--testo);
  text-decoration: none;
  transition: all 0.2s ease;
}

.info-link:hover {
  background: var(--turchese);
  color: white;
  border-color: var(--turchese);
  transform: translateX(4px);
}

.info-link-icon {
  margin-right: 0.5rem;
}

/* Footer Info */
.info-footer {
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--bordo);
  text-align: center;
  color: var(--testo-secondario);
  font-size: 0.85rem;
}

.info-footer p {
  margin: 0.25rem 0;
}

.info-disclaimer {
  font-size: 0.8rem;
  opacity: 0.8;
}

/* Dark Mode */
.dark .info-card {
  background: var(--grigio-scuro);
  border-color: rgba(255, 255, 255, 0.1);
}

.dark .info-header {
  border-bottom-color: rgba(255, 255, 255, 0.1);
}

.dark .info-logo {
  border-color: var(--turchese-light);
}

.dark .info-feature {
  background: rgba(255, 255, 255, 0.05);
}

.dark .info-link {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
}

.dark .info-link:hover {
  background: var(--turchese);
  color: white;
}

.dark .update-item {
  border-bottom-color: rgba(255, 255, 255, 0.1);
}

.dark .info-footer {
  border-top-color: rgba(255, 255, 255, 0.1);
}

/* Responsive */
@media (max-width: 480px) {
  .info-features {
    grid-template-columns: 1fr;
  }
  
  .info-header {
    flex-direction: column;
    text-align: center;
  }
  
  .info-card {
    padding: 1rem;
  }
}

/* ========================================
   OTTIMIZZAZIONE DISPLAY - PRO
   Sezione avanzata per rilevamento e ottimizzazione DPR
   ======================================== */

.display-optimization-card {
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.03), rgba(0, 153, 170, 0.03));
  border: 1px solid rgba(23, 183, 177, 0.15);
  border-radius: 12px;
  padding: 1.5rem;
  margin-top: 1rem;
}

.display-detection {
  margin-bottom: 1rem;
}

.display-detection-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.display-detection-icon {
  font-size: 2.5rem;
  line-height: 1;
}

.display-detection-title {
  font-size: 0.85rem;
  color: var(--testo-secondario);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.display-detection-type {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

#display-type-text {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--testo);
}

#display-type-text.retina {
  color: var(--turchese);
}

#display-type-text.super-retina {
  color: #22c55e;
}

.display-dpr-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
  font-family: monospace;
  background: var(--grigio-chiaro);
  color: var(--testo-secondario);
}

.display-dpr-badge.retina {
  background: var(--turchese);
  color: white;
}

.display-dpr-badge.super-retina {
  background: #22c55e;
  color: white;
}

.display-specs {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-top: 1rem;
}

.display-spec-item {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  padding: 0.75rem;
  background: var(--bianco);
  border: 1px solid var(--bordo);
  border-radius: 8px;
}

.display-spec-label {
  font-size: 0.75rem;
  color: var(--testo-secondario);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  font-weight: 600;
}

.display-spec-value {
  font-size: 1rem;
  font-weight: 700;
  color: var(--testo);
  font-family: monospace;
}

/* Scale Preset Selector */
.scale-preset-selector {
  margin-top: 1rem;
}

.scale-preset-description {
  font-size: 0.85rem;
  color: var(--testo-secondario);
  margin-bottom: 1rem;
  text-align: center;
}

.scale-preset-options {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.scale-preset-option {
  position: relative;
  cursor: pointer;
}

.scale-preset-option input[type="radio"] {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.scale-preset-card {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.875rem 1.25rem;
  background: var(--bianco);
  border: 2px solid var(--bordo);
  border-radius: 10px;
  transition: all 0.3s ease;
}

.scale-preset-card:hover {
  border-color: rgba(23, 183, 177, 0.4);
  background: rgba(23, 183, 177, 0.02);
  transform: translateX(4px);
}

.scale-preset-option input[type="radio"]:checked + .scale-preset-card {
  border-color: var(--turchese);
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.08), rgba(0, 153, 170, 0.08));
  box-shadow: 
    0 0 0 3px rgba(23, 183, 177, 0.1),
    0 2px 8px rgba(23, 183, 177, 0.15);
}

.scale-preset-info {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  gap: 1rem;
}

.scale-preset-name {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--testo);
}

.scale-preset-percent {
  font-size: 0.9rem;
  font-weight: 700;
  font-family: monospace;
  color: var(--turchese);
  padding: 0.25rem 0.75rem;
  background: rgba(23, 183, 177, 0.1);
  border-radius: 8px;
}

.scale-preset-option input[type="radio"]:checked + .scale-preset-card .scale-preset-percent {
  background: var(--turchese);
  color: white;
}

/* Preset Selector */
.display-preset-selector {
  margin-top: 1rem;
}

.preset-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.preset-header-icon {
  font-size: 1.5rem;
  line-height: 1;
}

.preset-header-title {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--testo);
  margin-bottom: 0.25rem;
}

.preset-header-description {
  font-size: 0.8rem;
  color: var(--testo-secondario);
}

.preset-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.preset-option {
  position: relative;
  cursor: pointer;
}

.preset-option input[type="radio"] {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.preset-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: var(--bianco);
  border: 2px solid var(--bordo);
  border-radius: 12px;
  transition: all 0.3s ease;
}

.preset-card:hover {
  border-color: rgba(23, 183, 177, 0.4);
  background: rgba(23, 183, 177, 0.02);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.preset-option input[type="radio"]:checked + .preset-card {
  border-color: var(--turchese);
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.08), rgba(0, 153, 170, 0.08));
  box-shadow: 
    0 0 0 3px rgba(23, 183, 177, 0.1),
    0 4px 12px rgba(23, 183, 177, 0.15);
}

.preset-icon {
  font-size: 2rem;
  line-height: 1;
  flex-shrink: 0;
}

.preset-info {
  flex: 1;
  min-width: 0;
}

.preset-name {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--testo);
  margin-bottom: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.preset-description {
  font-size: 0.75rem;
  color: var(--testo-secondario);
  line-height: 1.4;
}

/* Badge Consigliato */
.recommended-badge {
  display: inline-block;
  padding: 0.2rem 0.6rem;
  margin-left: 0;
  border-radius: 12px;
  font-size: 0.65rem;
  font-weight: 700;
  background: linear-gradient(135deg, #22c55e, #16a34a);
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  animation: pulseGlow 2s ease-in-out infinite;
}

@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0);
  }
}

/* Suggerimenti Display */
.display-recommendations {
  margin-top: 1rem;
  padding: 1rem;
  background: var(--bianco);
  border: 1px solid var(--bordo);
  border-left: 4px solid var(--turchese);
  border-radius: 8px;
}

.recommendation-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: var(--testo);
}

.recommendation-icon {
  font-size: 1.3rem;
}

.recommendation-title {
  font-size: 0.95rem;
}

.recommendation-list {
  margin: 0;
  padding-left: 1.5rem;
  color: var(--testo-secondario);
  line-height: 1.8;
}

.recommendation-list li {
  margin: 0.5rem 0;
}

.recommendation-list strong {
  color: var(--turchese);
  font-weight: 600;
}

/* Interface Scale Classes */
html {
  font-size: 16px; /* Base size - 100% */
}

html.scale-75 {
  font-size: 12px; /* 75% */
}

html.scale-85 {
  font-size: 13.6px; /* 85% */
}

html.scale-100 {
  font-size: 16px; /* 100% - default */
}

html.scale-115 {
  font-size: 18.4px; /* 115% */
}

html.scale-125 {
  font-size: 20px; /* 125% */
}

/* Dark Mode */
.dark .scale-preset-card {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
}

.dark .scale-preset-card:hover {
  border-color: rgba(0, 153, 170, 0.4);
  background: rgba(0, 153, 170, 0.08);
}

.dark .scale-preset-option input[type="radio"]:checked + .scale-preset-card {
  border-color: var(--turchese-light);
  background: linear-gradient(135deg, rgba(0, 153, 170, 0.15), rgba(23, 183, 177, 0.15));
  box-shadow: 
    0 0 0 3px rgba(0, 153, 170, 0.15),
    0 2px 8px rgba(0, 153, 170, 0.2);
}

.dark .scale-preset-percent {
  background: rgba(0, 153, 170, 0.2);
  color: var(--turchese-light);
}

.dark .scale-preset-option input[type="radio"]:checked + .scale-preset-card .scale-preset-percent {
  background: var(--turchese-light);
  color: var(--grigio-scuro);
}

.dark .display-optimization-card {
  background: linear-gradient(135deg, rgba(0, 153, 170, 0.08), rgba(23, 183, 177, 0.08));
  border-color: rgba(0, 153, 170, 0.25);
}

.dark .display-spec-item {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
}

.dark .display-dpr-badge {
  background: rgba(255, 255, 255, 0.1);
}

.dark .preset-card {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
}

.dark .preset-card:hover {
  border-color: rgba(0, 153, 170, 0.4);
  background: rgba(0, 153, 170, 0.08);
}

.dark .preset-option input[type="radio"]:checked + .preset-card {
  border-color: var(--turchese-light);
  background: linear-gradient(135deg, rgba(0, 153, 170, 0.15), rgba(23, 183, 177, 0.15));
  box-shadow: 
    0 0 0 3px rgba(0, 153, 170, 0.15),
    0 4px 12px rgba(0, 153, 170, 0.2);
}

.dark .display-recommendations {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
  border-left-color: var(--turchese-light);
}

/* Responsive */
@media (max-width: 480px) {
  .display-specs {
    grid-template-columns: 1fr;
  }
  
  .display-detection-header {
    flex-direction: column;
    align-items: flex-start;
    text-align: left;
  }
  
  .display-optimization-card {
    padding: 1rem;
  }
  
  .preset-options {
    grid-template-columns: 1fr;
  }
  
  .preset-card {
    padding: 0.875rem;
  }
  
  .preset-icon {
    font-size: 1.75rem;
  }
}

/* Media Queries per Ottimizzazioni HiDPI */
@media (-webkit-min-device-pixel-ratio: 2), 
       (min-resolution: 192dpi),
       (min-resolution: 2dppx) {
  
  body.display-optimized {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body.display-optimized .info-card,
  body.display-optimized .settings-item,
  body.display-optimized .pwa-bottom-nav {
    border-width: 0.5px;
  }
  
  body.display-optimized .card,
  body.display-optimized .info-card {
    box-shadow: 
      0 1px 3px rgba(0, 0, 0, 0.08),
      0 1px 2px rgba(0, 0, 0, 0.06);
  }
  
  body.display-optimized .pwa-logo-img,
  body.display-optimized .info-logo,
  body.display-optimized .navbar-logo {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

@media (-webkit-min-device-pixel-ratio: 3),
       (min-resolution: 288dpi),
       (min-resolution: 3dppx) {
  
  body.display-optimized .info-card,
  body.display-optimized .settings-item {
    border-width: 0.33px;
  }
  
  body.display-optimized {
    text-rendering: optimizeLegibility;
  }
}

/* ========================================
   PULSANTE VERIFICA AGGIORNAMENTI PWA
   Pulsante nella tab Info per verificare aggiornamenti
   ======================================== */

.update-check-card {
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.05), rgba(0, 153, 170, 0.05));
  border: 1px solid rgba(23, 183, 177, 0.3);
}

.update-check-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.update-check-icon {
  font-size: 2.5rem;
  animation: rotate-slow 3s linear infinite;
}

@keyframes rotate-slow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.update-check-text {
  flex: 1;
}

.update-check-title {
  margin: 0 0 0.25rem 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--testo-principale);
}

.update-check-description {
  margin: 0;
  font-size: 0.9rem;
  color: var(--testo-secondario);
}

.update-check-btn {
  width: 100%;
  padding: 1rem;
  background: var(--turchese);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(23, 183, 177, 0.3);
}

.update-check-btn:hover {
  background: var(--turchese-scuro);
  box-shadow: 0 6px 16px rgba(23, 183, 177, 0.4);
  transform: translateY(-2px);
}

.update-check-btn:active {
  transform: translateY(0);
}

.update-check-btn-icon {
  font-size: 1.2rem;
}

.update-check-btn-text {
  font-size: 1rem;
}

/* ========================================
   PWA BOTTOM NAVIGATION
   Barra di navigazione inferiore moderna e sospesa
   Visibile SOLO in modalità PWA (standalone)
   ======================================== */

/* Brand Header TPL (stile navbar in alto) */
.pwa-brand-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  
  /* Trasparenza glassmorphism come navbar originale */
  background: linear-gradient(135deg, 
    rgba(0, 123, 138, 0.9) 0%, 
    rgba(0, 123, 138, 0.7) 50%, 
    rgba(0, 123, 138, 0.5) 100%
  );
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  
  /* Bordi e ombre */
  border-bottom: 1px solid rgba(0, 123, 138, 0.3);
  box-shadow: 0 4px 12px 0 rgba(0, 123, 138, 0.4);
  
  /* Layout */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  
  /* Dimensioni */
  padding: 9px 2rem !important;
  padding-top: max(9px, env(safe-area-inset-top)) !important;
  padding-bottom: 9px !important;
  
  /* Animazioni */
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
  z-index: 999;
}

/* Effetto rifrazione della luce per brand header */
.pwa-brand-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 60%;
  background: linear-gradient(180deg, 
    rgba(255, 255, 255, 0.15) 0%, 
    transparent 100%
  );
  pointer-events: none;
  z-index: 1;
  border-radius: inherit;
}

/* Contenuto brand header sopra rifrazione */
.pwa-brand-header > * {
  position: relative;
  z-index: 2;
}

/* Barra di progresso scroll sotto brand header */
.pwa-brand-header {
  --scroll-progress: 0%;
}

.pwa-brand-header::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  width: var(--scroll-progress);
  background: linear-gradient(90deg, 
    rgba(255, 255, 255, 0.9),
    rgba(255, 255, 255, 0.7)
  );
  transition: width 0.1s ease-out;
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
  border-radius: 0 3px 3px 0;
  z-index: 3;
}

/* Nascosta di default */
.pwa-brand-header[style*="display: none"] {
  transform: translateY(-100%);
  opacity: 0;
  pointer-events: none;
}

/* Visibile quando attiva */
.pwa-brand-header:not([style*="display: none"]) {
  transform: translateY(0);
  opacity: 1;
  pointer-events: all;
}

/* Barra di navigazione (fisso in basso) */
.pwa-bottom-nav {
  position: fixed;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  
  /* Trasparenza glassmorphism come navbar originale */
  background: linear-gradient(135deg, 
    rgba(0, 123, 138, 0.9) 0%, 
    rgba(0, 123, 138, 0.7) 50%, 
    rgba(0, 123, 138, 0.5) 100%
  );
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  
  /* Bordi e ombre */
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    0 2px 12px rgba(0, 123, 138, 0.4);
  
  /* Layout */
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
  
  /* Dimensioni */
  padding: 0.75rem 2rem;
  padding-bottom: max(0.75rem, calc(env(safe-area-inset-bottom) + 0.75rem));
  max-width: calc(100% - 32px);
  width: auto;
  min-width: 450px;
  
  /* Animazioni */
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
  z-index: 999;
}

/* Effetto rifrazione della luce per bottom nav */
.pwa-bottom-nav::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 60%;
  background: linear-gradient(180deg, 
    rgba(255, 255, 255, 0.15) 0%, 
    transparent 100%
  );
  pointer-events: none;
  z-index: 1;
  border-radius: inherit;
}

/* Contenuto bottom nav sopra rifrazione */
.pwa-bottom-nav > * {
  position: relative;
  z-index: 2;
}

/* Dark Mode per PWA Brand Header e Bottom Nav */
body.dark-mode .pwa-brand-header,
body.dark-mode .pwa-bottom-nav {
  background: linear-gradient(135deg, 
    rgba(13, 94, 102, 0.9) 0%, 
    rgba(10, 77, 84, 0.7) 50%, 
    rgba(8, 60, 66, 0.5) 100%
  );
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.5),
    0 4px 16px rgba(13, 94, 102, 0.4);
}

body.dark-mode .pwa-brand-header::before,
body.dark-mode .pwa-bottom-nav::before {
  background: linear-gradient(180deg, 
    rgba(255, 255, 255, 0.08) 0%, 
    transparent 100%
  );
}

body.dark-mode .pwa-nav-item {
  color: rgba(255, 255, 255, 0.8);
}

body.dark-mode .pwa-nav-item.active {
  background: rgba(255, 255, 255, 0.12);
  color: #ffffff;
}

body.dark-mode .pwa-nav-item:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #ffffff;
}

/* Nascosta di default */
.pwa-bottom-nav[style*="display: none"] {
  transform: translateX(-50%) translateY(150%);
  opacity: 0;
  pointer-events: none;
}

/* Visibile quando attiva */
.pwa-bottom-nav:not([style*="display: none"]) {
  transform: translateX(-50%) translateY(0);
  opacity: 1;
  pointer-events: all;
}

/* Singola tab/icona */
.pwa-nav-item {
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.35rem;
  
  padding: 0.625rem 1.25rem;
  border-radius: 12px;
  background: transparent;
  border: none;
  
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
  cursor: pointer;
  
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  -webkit-tap-highlight-color: transparent;
}

/* Icona SVG - sottile e moderna */
.pwa-nav-icon {
  width: 26px;
  height: 26px;
  stroke-width: 1.5;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Label con nomi sotto le icone */
.pwa-nav-label {
  display: block;
  font-size: 0.7rem;
  font-weight: 500;
  white-space: nowrap;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Assicura che i pulsanti (settings) siano cliccabili */
button.pwa-nav-item,
.pwa-nav-item button {
  pointer-events: all !important;
  cursor: pointer !important;
  background: transparent;
  border: none;
  outline: none;
}

button.pwa-nav-item:focus {
  outline: 2px solid rgba(255, 255, 255, 0.5);
  outline-offset: 2px;
}

/* Logo Wrapper - Ingrandito */
.pwa-logo-wrapper {
  position: relative;
  width: 65px;
  height: 65px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 14px;
  perspective: 1000px;
  transform-style: preserve-3d;
  flex-shrink: 0;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 2px 8px rgba(255, 255, 255, 0.2);
}

/* Logo Images con effetto flip 3D (solo desktop) */
.pwa-logo-img {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 14px;
  transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.6s;
  backface-visibility: hidden;
  z-index: 1;
}

.pwa-logo-default {
  transform: rotateY(0deg);
  opacity: 1;
}

.pwa-logo-hover {
  transform: rotateY(180deg);
  opacity: 0;
}

/* Flip 3D solo su desktop (hover) */
@media (hover: hover) and (pointer: fine) {
  .pwa-logo-wrapper:hover .pwa-logo-default {
    transform: rotateY(180deg);
    opacity: 0;
  }
  
  .pwa-logo-wrapper:hover .pwa-logo-hover {
    transform: rotateY(360deg);
    opacity: 1;
  }
}

/* Mobile/Touch: nessun flip, logo fisso */
@media (hover: none) or (pointer: coarse) {
  .pwa-logo-hover {
    display: none;
  }
  
  .pwa-logo-default {
    opacity: 1 !important;
    transform: rotateY(0deg) !important;
  }
}

/* Effetto rifrazione della luce interno (come navbar) */
.pwa-logo-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 60%;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.25) 0%,
    rgba(255, 255, 255, 0.15) 40%,
    transparent 70%,
    transparent 100%
  );
  border-radius: 14px 14px 8px 8px;
  pointer-events: none;
  z-index: 1;
}

/* Brand Title Container */
.pwa-brand-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: rgba(255, 255, 255, 0.95);
}

/* Logo Acronym (TPL FVG) - Minuscolo */
.pwa-logo-acronym {
  display: flex;
  flex-direction: column;
  text-transform: lowercase;
  font-family: 'Arial', sans-serif;
  font-weight: 700;
  line-height: 1;
  letter-spacing: 0.5px;
  text-shadow: 0 2px 15px rgba(0, 0, 0, 0.6);
}

.pwa-logo-acronym div {
  font-size: 1.4rem;
}

/* Logo Text (trasporto pubblico locale) - Identico alla navbar */
.pwa-logo-text {
  display: flex;
  flex-direction: column;
  text-transform: lowercase;
  font-family: 'Arial', sans-serif;
  font-weight: 300;
  line-height: 1.15;
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.9);
  letter-spacing: 0.3px;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

/* Hover (solo desktop) */
@media (hover: hover) {
  .pwa-nav-item:hover {
    background: rgba(255, 255, 255, 0.2);
    color: #ffffff;
    transform: scale(1.05);
  }
  
  .pwa-nav-item:hover .pwa-nav-icon {
    transform: scale(1.15);
  }
  
}

/* Tab attiva */
.pwa-nav-item.active {
  background: rgba(255, 255, 255, 0.25);
  color: #ffffff;
}

.pwa-nav-item.active .pwa-nav-icon {
  stroke-width: 2;
  transform: scale(1.1);
}

/* Effetto tap */
.pwa-nav-item:active {
  transform: scale(0.92);
}

/* Indicatore tab attiva (pallino animato) */
.pwa-nav-item.active::after {
  content: '';
  position: absolute;
  bottom: 4px;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: #ffffff;
  animation: dotPulse 2s ease-in-out infinite;
}

@keyframes dotPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.6;
    transform: scale(1.3);
  }
}

/* Dark mode - stesso colore turchese ma più scuro */
.dark .pwa-brand-header,
.dark .pwa-bottom-nav {
  background: linear-gradient(135deg, rgba(0, 100, 110, 0.95), rgba(0, 123, 138, 0.95));
  border-color: rgba(255, 255, 255, 0.15);
  box-shadow: 
    0 8px 40px rgba(0, 0, 0, 0.5),
    0 4px 16px rgba(0, 123, 138, 0.3);
}

.dark .pwa-nav-item {
  color: rgba(255, 255, 255, 0.65);
}

.dark .pwa-nav-item.active {
  color: #ffffff;
  background: rgba(255, 255, 255, 0.2);
}

.dark .pwa-nav-item.active::after {
  background: #ffffff;
}

@media (hover: hover) {
  .dark .pwa-nav-item:hover {
    background: rgba(255, 255, 255, 0.15);
    color: #ffffff;
  }
}

/* Padding per contenuto quando PWA è attiva */
body.pwa-mode .main-content {
  padding-top: 85px; /* Spazio per brand header in alto */
  padding-bottom: calc(90px + env(safe-area-inset-bottom)); /* Spazio per bottom nav */
}

body.pwa-mode footer {
  padding-bottom: calc(90px + env(safe-area-inset-bottom));
}

/* Nasconde navbar superiore in modalità PWA */
body.pwa-mode .navbar {
  display: none;
}

/* Animazione entrata */
@keyframes slideUpNav {
  from {
    transform: translateX(-50%) translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
}

.pwa-bottom-nav.show {
  animation: slideUpNav 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Responsive - Mobile */
@media (max-width: 480px) {
  .pwa-brand-header {
    padding: 0.75rem 1rem;
    gap: 0.5rem;
  }
  
  body.pwa-mode .main-content {
    padding-top: 80px; /* Altezza ridotta brand header mobile */
  }
  
  .pwa-bottom-nav {
    padding: 0.625rem 1rem;
    max-width: calc(100% - 24px);
    bottom: 12px;
    min-width: 0;
  }
  
  .pwa-nav-item {
    padding: 0.5rem 0.75rem;
    gap: 0.25rem;
  }
  
  .pwa-nav-icon {
    width: 22px;
    height: 22px;
  }
  
  .pwa-nav-label {
    font-size: 0.65rem;
  }
  
  .pwa-logo-wrapper {
    width: 50px;
    height: 50px;
  }
  
  .pwa-logo-acronym div {
    font-size: 1.4rem;
  }
  
  .pwa-logo-text {
    font-size: 0.8rem;
    line-height: 1.1;
  }
}

/* Responsive - Schermi molto piccoli */
@media (max-width: 360px) {
  .pwa-brand-header {
    padding: 0.625rem 0.75rem;
    gap: 0.4rem;
  }
  
  .pwa-bottom-nav {
    padding: 0.5rem 0.5rem;
    max-width: calc(100% - 20px);
    gap: 0.25rem;
  }
  
  .pwa-nav-item {
    padding: 0.5rem 0.5rem;
    gap: 0.2rem;
  }
  
  .pwa-nav-icon {
    width: 20px;
    height: 20px;
  }
  
  .pwa-nav-label {
    font-size: 0.6rem;
  }
  
  .pwa-logo-wrapper {
    width: 45px;
    height: 45px;
  }
  
  .pwa-logo-acronym div {
    font-size: 1.2rem;
  }
  
  .pwa-logo-text {
    font-size: 0.7rem;
    line-height: 1;
  }
  
  .pwa-brand-title {
    gap: 0.4rem;
  }
}

/* ========================================
   BANNER OFFLINE
   ======================================== */

.offline-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10000;
  transform: translateY(-100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: none;
}

.offline-banner.show {
  transform: translateY(0);
  pointer-events: auto;
}

.offline-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, 
    rgba(251, 146, 60, 0.95), 
    rgba(234, 88, 12, 0.95)
  );
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.offline-icon {
  font-size: 1.5rem;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.1);
  }
}

.offline-text {
  color: white;
  font-weight: 600;
  font-size: 1rem;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.offline-close {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 1.5rem;
  font-weight: bold;
  line-height: 1;
  transition: all 0.2s ease;
  margin-left: auto;
}

.offline-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.offline-close:active {
  transform: scale(0.95);
}

/* Stato online (verde) */
.offline-banner.online .offline-content {
  background: linear-gradient(135deg, 
    rgba(34, 197, 94, 0.95), 
    rgba(22, 163, 74, 0.95)
  );
}

.offline-banner.online .offline-text {
  color: white;
}

/* Dark mode */
.dark .offline-content {
  background: linear-gradient(135deg, 
    rgba(251, 146, 60, 0.98), 
    rgba(234, 88, 12, 0.98)
  );
  border-bottom-color: rgba(255, 255, 255, 0.2);
}

.dark .offline-banner.online .offline-content {
  background: linear-gradient(135deg, 
    rgba(34, 197, 94, 0.98), 
    rgba(22, 163, 74, 0.98)
  );
}

/* Responsive */
@media (max-width: 768px) {
  .offline-content {
    padding: 0.75rem 1.5rem;
    gap: 0.5rem;
  }
  
  .offline-text {
    font-size: 0.9rem;
  }
  
  .offline-icon {
    font-size: 1.25rem;
  }
  
  .offline-close {
    width: 24px;
    height: 24px;
    font-size: 1.25rem;
  }
}

/* Supporto safe-area per notch/isole */
@media (max-width: 768px) {
  .offline-content {
    padding-top: max(0.75rem, env(safe-area-inset-top));
  }
}

/* ========================================
   PULSANTE "VEDI TUTTI GLI AGGIORNAMENTI"
   ======================================== */

.update-item-hidden {
  display: none;
  opacity: 0;
  transform: translateY(-10px);
  transition: all 0.3s ease;
}

.update-item-hidden.show {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

.show-all-updates-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem 1.5rem;
  margin-top: 1rem;
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.1), rgba(16, 185, 129, 0.1));
  border: 2px solid rgba(23, 183, 177, 0.3);
  border-radius: 10px;
  color: #17b7b1;
  font-weight: 600;
  font-size: 0.95rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.show-all-updates-btn:hover {
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.15), rgba(16, 185, 129, 0.15));
  border-color: #17b7b1;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(23, 183, 177, 0.2);
}

.show-all-updates-btn:active {
  transform: translateY(0);
}

.show-updates-icon {
  font-size: 1.1rem;
  transition: transform 0.3s ease;
}

.show-all-updates-btn.active .show-updates-icon {
  transform: rotate(180deg);
}

.show-all-updates-btn.active .show-updates-text::after {
  content: ' meno';
}

/* Dark mode */
.dark .show-all-updates-btn {
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.15), rgba(16, 185, 129, 0.15));
  border-color: rgba(23, 183, 177, 0.4);
  color: #10b981;
}

.dark .show-all-updates-btn:hover {
  background: linear-gradient(135deg, rgba(23, 183, 177, 0.2), rgba(16, 185, 129, 0.2));
  border-color: #10b981;
}

/* ========================================
   PULSANTI PRESET (Distanza + Fake Position)
   ======================================== */

.distance-preset-btn,
.fake-position-preset {
  padding: 0.5rem 1rem;
  background: white;
  border: 2px solid #d1d5db;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  font-size: 0.9rem;
  color: #374151;
  transition: all 0.3s ease;
}

.distance-preset-btn:hover,
.fake-position-preset:hover {
  background: #f3f4f6;
  border-color: #9ca3af;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.distance-preset-btn:active,
.fake-position-preset:active {
  transform: translateY(0);
}

/* Pulsanti fake position (viola) */
.fake-position-preset {
  border-color: #d8b4fe;
  color: #7e22ce;
}

.fake-position-preset:hover {
  background: #faf5ff;
  border-color: #a855f7;
  box-shadow: 0 4px 8px rgba(168, 85, 247, 0.2);
}

.fake-position-preset.active {
  background: #a855f7;
  border-color: #7e22ce;
  color: white;
}

/* Hover pulsante "Applica Posizione Fake" */
#apply-fake-position:hover {
  background: #9333ea;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
}

#apply-fake-position:active {
  transform: translateY(0);
}

/* Dark mode */
.dark .distance-preset-btn,
.dark .fake-position-preset {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.9);
}

.dark .distance-preset-btn:hover,
.dark .fake-position-preset:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}

.dark .fake-position-preset {
  border-color: rgba(168, 85, 247, 0.3);
  color: #c084fc;
}

.dark .fake-position-preset:hover {
  background: rgba(168, 85, 247, 0.1);
  border-color: #a855f7;
}

.dark .fake-position-preset.active {
  background: #a855f7;
  color: white;
}