<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Benvenuto</title>
<!-- Font locali per PWA offline -->
<!-- CSS personalizzato -->
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json"/>
<link rel="icon" href="src/tpl.jpg" type="image/jpeg"/>
</head>
<body>
<div class="main-content">
  <div class="container">
    <div class="main-card fade-in">
      <div class="card-title">
        <div class="mb-4 welcome-image-container">
          <img src="./src/autobus.png" alt="Autobus TPL FVG" class="welcome-image" />
        </div>
        <h1>Benvenuto</h1>
        <p>Calcola rapidamente il costo del biglietto in base alla tratta.</p>
      </div>
      
      <div class="calculate-section">
        <button id="start-btn" class="calculate-btn">
          Inizia
        </button>
        <button id="toggle-mode-btn" class="dark-mode-btn" aria-label="Cambia modalità" title="Cambia modalità chiara/scura">
          <span id="toggle-mode-icon">🌙</span>
          <span id="toggle-mode-label">Modalità Scura</span>
        </button>
      </div>
    </div>
  </div>
</div>

  <!-- Footer -->
  <footer class="footer">
    <p>© <span id="footer-year"></span> TPL FVG. Tutti i diritti riservati. · Creato da Michele Carnimeo · <a href="test.html" style="color: inherit; text-decoration: none; transition: text-decoration 0.3s ease;" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">TPL FVG 0.8 build 21</a></p>
  </footer>

<script>
  document.getElementById('start-btn').addEventListener('click', function() {
    window.location.href = 'index.html';
  });
  function updateToggleModeBtn() {
    const isDark = document.documentElement.classList.contains('dark');
    const btn = document.getElementById('toggle-mode-btn');
    const icon = document.getElementById('toggle-mode-icon');
    const label = document.getElementById('toggle-mode-label');
    
    if (isDark) {
      btn.className = 'dark-mode-btn dark-mode-active';
      icon.textContent = '☀️';
      label.textContent = 'Modalità Chiara';
    } else {
      btn.className = 'dark-mode-btn';
      icon.textContent = '🌙';
      label.textContent = 'Modalità Scura';
    }
  }
  document.getElementById('toggle-mode-btn').addEventListener('click', function() {
    const isDark = document.documentElement.classList.toggle('dark');
    try { localStorage.setItem('tpl.isDark', isDark ? '1' : '0'); } catch {}
    updateToggleModeBtn();
  });
  // Applica la modalità salvata se presente
  try {
    const storedDark = localStorage.getItem('tpl.isDark');
    if (storedDark === '1') {
      document.documentElement.classList.add('dark');
      document.body.className = 'font-display bg-background-dark text-foreground-dark';
    } else {
      document.documentElement.classList.remove('dark');
      document.body.className = 'font-display bg-background-light text-foreground-light';
    }
  } catch {}
  updateToggleModeBtn();
  
  // Aggiorna l'anno nel footer
  const footerYear = document.getElementById('footer-year');
  if (footerYear) footerYear.textContent = new Date().getFullYear();
  
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js').catch(err => console.error('SW registration failed', err));
    });
  }
</script>
</body>
</html>
